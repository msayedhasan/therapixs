{"version":3,"sources":["webpack:///src/app/pages/discounts/add-discount/add-discount.component.html","webpack:///src/app/pages/discounts/add-discount/add-discount.component.ts","webpack:///src/app/pages/discounts/discounts-routing.module.ts","webpack:///src/app/pages/discounts/discounts.component.html","webpack:///src/app/pages/discounts/discounts.component.ts","webpack:///src/app/pages/discounts/discounts.module.ts","webpack:///src/app/pages/discounts/discounts.service.ts"],"names":["form","patchValue","AddDiscountComponent","fb","discountsService","categoriesService","productsService","storesService","toastr","spinner","router","group","discountType","discountValue","discountPercentage","validTill","discountOnList","_id","nameEn","nameAr","products","categories","stores","subCategories","selectedCategory","minDate","Date","datePickerValue","forPeriod","setNow","getProductsList","getbaseCategoriesList","getStoresList","event","console","log","discountOn","selectedStoreId","undefined","selectedProductId","show","getAll","subscribe","data","selectProductsList","map","x","hide","selectStoresList","getBaseCategories","baseCategories","selectBaseCategoriesList","getOne","res","info","length","error","message","fieldIndex","key","splice","addDiscount","value","navigate","selectedCategoryId","Object","keys","count","prop","hasOwnProperty","newForm","storeId","now","hours","getHours","slice","minutes","getMinutes","str","time","target","checked","get","getFullYear","getMonth","getDate","parseInt","split","addStoreDiscount","addCategoryDiscount","selectDiscountOn","changePeriod","onSubmit","selector","templateUrl","styleUrls","routes","path","component","DiscountsRoutingModule","forChild","imports","exports","modalRef","DiscountsComponent","discountService","languageService","modalService","exportAsService","route","items","itemCount","limit","limits","offset","tableElements","advertise","image","exportAsConfig","type","elementIdOrContent","options","jsPDF","orientation","params","val","getData","langSub","currentLanguage","lang","currentLang","arabic","unsubscribe","discounts","itemResource","reloadItems","query","template","id","itemId","formData","FormData","append","addAdvertise","reset","deleteOne","opt","save","content","exportAs","DiscountsModule","forRoot","declarations","DiscountsService","http","next","post","providedIn"],"mappings":"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","file":"pages-discounts-discounts-module-es5.js","sourcesContent":["<div class=\"grid-center-noGutter\">\n  <div class=\"col-20_sm-22_xs-23 grid-center-noGutter content\">\n    <div class=\"title col-24 grid-center\">\n      {{ \"Add\" | lowercase | translate }}\n      {{ \"discount\" | lowercase | translate }}\n    </div>\n    <div class=\"form col-23\">\n      <div class=\"grid-middle-noGutter\">\n        <div class=\"col-24 grid-noGutter\">\n          <app-select\n            class=\"col-11_sm-24\"\n            [label]=\"'Discount on'\"\n            [labelAr]=\"'خصم علي'\"\n            [fieldId]=\"'discountOn'\"\n            [ItemsList]=\"discountOnList\"\n            [placeholder]=\"'Select'\"\n            [placeholderAr]=\"'اختر'\"\n            [fieldClass]=\"'col-18_md-24'\"\n            [required]=\"true\"\n            (itemselected)=\"selectDiscountOn($event)\"\n          >\n          </app-select>\n        </div>\n\n        <ng-container\n          *ngIf=\"discountOn === 'Store' || discountOn === 'Category'\"\n        >\n          <div class=\"col-24 grid-noGutter\">\n            <app-select\n              class=\"col-11_sm-24\"\n              [label]=\"'Stores'\"\n              [labelAr]=\"'المتجر'\"\n              [fieldId]=\"'stores'\"\n              [ItemsList]=\"selectStoresList\"\n              [placeholder]=\"'Choose store'\"\n              [placeholderAr]=\"'اختر متجر'\"\n              [fieldClass]=\"'col-18_md-24'\"\n              [required]=\"true\"\n              (itemselected)=\"selectStore($event)\"\n            >\n            </app-select>\n          </div>\n        </ng-container>\n\n        <ng-container *ngIf=\"discountOn === 'Product'\">\n          <div class=\"col-24 grid-noGutter\">\n            <app-select\n              class=\"col-11_sm-24\"\n              [label]=\"'Products'\"\n              [fieldId]=\"'products'\"\n              [ItemsList]=\"selectProductsList\"\n              [placeholder]=\"'Choose product'\"\n              [fieldClass]=\"'col-18_md-24'\"\n              [required]=\"true\"\n              (itemselected)=\"selectProduct($event)\"\n            >\n            </app-select>\n          </div>\n        </ng-container>\n\n        <ng-container *ngIf=\"discountOn === 'Category'\">\n          <div class=\"col-24 grid-noGutter\">\n            <app-select\n              class=\"col-11_sm-24\"\n              [label]=\"'Category'\"\n              [labelAr]=\"'الصنف'\"\n              [fieldId]=\"'parentCategory'\"\n              [ItemsList]=\"selectBaseCategoriesList\"\n              [placeholder]=\"'Choose parent category'\"\n              [placeholderAr]=\"'اختر صنف'\"\n              [fieldClass]=\"'col-18_md-24'\"\n              [required]=\"true\"\n              (itemselected)=\"selectBaseCategory($event)\"\n            >\n            </app-select>\n          </div>\n          <ng-container *ngFor=\"let category of subCategories; index as i\">\n            <div class=\"col-24 grid-noGutter\">\n              <app-select\n                class=\"col-11_sm-24\"\n                [label]=\"'sub category'\"\n                [labelAr]=\"'الصنف الفرعي'\"\n                [fieldId]=\"'subCategory' + (i + 1).toString()\"\n                [ItemsList]=\"subCategories[i]\"\n                [placeholder]=\"'Choose sub-category'\"\n                [placeholderAr]=\"'اختر صنف فرعي'\"\n                [fieldClass]=\"'col-18_md-24'\"\n                [required]=\"true\"\n                (itemselected)=\"selectSubCategory(i, $event)\"\n              >\n              </app-select>\n            </div>\n          </ng-container>\n        </ng-container>\n\n        <div class=\"col-24 grid-noGutter\">\n          <div class=\"col-11_sm-24\">\n            <div class=\"col-24 grid\">\n              <app-input-radio\n                class=\"col-24\"\n                [label]=\"'Discount type'\"\n                [labelAr]=\"'نوع الخصم'\"\n                [fieldId]=\"'discountType'\"\n                [items]=\"['percent', 'value']\"\n                [control]=\"form.get('discountType')\"\n                [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n              ></app-input-radio>\n\n              <ng-container *ngIf=\"form.get('discountType').value === 'value'\">\n                <app-input-text\n                  class=\"col-24\"\n                  (change)=\"form.get('discountPercentage').patchValue(0)\"\n                  [label]=\"'Discount value'\"\n                  [labelAr]=\"'خصم قيمة'\"\n                  [fieldId]=\"'discountValue'\"\n                  type=\"number\"\n                  [placeholder]=\"'Discount on this category'\"\n                  [control]=\"form.get('discountValue')\"\n                  [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n                >\n                </app-input-text>\n              </ng-container>\n\n              <ng-container\n                *ngIf=\"form.get('discountType').value === 'percent'\"\n              >\n                <app-input-text\n                  class=\"col-24\"\n                  (change)=\"form.get('discountValue').patchValue(0)\"\n                  [label]=\"'Discount percent'\"\n                  [labelAr]=\"'خصم نسبة'\"\n                  [fieldId]=\"'discountPercentage'\"\n                  type=\"number\"\n                  [placeholder]=\"'Discount on this category'\"\n                  [control]=\"form.get('discountPercentage')\"\n                  [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n                >\n                </app-input-text>\n              </ng-container>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"col-24 grid-noGutter\">\n          <div class=\"col-24 grid-noGutter\">\n            <div class=\"col-11_sm-24 form-group grid-center-middle-noGutter\">\n              <div class=\"col_sm-24 grid_sm-noGutter field-label\">\n                <label for=\"period\"> {{ \"forPeriod\" | lowercase | translate }}</label>\n              </div>\n\n              <div class=\"col-11_sm-24 grid\">\n                <label class=\"toggleButton\" tooltip=\"for specific time\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"period\"\n                    [(ngModel)]=\"forPeriod\"\n                    (change)=\"changePeriod($event)\"\n                  />\n                  <div>\n                    <svg viewBox=\"0 0 44 44\">\n                      <path\n                        d=\"M14,24 L21,31 L39.7428882,11.5937758 C35.2809627,6.53125861 30.0333333,4 24,4 C12.95,4 4,12.95 4,24 C4,35.05 12.95,44 24,44 C35.05,44 44,35.05 44,24 C44,19.3 42.5809627,15.1645919 39.7428882,11.5937758\"\n                        transform=\"translate(-2.000000, -2.000000)\"\n                      ></path>\n                    </svg>\n                  </div>\n                </label>\n              </div>\n            </div>\n          </div>\n          <ng-container *ngIf=\"forPeriod\">\n            <div class=\"col-11_24 grid-middle-spaceBetween-noGutter\">\n              <label>Valid till: </label>\n              <div class=\"col-19_xlg-18_lg-17_md-24 grid-noGutter\">\n                <input\n                  type=\"text\"\n                  class=\"form-control col\"\n                  bsDatepicker\n                  autocomplete=\"off\"\n                  placeholder=\"YYYY-MM-DD\"\n                  [(bsValue)]=\"datePickerValue\"\n                  [minDate]=\"minDate\"\n                  [bsConfig]=\"{ isAnimated: true, adaptivePosition: true }\"\n                />\n                <input\n                  class=\"form-control col\"\n                  type=\"time\"\n                  [(ngModel)]=\"time\"\n                />\n              </div>\n            </div>\n          </ng-container>\n        </div>\n\n        <div class=\"col-24 grid-noGutter\">\n          <div class=\"col-11_24\"></div>\n        </div>\n      </div>\n      <div class=\"grid-right\">\n        <button\n          type=\"submit\"\n          (click)=\"onSubmit()\"\n          class=\"btn col-3_sm-5_xs-6 color1 round\"\n          [disabled]=\"!form.valid\"\n        >\n          {{ \"Submit\" | lowercase | translate }}\n        </button>\n        <button\n          type=\"button\"\n          [routerLink]=\"['/discounts']\"\n          class=\"btn col-3_sm-5_xs-6 color2 round\"\n        >\n          {{ \"Cancel\" | lowercase | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, AfterViewInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { ToastrService } from 'ngx-toastr';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { Router } from '@angular/router';\n\n// import { BsDatepickerConfig, BsLocaleService } from 'ngx-bootstrap/datepicker';\n// import { itLocale } from 'ngx-bootstrap/locale';\n\nimport { DiscountsService } from '../discounts.service';\nimport { ProductsService } from '../../products//products.service';\nimport { CategoriesService } from '../../categories/categories.service';\nimport { StoresService } from '../../stores/stores.service';\nimport { InputSelectItem } from 'src/app/models/InputSelectItem';\n\n@Component({\n  selector: 'app-add-discount',\n  templateUrl: './add-discount.component.html',\n  styleUrls: ['./add-discount.component.scss'],\n})\nexport class AddDiscountComponent implements AfterViewInit {\n  constructor(\n    private fb: FormBuilder,\n    private discountsService: DiscountsService,\n    private categoriesService: CategoriesService,\n    private productsService: ProductsService,\n    private storesService: StoresService,\n    private toastr: ToastrService,\n    private spinner: NgxSpinnerService,\n    private router: Router // private localeService: BsLocaleService\n  ) {\n    this.setNow();\n  }\n\n  form = this.fb.group({\n    discountType: [''],\n    discountValue: [0],\n    discountPercentage: [0],\n    validTill: [],\n  });\n\n  ngAfterViewInit(): void {\n    this.getProductsList();\n    this.getbaseCategoriesList();\n    this.getStoresList();\n  }\n\n  discountOnList: InputSelectItem[] = [\n    // { _id: '1', nameEn: 'Product', nameAr: '' },\n    { _id: '2', nameEn: 'Category', nameAr: '' },\n    { _id: '3', nameEn: 'Store', nameAr: '' },\n  ];\n\n  discountOn;\n  products = [];\n  categories = [];\n  stores = [];\n  selectDiscountOn(event) {\n    if (event) {\n      console.log(event);\n      this.discountOn = event.nameEn;\n      if (this.discountOn === 'Product') {\n        this.selectedStoreId = undefined;\n      } else if (this.discountOn === 'Category') {\n        this.selectedProductId = undefined;\n      } else if (this.discountOn === 'Store') {\n        this.selectedProductId = undefined;\n      }\n    }\n  }\n  ///////////////////////////////\n  // Product ///////////////////\n  selectProductsList: InputSelectItem[];\n  selectedProductId: String;\n  getProductsList() {\n    console.log('getting products');\n\n    this.spinner.show();\n\n    this.productsService.getAll();\n\n    this.productsService.products.subscribe(async (data) => {\n      if (data) {\n        this.selectProductsList = data.map((x) => {\n          return {\n            _id: x['_id'],\n            nameEn: `${x['name']}`,\n            nameAr: '',\n          };\n        });\n      }\n    });\n\n    this.spinner.hide();\n  }\n  selectProduct(event) {\n    if (event) {\n      console.log(event);\n      this.selectedProductId = event._id;\n    }\n  }\n  // End Product\n  //////////////////////////////////\n\n  ///////////////////////////////\n  // Store ///////////////////\n  selectStoresList: InputSelectItem[];\n  selectedStoreId: String;\n  getStoresList() {\n    console.log('getting stores');\n\n    this.spinner.show();\n\n    this.storesService.getAll();\n\n    this.storesService.stores.subscribe(async (data) => {\n      if (data) {\n        this.selectStoresList = data.map((x) => {\n          return {\n            _id: x['_id'],\n            nameEn: `${x['name']}`,\n            nameAr: '',\n          };\n        });\n      }\n    });\n\n    this.spinner.hide();\n  }\n  selectStore(event) {\n    if (event) {\n      console.log(event);\n      this.selectedStoreId = event._id;\n    }\n  }\n  // End Product\n  //////////////////////////////////\n\n  ///////////////////////////////\n  // Category ///////////////////\n  // Start select dropdown\n  selectBaseCategoriesList: InputSelectItem[];\n  subCategories = [];\n  selectedCategory = {};\n  getbaseCategoriesList() {\n    console.log('getting categories');\n\n    this.spinner.show();\n\n    this.categoriesService.getBaseCategories();\n\n    this.categoriesService.baseCategories.subscribe((data) => {\n      if (data) {\n        this.selectBaseCategoriesList = data.map((x) => {\n          return {\n            _id: x['_id'],\n            nameEn: `${x['name']['en']}`,\n            nameAr: `${x['name']['ar']}`,\n          };\n        });\n      }\n    });\n\n    this.spinner.hide();\n  }\n  selectBaseCategory(event) {\n    this.spinner.show();\n\n    if (event) {\n      this.selectedCategory = {};\n      this.selectedCategory[0] = event;\n\n      this.categoriesService.getOne(event._id).subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n          this.subCategories = [];\n          if (res['data'].categories) {\n            if (res['data'].categories.length > 0) {\n              this.subCategories[0] = res['data'].categories.map((x) => {\n                return {\n                  _id: x['_id'],\n                  nameEn: `${x['name']['en']}`,\n                  nameAr: `${x['name']['ar']}`,\n                };\n              });\n            }\n          }\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n    }\n\n    this.spinner.hide();\n  }\n  // End select dropdown\n\n  selectSubCategory(fieldIndex, event) {\n    this.spinner.show();\n\n    // delete all next selected categories to index\n    for (const key in this.selectedCategory) {\n      if (key > fieldIndex + 1) {\n        delete this.selectedCategory[key];\n      }\n    }\n\n    // delete all next subcategories\n    this.subCategories.splice(fieldIndex + 1);\n\n    if (event) {\n      // selected category of index = event\n      this.selectedCategory[fieldIndex + 1] = event;\n\n      this.categoriesService.getOne(event._id).subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n          if (res['data'].categories) {\n            if (res['data'].categories.length > 0) {\n              this.subCategories[fieldIndex + 1] = res['data'].categories.map(\n                (x) => {\n                  return {\n                    _id: x['_id'],\n                    nameEn: `${x['name']['en']}`,\n                    nameAr: `${x['name']['ar']}`,\n                  };\n                }\n              );\n            }\n          }\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n    } else {\n      // selected category of index = event\n      delete this.selectedCategory[fieldIndex + 1];\n    }\n\n    this.spinner.hide();\n  }\n  // End Category\n  //////////////////////////////////\n\n  addStoreDiscount() {\n    if (!this.selectedStoreId || this.selectedStoreId === '') {\n      return this.toastr.error('Select Store', 'Error');\n    }\n    this.spinner.show();\n\n    this.storesService\n      .addDiscount(this.form.value, this.selectedStoreId)\n      .subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n          this.router.navigate(['/discounts']);\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n\n    this.spinner.hide();\n  }\n\n  addCategoryDiscount() {\n    this.spinner.show();\n\n    let selectedCategoryId;\n\n    if (Object.keys(this.selectedCategory).length !== 0) {\n      var count = 0;\n      for (var prop in this.selectedCategory) {\n        if (this.selectedCategory.hasOwnProperty(prop)) ++count;\n      }\n      if (this.selectedCategory[count - 1]) {\n        selectedCategoryId = this.selectedCategory[count - 1]._id;\n      }\n    } else {\n      return this.toastr.error('Select Category', 'Error');\n    }\n\n    let newForm = { ...this.form.value, storeId: this.selectedStoreId };\n    this.categoriesService.addDiscount(newForm, selectedCategoryId).subscribe(\n      (res) => {\n        this.toastr.info(res['message'], 'Info');\n        this.router.navigate(['/discounts']);\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  minDate = new Date();\n  datePickerValue: Date = new Date();\n  time: string;\n  forPeriod = false;\n  setNow() {\n    let now = new Date();\n    let hours = ('0' + now.getHours()).slice(-2);\n    let minutes = ('0' + now.getMinutes()).slice(-2);\n    let str = hours + ':' + minutes;\n    this.time = str;\n  }\n  changePeriod(event) {\n    if (!event.target.checked) {\n      this.form.get('validTill').patchValue(undefined);\n    }\n  }\n\n  onSubmit() {\n    if (this.forPeriod) {\n      var validTill = new Date(\n        this.datePickerValue.getFullYear(),\n        this.datePickerValue.getMonth(),\n        this.datePickerValue.getDate(),\n        parseInt(this.time.split(':')[0]),\n        parseInt(this.time.split(':')[1]),\n        0\n      );\n\n      this.form.get('validTill').patchValue(validTill);\n    }\n\n    if (this.discountOn === 'Store') {\n      this.addStoreDiscount();\n    } else if (this.discountOn === 'Category') {\n      this.addCategoryDiscount();\n    }\n    //  else if (this.discountOn === 'Product') {\n    // }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { DiscountsComponent } from './discounts.component';\nimport { AddDiscountComponent } from './add-discount/add-discount.component';\n\nconst routes: Routes = [\n  { path: '', component: DiscountsComponent },\n  { path: 'add', component: AddDiscountComponent },\n];\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DiscountsRoutingModule {}\n","<div class=\"grid-center-noGutter\">\n  <div class=\"col-20_sm-22_xs-23\" style=\"margin-top: 20px\">\n    <div class=\"card\">\n      <div class=\"card-header\">\n        <span>{{ \"Discounts\" | lowercase | translate }} </span>\n      </div>\n      <div class=\"card-body grid-center-noGutter\">\n        <div class=\"col-24 grid-spaceBetween-noGutter\">\n          <div class=\"card xs-hidden\">\n            <div class=\"card-body\">\n              <span\n                style=\"\n                  display: inline-block;\n                  background-color: #4899c2;\n                  padding: 15px;\n                  color: white;\n                \"\n              >\n                <i class=\"material-icons\">home</i>\n              </span>\n              <div style=\"display: inline-block; margin: 0 10px\">\n                <div style=\"color: #20a8d8; font-size: 18px; font-weight: 600\">\n                  {{ items.length }}\n                </div>\n                <div style=\"color: #73818f; font-size: 80%; font-weight: 700\">\n                  {{ \"Discounts\" | lowercase | translate }}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-top xs-24 grid-noGutter\" style=\"margin-top: 15px\">\n            <div class=\"grid-column-noGutter\">\n              <div class=\"grid-right col-3_xlg-4_lg-6_sm-10\">\n                <a [routerLink]=\"['./add']\" class=\"btn color1 round addbtn\">\n                  {{ \"Add\" | lowercase | translate }}\n                  {{ \"discount\" | lowercase | translate }}</a\n                >\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"grid-right-noGutter\" style=\"margin-top: 20px\">\n      <button class=\"btn color5 round\" (click)=\"exportAs('xlsx')\">\n        {{ \"Export\" | lowercase | translate }}\n      </button>\n      <!-- <div class=\"dropdown\">\n        <button class=\"dropbtn\">Export</button> -->\n      <!-- <div class=\"dropdown-content\">\n          <a (click)=\"exportAs('xlsx')\">xlsx</a>\n          <a (click)=\"exportAs('pdf', 'landscape')\">pdf</a> -->\n      <!-- <a (click)=\"exportAs('png')\">png</a>\n                  <a (click)=\"exportAs('txt')\">txt</a>\n                  <a (click)=\"exportAs('csv')\">csv</a>\n                  <a (click)=\"exportAs('xml')\">xml</a> -->\n      <!-- </div> -->\n      <!-- </div> -->\n    </div>\n\n    <div class=\"grid-center-noGutter\" style=\"margin-top: 20px\">\n      <ng-container>\n        <ng-container *ngTemplateOutlet=\"table\"></ng-container>\n      </ng-container>\n    </div>\n  </div>\n</div>\n\n<ng-template #table>\n  <div>\n    <data-table\n      id=\"my-table\"\n      title=\"List of Discounts\"\n      [items]=\"tableElements\"\n      [itemCount]=\"itemCount\"\n      [pageLimits]=\"limits\"\n      [limit]=\"limit\"\n      [pagination]=\"true\"\n      (reload)=\"reloadItems($event)\"\n    >\n      <data-table-column\n        [property]=\"'discountOn'\"\n        [header]=\"arabic ? 'علي' : 'On'\"\n      >\n      </data-table-column>\n\n      <data-table-column [header]=\"arabic ? 'الاسم' : 'Name'\">\n        <ng-template #dataTableCell let-item=\"item\">{{\n          item.store\n            ? item.store.name\n            : item.category\n            ? item.store\n              ? item.store.name + \"->\" + item.category.name.en\n              : item.category.name.en\n            : item.product\n            ? item.product.name\n            : item.bike\n            ? item.bike.name\n            : \"-\"\n        }}</ng-template>\n      </data-table-column>\n\n      <data-table-column\n        [property]=\"'discountType'\"\n        [header]=\"arabic ? 'النوع' : 'Type'\"\n      >\n      </data-table-column>\n\n      <data-table-column [header]=\"arabic ? 'القيمة' : 'Value'\">\n        <ng-template #dataTableCell let-item=\"item\">{{\n          item.discountValue !== 0\n            ? item.discountValue + \"EGP\"\n            : item.discountPercentage\n            ? item.discountPercentage + \"%\"\n            : \"0\"\n        }}</ng-template>\n      </data-table-column>\n\n      <data-table-column [width]=\"80\" [header]=\"arabic ? '' : 'Actions'\">\n        <ng-template #dataTableCell let-item=\"item\" class=\"grid-center\">\n          <a\n            (click)=\"openModal(templateAdvertise, item._id)\"\n            class=\"lock\"\n            tooltip=\"Advertise\"\n            placement=\"bottom\"\n            triggers=\"mouseenter:mouseleave\"\n          >\n            <i class=\"material-icons\">blur_circular</i>\n          </a>\n          <a\n            (click)=\"openModal(templateDelete, item._id)\"\n            class=\"trash\"\n            tooltip=\"Delete\"\n            placement=\"bottom\"\n            triggers=\"mouseenter:mouseleave\"\n          >\n            <i class=\"material-icons\">delete</i>\n          </a>\n        </ng-template>\n      </data-table-column>\n    </data-table>\n  </div>\n</ng-template>\n\n<ng-template #templateAdvertise id=\"template2\">\n  <div class=\"modal-header\">\n    <h4 style=\"font-weight: bold; justify-content: center\">\n      Do you want to add advertise to This discount ?\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close pull-right\"\n      aria-label=\"Close\"\n      (click)=\"modalRef.hide()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"form-group grid-center-middle-noGutter col-24\">\n      <div class=\"col-24 grid-center\">\n        <app-upload-photo\n          [fieldId]=\"'image'\"\n          [image]=\"image\"\n          [control]=\"advertise.get('image')\"\n        >\n        </app-upload-photo>\n      </div>\n    </div>\n    <div class=\"grid-right\">\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color1 round\"\n        style=\"margin-right: 10px\"\n        (click)=\"addAdvertise()\"\n      >\n        Confirm\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color2 round\"\n        (click)=\"modalRef.hide()\"\n      >\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #templateDelete id=\"template2\">\n  <div class=\"modal-header\">\n    <h4 style=\"color: red; font-weight: bold; justify-content: center\">\n      <i class=\"fa fa-trash fa-lg mt-4\"></i> Do you want to Delete This Element\n      ?\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close pull-right\"\n      aria-label=\"Close\"\n      (click)=\"modalRef.hide()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"grid-right\">\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color1 round\"\n        style=\"margin-right: 10px\"\n        (click)=\"deleteElement()\"\n      >\n        Confirm\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color2 round\"\n        (click)=\"modalRef.hide()\"\n      >\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n","import { Component, OnInit, TemplateRef, OnDestroy } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\nimport { ToastrService } from 'ngx-toastr';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { DataTableResource } from 'angular7-data-table';\n\nimport { LanguageService } from '../../services/language.service';\nimport { Subscription } from 'rxjs';\n\nimport { DiscountsService } from './discounts.service';\nimport { ProductsService } from '../products//products.service';\nimport { CategoriesService } from '../categories/categories.service';\nimport { StoresService } from '../stores/stores.service';\n\nimport {\n  ExportAsService,\n  ExportAsConfig,\n  SupportedExtensions,\n} from 'ngx-export-as';\n\n@Component({\n  selector: 'app-discounts',\n  templateUrl: './discounts.component.html',\n  styleUrls: ['./discounts.component.scss'],\n})\nexport class DiscountsComponent implements OnInit, OnDestroy {\n  itemResource;\n  items = [];\n  itemCount = 0;\n  limit = 20;\n  limits = [20, 25, 50];\n  offset = 1;\n  tableElements = [];\n\n  modalRef: any;\n\n  private langSub: Subscription;\n  currentLang;\n  arabic: boolean;\n\n  constructor(\n    private fb: FormBuilder,\n    private discountService: DiscountsService,\n    private categoriesService: CategoriesService,\n    private productsService: ProductsService,\n    private storesService: StoresService,\n    private languageService: LanguageService,\n    private modalService: BsModalService,\n    private toastr: ToastrService,\n    private spinner: NgxSpinnerService,\n    private exportAsService: ExportAsService,\n    route: ActivatedRoute\n  ) {\n    route.params.subscribe((val) => {\n      this.getData();\n    });\n\n    this.langSub = this.languageService.currentLanguage.subscribe((lang) => {\n      this.currentLang = lang;\n      if (this.currentLang && this.currentLang === 'ar') {\n        this.arabic = true;\n      } else {\n        this.arabic = false;\n      }\n    });\n  }\n  ngOnDestroy(): void {\n    this.langSub.unsubscribe();\n  }\n\n  getData() {\n    this.discountService.getAll();\n\n    this.spinner.show();\n\n    this.discountService.discounts.subscribe(async (data) => {\n      if (data) {\n        this.items = data;\n\n        this.itemResource = new DataTableResource(data);\n        this.itemCount = await this.itemResource.count();\n        this.reloadItems({\n          offset: 0,\n          limit: this.limit,\n        });\n      }\n    });\n\n    this.spinner.hide();\n  }\n  ngOnInit(): void {\n    // this.discountService.getAll();\n    // this.spinner.show();\n    // this.discountService.discounts.subscribe(async (data) => {\n    //   if (data) {\n    //     this.items = data;\n    //     if ( data.length < this.limits[0] - 1) {\n    //       this.limit = data.length + 1;\n    //       this.limits[0] = data.length + 1;\n    //     }\n    //     this.itemResource = new DataTableResource(data);\n    //     this.itemCount = await this.itemResource.count();\n    //     this.reloadItems({\n    //       offset: 0,\n    //       limit: this.limit,\n    //     });\n    //   }\n    // });\n    // this.spinner.hide();\n  }\n\n  async reloadItems(event) {\n    if (this.itemResource) {\n      this.tableElements = await this.itemResource.query(event);\n    }\n  }\n\n  itemId;\n  openModal(template: TemplateRef<any>, id) {\n    this.itemId = id;\n    this.modalRef = this.modalService.show(template);\n  }\n\n  image;\n  advertise = this.fb.group({\n    image: [],\n  });\n  addAdvertise() {\n    const formData = new FormData();\n\n    formData.append('image', this.advertise.value['image']);\n\n    this.spinner.show();\n\n    this.discountService.addAdvertise(this.itemId, formData).subscribe(\n      (res) => {\n        console.log(res);\n        this.image = null;\n        this.advertise.reset();\n        this.toastr.info(res['message'], 'Info');\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n    this.modalRef.hide();\n\n    this.spinner.hide();\n  }\n\n  deleteElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.discountService.deleteOne(this.itemId).subscribe(\n      (res) => {\n        console.log(res);\n        this.toastr.info(res['message'], 'Info');\n        this.items = [];\n\n        this.discountService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  exportAsConfig: ExportAsConfig = {\n    type: 'pdf',\n    elementIdOrContent: 'my-table',\n    options: {\n      jsPDF: {\n        orientation: 'landscape',\n      },\n    },\n  };\n  exportAs(type: SupportedExtensions, opt?: string) {\n    this.exportAsConfig.type = type;\n    if (opt) {\n      this.exportAsConfig.options.jsPDF.orientation = opt;\n    }\n    this.exportAsService\n      .save(this.exportAsConfig, 'Discounts')\n      .subscribe(() => {\n        // save started\n      });\n    this.exportAsService.get(this.exportAsConfig).subscribe((content) => {\n      console.log(content);\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { ModalModule } from 'ngx-bootstrap/modal';\nimport { DataTableModule } from 'angular7-data-table';\nimport { ExportAsModule } from 'ngx-export-as';\nimport { BsDatepickerModule } from 'ngx-bootstrap/datepicker';\n\nimport { DiscountsRoutingModule } from './discounts-routing.module';\n\nimport { FormFieldsModule } from 'src/app/reusable-components/form-fields/form-fields.module';\n\nimport { DiscountsComponent } from './discounts.component';\nimport { AddDiscountComponent } from './add-discount/add-discount.component';\n\nimport { SharedModule } from '../../shared/shared.module';\n\n@NgModule({\n  declarations: [DiscountsComponent, AddDiscountComponent],\n  imports: [\n    CommonModule,\n    DiscountsRoutingModule,\n    FormsModule,\n    FormFieldsModule,\n    DataTableModule.forRoot(),\n    BsDatepickerModule.forRoot(),\n    TooltipModule.forRoot(),\n    ModalModule.forRoot(),\n    ExportAsModule,\n    SharedModule,\n  ],\n})\nexport class DiscountsModule {}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { baseUrl } from '../../config/variables';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DiscountsService {\n  constructor(private http: HttpClient) {}\n\n  discounts = new BehaviorSubject(null);\n\n  getAll() {\n    return this.http.get(baseUrl + '/discount').subscribe(\n      (res) => {\n        if (res['data']) {\n          this.discounts.next(res['data']);\n        }\n      },\n      (error) => {\n        console.log(error);\n        // this.error.next(error.error.message);\n      }\n    );\n  }\n\n  deleteOne(itemId) {\n    return this.http.delete(baseUrl + `/discount/${itemId}`);\n  }\n\n  addAdvertise(itemId, form) {\n    return this.http.post(baseUrl + `/discount/advertise/${itemId}`, form);\n  }\n}\n"]}