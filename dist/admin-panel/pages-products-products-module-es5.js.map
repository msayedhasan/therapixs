{"version":3,"sources":["webpack:///src/app/models/product.ts","webpack:///src/app/pages/products/add-product/add-product.component.ts","webpack:///src/app/pages/products/add-product/add-product.component.html","webpack:///src/app/pages/products/edit-product/edit-product.component.ts","webpack:///src/app/pages/products/edit-product/edit-product.component.html","webpack:///src/app/pages/products/products-routing.module.ts","webpack:///src/app/pages/products/products.component.html","webpack:///src/app/pages/products/products.component.ts","webpack:///src/app/pages/products/products.module.ts","webpack:///src/app/pages/products/products.service.ts"],"names":["Product","form","patchValue","AddProductComponent","fb","productsService","productAttributeService","categoriesService","toastr","spinner","router","group","photos","array","name","required","description","category","_id","en","ar","properties","price","qty","productAttributes","profitType","profitValue","profitPercentage","discountType","discountValue","discountPercentage","subCategories","selectedCategory","selectedCategoryAttributes","attributesDropDown","values","getbaseCategoriesList","show","getBaseCategories","baseCategories","subscribe","data","baseCategoryDropDown","map","x","nameEn","nameAr","hide","event","resetProductAttributes","getOne","res","info","categories","length","getproductAttributesList","error","console","log","message","fieldIndex","key","splice","attributes","get","i","property","setArrayInGroup","removeAt","valid","push","ind","controls","value","valueIndex","propInd","attIndex","index","att","Object","keys","reset","count","prop","hasOwnProperty","formData","FormData","append","JSON","stringify","addOne","navigate","selectBaseCategory","onSubmit","selector","templateUrl","styleUrls","EditProductComponent","route","originalPhotos","initialSelectedProductAttribute","productId","snapshot","paramMap","id","getCategory","propIndex","propertyControl","categoryId","getInitialAttributes","formValue","updateOne","routes","path","component","ProductsRoutingModule","forChild","imports","exports","modalRef","ProductsComponent","storesService","modalService","items","itemCount","limit","limits","offset","tableElements","getAll","products","itemResource","reloadItems","query","FilterRecord","filter","item","toLowerCase","includes","creator","store","stores","selectStoresList","selectedStoreId","addProductToStore","itemId","template","deleteOne","activateOne","deactivateOne","soldOne","availableOne","FilterRecords","ProductsModule","forRoot","declarations","schemas","ProductsService","http","next","post","put","storeId","providedIn"],"mappings":"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","file":"pages-products-products-module-es5.js","sourcesContent":["class Product {\n  name: string;\n  image: string;\n  price: number;\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators, FormArray } from '@angular/forms';\nimport { Router } from '@angular/router';\n\nimport { ToastrService } from 'ngx-toastr';\nimport { NgxSpinnerService } from 'ngx-spinner';\n\nimport { InputSelectItem } from 'src/app/models/InputSelectItem';\n\nimport { ProductsService } from '../products.service';\nimport { ProductAttributesService } from '../../product-attributes/product-attributes.service';\nimport { CategoriesService } from '../../categories/categories.service';\n\n@Component({\n  selector: 'app-add-product',\n  templateUrl: './add-product.component.html',\n  styleUrls: ['./add-product.component.scss'],\n})\nexport class AddProductComponent implements OnInit {\n  photos;\n  constructor(\n    private fb: FormBuilder,\n    private productsService: ProductsService,\n    private productAttributeService: ProductAttributesService,\n    private categoriesService: CategoriesService,\n    private toastr: ToastrService,\n    private spinner: NgxSpinnerService,\n    private router: Router\n  ) {}\n\n  form = this.fb.group({\n    photos: this.fb.array([]),\n    name: ['', Validators.required],\n    description: ['', Validators.required],\n    category: this.fb.group({\n      _id: [],\n      name: this.fb.group({\n        en: [],\n        ar: [],\n      }),\n    }),\n\n    properties: this.fb.array([\n      this.fb.group({\n        price: ['', Validators.required],\n        qty: ['', Validators.required],\n        productAttributes: this.fb.array([]),\n      }),\n    ]),\n\n    profitType: [''],\n    profitValue: [0],\n    profitPercentage: [0],\n    discountType: [''],\n    discountValue: [0],\n    discountPercentage: [0],\n  });\n\n  ngOnInit(): void {\n    this.getbaseCategoriesList();\n  }\n\n  // Start select dropdown\n  baseCategoryDropDown: InputSelectItem[];\n  subCategories = [];\n  selectedCategory = {};\n  selectedCategoryAttributes = [];\n  getbaseCategoriesList() {\n    this.spinner.show();\n    this.categoriesService.getBaseCategories();\n\n    this.categoriesService.baseCategories.subscribe((data) => {\n      if (data) {\n        this.baseCategoryDropDown = data.map((x) => {\n          return {\n            _id: x['_id'],\n            nameEn: `${x['name']['en']}`,\n            nameAr: `${x['name']['ar']}`,\n          };\n        });\n      }\n    });\n    this.spinner.hide();\n  }\n  selectBaseCategory(event) {\n    this.selectedCategory = {};\n    this.subCategories = [];\n    this.resetProductAttributes();\n\n    if (event) {\n      this.selectedCategory = {};\n      this.selectedCategory[0] = event;\n\n      return this.categoriesService.getOne(event._id).subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n\n          if (res['data'].categories) {\n            if (res['data'].categories.length > 0) {\n              this.subCategories[0] = res['data'].categories.map((x) => {\n                return {\n                  _id: x['_id'],\n                  nameEn: `${x['name']['en']}`,\n                  nameAr: `${x['name']['ar']}`,\n                };\n              });\n            }\n          }\n\n          if (res['data'].productAttributes) {\n            this.selectedCategoryAttributes = res['data'].productAttributes;\n            this.getproductAttributesList(res['data'].productAttributes);\n          }\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n    } else {\n      this.selectedCategory = {};\n      this.subCategories = [];\n      this.resetProductAttributes();\n    }\n  }\n  // End select dropdown\n\n  selectSubCategory(fieldIndex, event) {\n    this.spinner.show();\n\n    this.resetProductAttributes();\n    // delete all next selected categories to index\n    for (const key in this.selectedCategory) {\n      if (key > fieldIndex + 1) {\n        delete this.selectedCategory[key];\n      }\n    }\n\n    // delete all next subcategories\n    this.subCategories.splice(fieldIndex + 1);\n\n    if (event) {\n      // selected category of index = event\n      this.selectedCategory[fieldIndex + 1] = event;\n\n      this.categoriesService.getOne(event._id).subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n          if (res['data'].categories) {\n            if (res['data'].categories.length > 0) {\n              this.subCategories[fieldIndex + 1] = res['data'].categories.map(\n                (x) => {\n                  return {\n                    _id: x['_id'],\n                    nameEn: `${x['name']['en']}`,\n                    nameAr: `${x['name']['ar']}`,\n                  };\n                }\n              );\n            }\n          }\n          if (res['data'].productAttributes) {\n            this.selectedCategoryAttributes = res['data'].productAttributes;\n            this.getproductAttributesList(res['data'].productAttributes);\n          }\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n    } else {\n      // selected category of index = event\n      delete this.selectedCategory[fieldIndex + 1];\n    }\n\n    this.spinner.hide();\n  }\n  // End select dropdown\n\n  // Start select dropdown\n  // dropdown lists for product attributes\n  attributesDropDown: [{ values: InputSelectItem[] }] = [{ values: [] }];\n\n  getproductAttributesList(attributes) {\n    const properties = this.form.get('properties') as FormArray;\n    for (let i = 0; i < properties['controls'].length; i++) {\n      const property = properties['controls'][i];\n      this.setArrayInGroup(property, attributes);\n    }\n  }\n\n  resetProductAttributes() {\n    this.attributesDropDown = [{ values: [] }];\n    for (let i = 0; i < this.form.get('properties')['controls'].length; i++) {\n      let productAttributes = this.form\n        .get('properties')\n        ['controls'][i].get('productAttributes') as FormArray;\n      while (productAttributes.length !== 0) {\n        productAttributes.removeAt(0);\n      }\n    }\n  }\n\n  addProperty() {\n    const properties = this.form.get('properties') as FormArray;\n    if (\n      properties['controls'][properties.length - 1].valid &&\n      this.selectedCategoryAttributes.length > 0\n    ) {\n      properties.push(\n        this.fb.group({\n          price: ['', Validators.required],\n          qty: ['', Validators.required],\n          productAttributes: this.fb.array([]),\n        })\n      );\n\n      this.setArrayInGroup(\n        properties['controls'][properties.length - 1],\n        this.selectedCategoryAttributes\n      );\n    }\n  }\n\n  removeProperty(ind) {\n    const properties = this.form.get('properties') as FormArray;\n    if (properties.controls.length > 1) {\n      properties.removeAt(ind);\n    }\n  }\n\n  setArrayInGroup(group, attributes) {\n    let productAttributes = group.get('productAttributes') as FormArray;\n    for (let i = 0; i < attributes.length; i++) {\n      this.attributesDropDown[i] = { values: [] };\n\n      // add product attributes to form\n      productAttributes.controls[i] = this.fb.group({\n        name: this.fb.group({\n          en: ['', Validators.required],\n          ar: [''],\n        }),\n        value: this.fb.group({\n          _id: ['', Validators.required],\n          en: ['', Validators.required],\n          ar: [''],\n        }),\n      });\n\n      productAttributes.controls[i]\n        .get('name')\n        .get('en')\n        .patchValue(attributes[i]['name']['en']);\n      productAttributes.controls[i]\n        .get('name')\n        .get('ar')\n        .patchValue(attributes[i]['name']['ar']);\n\n      // list of product attributes values to dropdown fields\n      for (\n        let valueIndex = 0;\n        valueIndex < attributes[i].values.length;\n        valueIndex++\n      ) {\n        this.attributesDropDown[i].values.push({\n          _id: attributes[i].values[valueIndex]['_id'],\n          nameEn: attributes[i].values[valueIndex]['en'],\n          nameAr: attributes[i].values[valueIndex]['ar'],\n        });\n      }\n    }\n  }\n\n  properties = [];\n  selectProductAttribute(event, propInd, attIndex) {\n    if (!this.properties[propInd]) {\n      this.properties[propInd] = [];\n    }\n    if (!this.properties[propInd][attIndex]) {\n      this.properties[propInd][attIndex] = [];\n    }\n    this.properties[propInd][attIndex] = event;\n  }\n  // End select dropdown\n\n  onSubmit() {\n    this.spinner.show();\n    // // // Start product attributes\n    // // // adding values to product attributes form array controls\n    for (\n      let index = 0;\n      index < this.form.get('properties')['controls'].length;\n      index++\n    ) {\n      const property = this.form.get('properties')['controls'][index];\n      let attributes = property.get('productAttributes') as FormArray;\n      for (let i = 0; i < attributes['controls'].length; i++) {\n        const att = attributes['controls'][i];\n        att.get('value').get('_id').patchValue(this.properties[index][i]._id);\n        att.get('value').get('en').patchValue(this.properties[index][i].nameEn);\n        att.get('value').get('ar').patchValue(this.properties[index][i].nameAr);\n      }\n      attributes.patchValue(attributes.controls);\n    }\n    // adding values to product attributes form array controls\n    // End product attributes\n\n    /////////////////////////\n    // Start category\n    if (Object.keys(this.selectedCategory).length === 0) {\n      this.form.get('category').reset();\n    } else {\n      var count = 0;\n      for (var prop in this.selectedCategory) {\n        if (this.selectedCategory.hasOwnProperty(prop)) ++count;\n      }\n      if (this.selectedCategory[count - 1]) {\n        this.form\n          .get('category')\n          .get('_id')\n          .patchValue(this.selectedCategory[count - 1]._id);\n\n        this.form\n          .get('category')\n          .get('name')\n          .get('en')\n          .patchValue(this.selectedCategory[count - 1].nameEn);\n\n        this.form\n          .get('category')\n          .get('name')\n          .get('ar')\n          .patchValue(this.selectedCategory[count - 1].nameAr);\n      }\n    }\n    // End category\n    /////////////////////////\n\n    console.log(this.form.value);\n    const formData = new FormData();\n\n    for (const key in this.form.value) {\n      if (key === 'photos') {\n        for (let i = 0; i < this.form.value[key].length; i++) {\n          formData.append(key, this.form.value[key][i]);\n        }\n      } else {\n        // contains object\n        formData.append(key, JSON.stringify(this.form.value[key]));\n      }\n    }\n\n    this.productsService.addOne(formData).subscribe(\n      (res) => {\n        console.log(res);\n        this.photos = [];\n        this.form.reset();\n        this.toastr.info(res['message'], 'Info');\n        this.router.navigate(['/products']);\n        this.spinner.hide();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n        this.spinner.hide();\n      }\n    );\n    this.spinner.hide();\n  }\n}\n","<ngx-spinner></ngx-spinner>\n<div class=\"grid-center-noGutter\">\n    <div class=\"col-20_sm-22_xs-23 grid-center-noGutter content\">\n        <div class=\"title col-24 grid-center\">Add Product</div>\n        <div class=\"form col-23\">\n            <div class=\"grid-middle-noGutter\">\n                <div class=\"form-group grid-center-middle-noGutter col-24\">\n                    <div class=\"col-24 grid-center\">\n                        <app-upload-multi-photos [photos]=\"photos\" [control]=\"form.get('photos')\">\n                        </app-upload-multi-photos>\n                    </div>\n                </div>\n\n                <app-input-text class=\"col-11_sm-24\" [label]=\"'Name'\" [fieldId]=\"'name'\" [required]=\"true\" type=\"text\" [placeholder]=\"'Product Name'\" [tooltipMsg]=\"'Name'\" [control]=\"form.get('name')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                </app-input-text>\n                <app-textarea class=\"col-11_sm-24 grid-right\" [label]=\"'Description'\" [fieldId]=\"'description'\" type=\"text\" [placeholder]=\"'Product description'\" [tooltipMsg]=\"'Product description'\" [control]=\"form.get('description')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                </app-textarea>\n\n                <!-- Start profit and discount section -->\n                <div class=\"col-24 grid-noGutter\">\n                    <div class=\"col-11_sm-24 grid-noGutter\">\n                        <div class=\"col-24 grid-noGutter\">\n                            <app-input-radio class=\"col-24\" [label]=\"'Profit type'\" [fieldId]=\"'profileType'\" [items]=\"['percent', 'value']\" [control]=\"form.get('profitType')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"></app-input-radio>\n\n                            <ng-container *ngIf=\"form.get('profitType').value === 'value'\">\n                                <app-input-text class=\"col-24\" (change)=\"form.get('profitPercentage').patchValue(0)\" [label]=\"'Profit value'\" [fieldId]=\"'profitValue'\" type=\"number\" [placeholder]=\"'Profit from this category'\" [control]=\"form.get('profitValue')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                                </app-input-text>\n                            </ng-container>\n\n                            <ng-container *ngIf=\"form.get('profitType').value === 'percent'\">\n                                <app-input-text class=\"col-24\" (change)=\"form.get('profitValue').patchValue(0)\" [label]=\"'Profit percent'\" [fieldId]=\"'profitPercentage'\" type=\"number\" [placeholder]=\"'Profit from this category'\" [control]=\"form.get('profitPercentage')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                                </app-input-text>\n                            </ng-container>\n                        </div>\n                    </div>\n\n                    <div class=\"col-11_sm-24 grid-right\">\n                        <div class=\"col-24 grid\">\n                            <app-input-radio class=\"col-24\" [label]=\"'Discount type'\" [fieldId]=\"'discountType'\" [items]=\"['percent', 'value']\" [control]=\"form.get('discountType')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"></app-input-radio>\n\n                            <ng-container *ngIf=\"form.get('discountType').value === 'value'\">\n                                <app-input-text class=\"col-24 grid-right\" (change)=\"form.get('discountPercentage').patchValue(0)\" [label]=\"'Discount value'\" [fieldId]=\"'discountValue'\" type=\"number\" [placeholder]=\"'Discount on this category'\" [control]=\"form.get('discountValue')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                                </app-input-text>\n                            </ng-container>\n\n                            <ng-container *ngIf=\"form.get('discountType').value === 'percent'\">\n                                <app-input-text class=\"col-24 grid-right\" (change)=\"form.get('discountValue').patchValue(0)\" [label]=\"'Discount percent'\" [fieldId]=\"'discountPercentage'\" type=\"number\" [placeholder]=\"'Discount on this category'\" [control]=\"form.get('discountPercentage')\"\n                                    [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                                </app-input-text>\n                            </ng-container>\n                        </div>\n                    </div>\n                </div>\n                <!-- End profit and discount section -->\n\n                <div class=\"col-24 grid-noGutter\">\n                    <app-select class=\"col-11_sm-24\" [label]=\"'Category'\" [fieldId]=\"'category'\" [ItemsList]=\"baseCategoryDropDown\" [placeholder]=\"'Choose parent category'\" [fieldClass]=\"'col-18_md-24'\" [required]=\"true\" (itemselected)=\"selectBaseCategory($event)\">\n                    </app-select>\n                </div>\n                <ng-container *ngFor=\"let category of subCategories; index as i\">\n                    <div class=\"col-24 grid-noGutter\">\n                        <app-select class=\"col-11_sm-24\" [label]=\"'sub category'\" [fieldId]=\"'subCategory' + (i + 1).toString()\" [ItemsList]=\"subCategories[i]\" [placeholder]=\"'Choose parent category'\" [fieldClass]=\"'col-18_md-24'\" [required]=\"true\" (itemselected)=\"selectSubCategory(i, $event)\">\n                        </app-select>\n                    </div>\n                </ng-container>\n\n                <div class=\"col-24\" style=\"margin-bottom: 15px\"><b> Properties</b></div>\n                <ng-container *ngFor=\"\n            let property of form.get('properties')['controls'];\n            index as propInd\n          \">\n                    <ng-container *ngIf=\"propInd > 0\">\n                        <div class=\"col-24\" style=\"height: 2px; background-color: #e9e9e9; margin: 10px\"></div>\n                        <div class=\"col-24 actions\">\n                            <div class=\"grid-right\">\n                                <i class=\"material-icons\" tooltip=\"Remove property\" (click)=\"removeProperty(propInd)\" style=\"cursor: pointer\">clear</i\n                >\n              </div>\n            </div>\n          </ng-container>\n          <app-input-text\n            class=\"col-11_sm-24\"\n            [label]=\"'Price'\"\n            [fieldId]=\"'price'\"\n            [required]=\"true\"\n            type=\"number\"\n            [placeholder]=\"'Product Cost'\"\n            [control]=\"property.get('price')\"\n            [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n          >\n          </app-input-text>\n          <app-input-text\n            class=\"col-11_sm-24 grid-right\"\n            [label]=\"'Qty'\"\n            [fieldId]=\"'qty'\"\n            [required]=\"true\"\n            type=\"number\"\n            [placeholder]=\"'Product quantity'\"\n            [control]=\"property.get('qty')\"\n            [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n          >\n          </app-input-text>\n          <ng-container\n            *ngIf=\"property.get('productAttributes')['controls'].length > 0\"\n          >\n            <ng-container\n              *ngFor=\"\n                let att of property.get('productAttributes')['controls'];\n                index as attIndex\n              \"\n            >\n              <app-select\n                class=\"col-11_sm-24\"\n                [ngClass]=\"{\n                  'grid-right': attIndex % 2 != 0\n                }\"\n                [label]=\"\n                  att.get('name').get('en').value +\n                  '(' +\n                  att.get('name').get('ar').value +\n                  ')'\n                \"\n                [fieldId]=\"att.get('name').get('en').value\"\n                [ItemsList]=\"attributesDropDown[attIndex].values\"\n                [fieldClass]=\"'col-18_md-24'\"\n                [required]=\"true\"\n                (itemselected)=\"\n                  selectProductAttribute($event, propInd, attIndex)\n                \"\n              >\n              </app-select>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n      </div>\n\n      <ng-container\n        *ngIf=\"\n          form.get('properties')['controls'][\n            form.get('properties')['controls'].length - 1\n          ].valid && selectedCategoryAttributes.length != 0\n        \"\n      >\n        <button\n          type=\"submit\"\n          (click)=\"addProperty()\"\n          class=\"btn color1\"\n          [disabled]=\"\n            !form.get('properties')['controls'][\n              form.get('properties')['controls'].length - 1\n            ].valid || selectedCategoryAttributes.length == 0\n          \"\n        >\n          Add property\n        </button></ng-container\n      >\n\n      <div class=\"grid-right\">\n        <button\n          type=\"submit\"\n          (click)=\"onSubmit()\"\n          class=\"btn col-3_sm-5_xs-6 color1 round\"\n          [disabled]=\"!form.valid\"\n        >\n          Submit\n        </button>\n        <button\n          type=\"button\"\n          [routerLink]=\"['/products']\"\n          class=\"btn col-3_sm-5_xs-6 color2 round\"\n        >\n          Cancel\n        </button>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, OnInit, AfterViewInit } from '@angular/core';\nimport { FormBuilder, Validators, FormArray } from '@angular/forms';\nimport { ProductsService } from '../products.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { CategoriesService } from '../../categories/categories.service';\nimport { InputSelectItem } from 'src/app/models/InputSelectItem';\n\n@Component({\n  selector: 'app-edit-product',\n  templateUrl: './edit-product.component.html',\n  styleUrls: ['./edit-product.component.scss'],\n})\nexport class EditProductComponent implements OnInit, AfterViewInit {\n  originalPhotos = [];\n  productId;\n  constructor(\n    private fb: FormBuilder,\n    private route: ActivatedRoute,\n    private productsService: ProductsService,\n    private categoriesService: CategoriesService,\n    private toastr: ToastrService,\n    private spinner: NgxSpinnerService,\n    private router: Router\n  ) {}\n\n  form = this.fb.group({\n    originalPhotos: this.fb.array([]),\n    photos: this.fb.array([]),\n    name: ['', Validators.required],\n    description: ['', Validators.required],\n\n    category: this.fb.group({\n      _id: [],\n      name: this.fb.group({\n        en: [],\n        ar: [],\n      }),\n    }),\n\n    properties: this.fb.array([]),\n\n    profitType: [''],\n    profitValue: [0],\n    profitPercentage: [0],\n    discountType: [''],\n    discountValue: [0],\n    discountPercentage: [0],\n  });\n\n  ngOnInit(): void {\n    this.productId = this.route.snapshot.paramMap.get('id');\n  }\n  ngAfterViewInit() {\n    this.getOne(this.productId);\n  }\n\n  getOne(id) {\n    this.spinner.show();\n\n    this.productsService.getOne(id).subscribe(\n      (res) => {\n        console.log(res);\n        this.getCategory(res['data']['category']._id);\n\n        this.toastr.info(res['message'], 'Info');\n\n        for (let index = 0; index < res['data']['photos'].length; index++) {\n          if (!this.originalPhotos[index]) {\n            this.originalPhotos[index] = res['data']['photos'][index];\n          }\n          this.form\n            .get('originalPhotos')\n            ['controls'].push(res['data']['photos'][index]);\n        }\n\n        // this.form.get('name').patchValue(res['data']['name']);\n        // this.form.get('description').patchValue(res['data']['description']);\n\n        this.form.patchValue(res['data']);\n\n        for (\n          let propIndex = 0;\n          propIndex < res['data']['properties'].length;\n          propIndex++\n        ) {\n          let propertyControl = this.form.get('properties') as FormArray;\n          propertyControl.push(\n            this.fb.group({\n              price: ['', Validators.required],\n              qty: ['', Validators.required],\n              productAttributes: this.fb.array([]),\n            })\n          );\n\n          if (!this.properties[propIndex]) {\n            this.properties[propIndex] = [];\n          }\n          for (\n            let attIndex = 0;\n            attIndex <\n            res['data']['properties'][propIndex]['productAttributes'].length;\n            attIndex++\n          ) {\n            if (!this.properties[propIndex][attIndex]) {\n              this.properties[propIndex][attIndex] = [];\n            }\n            this.properties[propIndex][attIndex] =\n              res['data']['properties'][propIndex]['productAttributes'][\n                attIndex\n              ];\n          }\n        }\n        this.form.get('properties').patchValue(res['data']['properties']);\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  attributesDropDown: [{ values: InputSelectItem[] }] = [{ values: [] }];\n  selectedCategoryAttributes = [];\n  addProperty() {\n    const properties = this.form.get('properties') as FormArray;\n    if (properties['controls'][properties.length - 1].valid) {\n      properties.push(\n        this.fb.group({\n          price: ['', Validators.required],\n          qty: ['', Validators.required],\n          productAttributes: this.fb.array([]),\n        })\n      );\n      this.setArrayInGroup(\n        properties['controls'][properties.length - 1],\n        this.selectedCategoryAttributes\n      );\n    }\n  }\n\n  removeProperty(ind) {\n    const properties = this.form.get('properties') as FormArray;\n    if (properties.controls.length > 1) {\n      properties.removeAt(ind);\n    }\n  }\n\n  getCategory(categoryId) {\n    this.spinner.show();\n\n    return this.categoriesService.getOne(categoryId).subscribe(\n      (res) => {\n        this.toastr.info(res['message'], 'Info');\n\n        if (res['data'].productAttributes) {\n          this.selectedCategoryAttributes = res['data'].productAttributes;\n          this.getproductAttributesList(res['data'].productAttributes);\n        }\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  getproductAttributesList(attributes) {\n    const propertyControl = this.form.get('properties') as FormArray;\n    for (let i = 0; i < propertyControl['controls'].length; i++) {\n      const property = propertyControl['controls'][i];\n      this.setArrayInGroup(property, attributes);\n    }\n    this.getInitialAttributes();\n  }\n\n  initialSelectedProductAttribute: InputSelectItem[][] = [[]];\n\n  setArrayInGroup(group, attributes) {\n    let productAttributes = group.get('productAttributes') as FormArray;\n    for (let i = 0; i < attributes.length; i++) {\n      this.attributesDropDown[i] = { values: [] };\n\n      // add product attributes to form\n      productAttributes.controls[i] = this.fb.group({\n        name: this.fb.group({\n          en: ['', Validators.required],\n          ar: [''],\n        }),\n        value: this.fb.group({\n          _id: ['', Validators.required],\n          en: ['', Validators.required],\n          ar: [''],\n        }),\n      });\n\n      productAttributes.controls[i]\n        .get('name')\n        .get('en')\n        .patchValue(attributes[i]['name']['en']);\n      productAttributes.controls[i]\n        .get('name')\n        .get('ar')\n        .patchValue(attributes[i]['name']['ar']);\n\n      // list of product attributes values to dropdown fields\n      for (\n        let valueIndex = 0;\n        valueIndex < attributes[i].values.length;\n        valueIndex++\n      ) {\n        this.attributesDropDown[i].values.push({\n          _id: attributes[i].values[valueIndex]['_id'],\n          nameEn: attributes[i].values[valueIndex]['en'],\n          nameAr: attributes[i].values[valueIndex]['ar'],\n        });\n      }\n    }\n  }\n\n  getInitialAttributes() {\n    let propertyControl = this.form.get('properties') as FormArray;\n    for (\n      let propIndex = 0;\n      propIndex < propertyControl['controls'].length;\n      propIndex++\n    ) {\n      let attributes = propertyControl['controls'][propIndex].get(\n        'productAttributes'\n      ) as FormArray;\n\n      for (\n        let attIndex = 0;\n        attIndex < attributes['controls'].length;\n        attIndex++\n      ) {\n        const att = attributes['controls'][attIndex];\n        if (this.properties[propIndex][attIndex]) {\n          att\n            .get('value')\n            .get('_id')\n            .patchValue(this.properties[propIndex][attIndex].value._id);\n          att\n            .get('value')\n            .get('en')\n            .patchValue(this.properties[propIndex][attIndex].value.en);\n          att\n            .get('value')\n            .get('ar')\n            .patchValue(this.properties[propIndex][attIndex].value.ar);\n          if (!this.initialSelectedProductAttribute[propIndex]) {\n            this.initialSelectedProductAttribute[propIndex] = [];\n          }\n\n          this.initialSelectedProductAttribute[propIndex][attIndex] = {\n            _id: this.properties[propIndex][attIndex].value._id,\n            nameEn: this.properties[propIndex][attIndex].value.en,\n            nameAr: this.properties[propIndex][attIndex].value.ar,\n          };\n        }\n      }\n      attributes.patchValue(attributes.controls);\n    }\n  }\n\n  properties = [];\n  selectProductAttribute(event, propInd, attIndex) {\n    if (!this.properties[propInd]) {\n      this.properties[propInd] = [];\n    }\n    if (!this.properties[propInd][attIndex]) {\n      this.properties[propInd][attIndex] = [];\n    }\n    this.properties[propInd][attIndex] = event;\n  }\n\n  onSubmit(formValue) {\n    this.spinner.show();\n\n    // // // Start product attributes\n    // // // adding values to product attributes form array controls\n    for (\n      let index = 0;\n      index < this.form.get('properties')['controls'].length;\n      index++\n    ) {\n      const property = this.form.get('properties')['controls'][index];\n      let attributes = property.get('productAttributes') as FormArray;\n      for (let i = 0; i < attributes['controls'].length; i++) {\n        const att = attributes['controls'][i];\n        att.get('value').get('_id').patchValue(this.properties[index][i]._id);\n        att.get('value').get('en').patchValue(this.properties[index][i].nameEn);\n        att.get('value').get('ar').patchValue(this.properties[index][i].nameAr);\n      }\n      attributes.patchValue(attributes.controls);\n    }\n    // adding values to product attributes form array controls\n    // End product attributes\n\n    const formData = new FormData();\n\n    for (const key in formValue) {\n      if (key === 'photos') {\n        for (let i = 0; i < this.form.value[key].length; i++) {\n          formData.append(key, this.form.value[key][i]);\n        }\n      } else {\n        // contains object\n        formData.append(key, JSON.stringify(formValue[key]));\n      }\n    }\n\n    this.productsService.updateOne(formData, this.productId).subscribe(\n      (res) => {\n        console.log(res);\n        this.originalPhotos = [];\n        // this.form.reset();\n        this.toastr.info(res['message'], 'Info');\n        this.router.navigate(['/products']);\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n}\n","<div class=\"grid-center-noGutter\">\n    <div class=\"col-20_sm-22_xs-23 grid-center-noGutter content\">\n        <div class=\"title col-24 grid-center\">Edit Product</div>\n        <div class=\"form col-23\">\n            <div class=\"grid-middle-noGutter\">\n                <div class=\"form-group grid-center-middle-noGutter col-24\">\n                    <div class=\"col-24 grid-center\">\n                        <app-upload-multi-photos [initialPhotos]=\"originalPhotos\" [control]=\"form.get('photos')\">\n                        </app-upload-multi-photos>\n                    </div>\n                </div>\n\n                <app-input-text class=\"col-11_sm-24\" [label]=\"'Name'\" [fieldId]=\"'name'\" [required]=\"true\" type=\"text\" [placeholder]=\"'Product Name'\" [tooltipMsg]=\"'Name'\" [control]=\"form.get('name')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                </app-input-text>\n\n                <app-textarea class=\"col-11_sm-24 grid-right\" [label]=\"'Description'\" [fieldId]=\"'description'\" type=\"text\" [placeholder]=\"'Product description'\" [tooltipMsg]=\"'Product description'\" [control]=\"form.get('description')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                </app-textarea>\n\n                <!-- Start profit and discount section -->\n                <div class=\"col-24 grid-noGutter\">\n                    <div class=\"col-11_sm-24 grid-noGutter\">\n                        <div class=\"col-24 grid-noGutter\">\n                            <app-input-radio class=\"col-24\" [label]=\"'Profit type'\" [fieldId]=\"'profileType'\" [items]=\"['percent', 'value']\" [control]=\"form.get('profitType')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"></app-input-radio>\n\n                            <ng-container *ngIf=\"form.get('profitType').value === 'value'\">\n                                <app-input-text class=\"col-24\" (change)=\"form.get('profitPercentage').patchValue(0)\" [label]=\"'Profit value'\" [fieldId]=\"'profitValue'\" type=\"number\" [placeholder]=\"'Profit from this category'\" [control]=\"form.get('profitValue')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                                </app-input-text>\n                            </ng-container>\n\n                            <ng-container *ngIf=\"form.get('profitType').value === 'percent'\">\n                                <app-input-text class=\"col-24\" (change)=\"form.get('profitValue').patchValue(0)\" [label]=\"'Profit percent'\" [fieldId]=\"'profitPercentage'\" type=\"number\" [placeholder]=\"'Profit from this category'\" [control]=\"form.get('profitPercentage')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                                </app-input-text>\n                            </ng-container>\n                        </div>\n                    </div>\n\n                    <div class=\"col-11_sm-24 grid-right\">\n                        <div class=\"col-24 grid-noGutter\">\n                            <app-input-radio class=\"col-24\" [label]=\"'Discount type'\" [fieldId]=\"'discountType'\" [items]=\"['percent', 'value']\" [control]=\"form.get('discountType')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"></app-input-radio>\n\n                            <ng-container *ngIf=\"form.get('discountType').value === 'value'\">\n                                <app-input-text class=\"col-24 grid-right\" (change)=\"form.get('discountPercentage').patchValue(0)\" [label]=\"'Discount value'\" [fieldId]=\"'discountValue'\" type=\"number\" [placeholder]=\"'Discount on this category'\" [control]=\"form.get('discountValue')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                                </app-input-text>\n                            </ng-container>\n\n                            <ng-container *ngIf=\"form.get('discountType').value === 'percent'\">\n                                <app-input-text class=\"col-24 grid-right\" (change)=\"form.get('discountValue').patchValue(0)\" [label]=\"'Discount percent'\" [fieldId]=\"'discountPercentage'\" type=\"number\" [placeholder]=\"'Discount on this category'\" [control]=\"form.get('discountPercentage')\"\n                                    [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                                </app-input-text>\n                            </ng-container>\n                        </div>\n                    </div>\n                </div>\n                <!-- End profit and discount section -->\n\n                <div class=\"col-24\" style=\"margin-bottom: 15px\"><b> Properties</b></div>\n                <ng-container *ngFor=\"\n            let property of form.get('properties')['controls'];\n            index as propInd\n          \">\n                    <ng-container *ngIf=\"propInd > 0\">\n                        <div class=\"col-24\" style=\"height: 2px; background-color: #e9e9e9; margin: 10px\"></div>\n                        <div class=\"col-24 actions\">\n                            <div class=\"grid-right\">\n                                <i class=\"material-icons\" tooltip=\"Remove property\" (click)=\"removeProperty(propInd)\" style=\"cursor: pointer\">clear</i\n                >\n              </div>\n            </div>\n          </ng-container>\n          <app-input-text\n            class=\"col-11_sm-24\"\n            [label]=\"'Price'\"\n            [fieldId]=\"'price'\"\n            [required]=\"true\"\n            type=\"number\"\n            [placeholder]=\"'Product Cost'\"\n            [control]=\"property.get('price')\"\n            [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n          >\n          </app-input-text>\n          <app-input-text\n            class=\"col-11_sm-24 grid-right\"\n            [label]=\"'Qty'\"\n            [fieldId]=\"'qty'\"\n            [required]=\"true\"\n            type=\"number\"\n            [placeholder]=\"'Product quantity'\"\n            [control]=\"property.get('qty')\"\n            [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n          >\n          </app-input-text>\n          <ng-container\n            *ngIf=\"property.get('productAttributes')['controls'].length > 0\"\n          >\n            <ng-container\n              *ngFor=\"\n                let att of property.get('productAttributes')['controls'];\n                index as attIndex\n              \"\n            >\n              <app-select\n                class=\"col-11_sm-24\"\n                [ngClass]=\"{\n                  'grid-right': attIndex % 2 != 0\n                }\"\n                [label]=\"\n                  att.get('name').get('en').value +\n                  '(' +\n                  att.get('name').get('ar').value +\n                  ')'\n                \"\n                [fieldId]=\"att.get('name').get('en').value\"\n                [ItemsList]=\"attributesDropDown[attIndex].values\"\n                [fieldClass]=\"'col-18_md-24'\"\n                [required]=\"true\"\n                (itemselected)=\"\n                  selectProductAttribute($event, propInd, attIndex)\n                \"\n                [initialSelectedItem]=\"\n                  initialSelectedProductAttribute[propInd][attIndex]\n                \"\n              >\n              </app-select>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n\n        <!-- <app-input-text\n          class=\"col-11_sm-24\"\n          [label]=\"'Price'\"\n          [fieldId]=\"'price'\"\n          [required]=\"true\"\n          type=\"number\"\n          [placeholder]=\"'Product Cost'\"\n          [control]=\"form.get('price')\"\n          [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n        >\n        </app-input-text>\n        <app-input-text\n          class=\"col-11_sm-24 grid-right\"\n          [label]=\"'Qty'\"\n          [fieldId]=\"'qty'\"\n          [required]=\"true\"\n          type=\"number\"\n          [placeholder]=\"'Product Cost'\"\n          [control]=\"form.get('qty')\"\n          [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n        >\n        </app-input-text> -->\n        <!-- <ng-container\n          *ngIf=\"form.get('productAttributes')['controls'].length > 0\"\n        >\n          <ng-container\n            *ngFor=\"\n              let att of form.get('productAttributes')['controls'];\n              index as attIndex\n            \"\n          >\n            <app-multi-select\n              class=\"col-11_sm-24\"\n              [ngClass]=\"{\n                'grid-right': attIndex % 2 != 0\n              }\"\n              [label]=\"\n                att.get('name').get('en').value +\n                '(' +\n                att.get('name').get('ar').value +\n                ')'\n              \"\n              [fieldId]=\"att.get('name').get('en').value\"\n              [ItemsList]=\"selectProductAttributesListValues[attIndex].values\"\n              [fieldClass]=\"'col-18_md-24'\"\n              [required]=\"true\"\n              (itemselected)=\"selectProductAttribute($event, attIndex)\"\n            >\n            </app-multi-select>\n          </ng-container>\n        </ng-container> -->\n      </div>\n      <ng-container *ngIf=\"form.get('properties')['controls'].length > 0\">\n        <button\n          type=\"submit\"\n          (click)=\"addProperty()\"\n          class=\"btn color1\"\n          [disabled]=\"\n            !form.get('properties')['controls'][\n              form.get('properties')['controls'].length - 1\n            ].valid\n          \"\n        >\n          Add property\n        </button>\n      </ng-container>\n      <div class=\"grid-right\">\n        <button\n          type=\"submit\"\n          (click)=\"onSubmit(form.value)\"\n          class=\"btn col-3_sm-5_xs-6 color1 round\"\n          [disabled]=\"!form.valid\"\n        >\n          Submit\n        </button>\n        <button\n          type=\"button\"\n          [routerLink]=\"['/products']\"\n          class=\"btn col-3_sm-5_xs-6 color2 round\"\n        >\n          Cancel\n        </button>\n      </div>\n    </div>\n  </div>\n</div>","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ProductsComponent } from './products.component';\nimport { AddProductComponent } from './add-product/add-product.component';\nimport { EditProductComponent } from './edit-product/edit-product.component';\n\nconst routes: Routes = [\n  { path: '', component: ProductsComponent },\n  { path: 'add', component: AddProductComponent },\n  { path: 'edit/:id', component: EditProductComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProductsRoutingModule {}\n","<div class=\"grid-center-noGutter\">\n    <div class=\"col-20_sm-22_xs-23\" style=\"margin-top: 20px\">\n        <div class=\"card\">\n            <div class=\"card-header\">\n                <span>Products Records</span>\n            </div>\n            <div class=\"card-body grid-center-noGutter\">\n                <div class=\"col-24 grid-center-noGutter\">\n                    <div class=\"card col-5_md-8_sm-10_xs-hidden\">\n                        <div class=\"card-body\">\n                            <span style=\"\n                  display: inline-block;\n                  background-color: #4899c2;\n                  padding: 15px;\n                  color: white;\n                \">\n                <i class=\"material-icons\">home</i>\n              </span>\n                            <div style=\"display: inline-block; margin: 0 10px\">\n                                <div style=\"color: #20a8d8; font-size: 18px; font-weight: 600\">\n                                    {{ items.length }}\n                                </div>\n                                <div style=\"color: #73818f; font-size: 80%; font-weight: 700\">\n                                    Products\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-top col-18_md-16_sm-14_xs-24 grid-right-noGutter\" style=\"margin-top: 15px\">\n                        <div class=\"col-3_xlg-4_lg-6_sm-10 grid-column-noGutter\">\n                            <a [routerLink]=\"['./add']\" class=\"btn color1 round addbtn\">Add Product</a\n              >\n            </div>\n          </div>\n        </div>\n        <div class=\"col-24 grid-center-noGutter\" style=\"margin-top: 20px\">\n          <div class=\"col-24 grid-noGutter\">\n            <div\n              class=\"col-12_xs-24 grid-left-noGutter\"\n              style=\"margin-left: 10px\"\n            >\n              <label class=\"col-24\" style=\"font-weight: bold\" for=\"\"\n                >Search for</label\n              >\n              <div class=\"col-24 grid\">\n                <input\n                  type=\"text\"\n                  #FilterRecord\n                  class=\"form-control col\"\n                  placeholder=\"e.g. Name, Creator, Store\"\n                />\n                <a\n                  (click)=\"FilterRecords(FilterRecord.value)\"\n                  class=\"btn col-4 color1 round search\"\n                >\n                  <span class=\"md-hidden\">Search</span>\n                  <span><i class=\"material-icons\">search</i></span>\n                </a>\n                            <a (click)=\"FilterRecords(''); FilterRecord.value = ''\" class=\"btn col-4 color2 round search\">\n                                <span class=\"md-hidden\">Clear</span>\n                                <span><i class=\"material-icons\">clear</i></span>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"grid-center-noGutter\" style=\"margin-top: 20px\">\n        <ng-container>\n            <ng-container *ngTemplateOutlet=\"table\"></ng-container>\n        </ng-container>\n    </div>\n</div>\n</div>\n\n<ng-template #table>\n    <div>\n        <data-table id=\"my-table\" title=\"List of Products\" [items]=\"tableElements\" [itemCount]=\"itemCount\" [pageLimits]=\"limits\" [limit]=\"limit\" [pagination]=\"true\" (reload)=\"reloadItems($event)\" [noDataMessage]=\"'No data to show'\">\n            <data-table-column [width]=\"50\" [property]=\"'image'\" [resizable]=\"true\" [header]=\"'Img'\">\n                <ng-template #dataTableCell let-item=\"item\">\n                    <img [src]=\"\n              item.photos\n                ? item.photos[0]\n                : '../../../../../assets/placeholder.png'\n            \" width=\"30px\" height=\"30px\" alt=\"\" />\n                </ng-template>\n            </data-table-column>\n\n            <data-table-column [property]=\"'name'\" [header]=\"'Name'\" [sortable]=\"true\">\n            </data-table-column>\n\n            <data-table-column [property]=\"'profit'\" [header]=\"'Profit'\" [sortable]=\"true\">\n                <ng-template #dataTableCell let-item=\"item\">\n                    <span>{{\n            item.profitPercentage && item.profitPercentage !== 0\n              ? item.profitPercentage + \"%\"\n              : item.profitValue && item.profitValue !== 0\n              ? item.profitValue + \" EGP\"\n              : 0\n          }}</span>\n                </ng-template>\n            </data-table-column>\n\n            <data-table-column [property]=\"'discount'\" [header]=\"'Discount'\" [sortable]=\"true\">\n                <ng-template #dataTableCell let-item=\"item\">\n                    <span>{{\n            item.discountPercentage && item.discountPercentage !== 0\n              ? item.discountPercentage + \"%\"\n              : item.discountValue && item.discountValue !== 0\n              ? item.discountValue + \" EGP\"\n              : 0\n          }}</span>\n                </ng-template>\n            </data-table-column>\n            <data-table-column [header]=\"'Price'\">\n                <ng-template #dataTableCell let-item=\"item\">\n                    <span>{{ item.properties[0].price }}</span>\n                </ng-template>\n            </data-table-column>\n\n            <data-table-column [property]=\"'creator'\" [header]=\"'Creator'\">\n                <ng-template #dataTableCell let-item=\"item\">\n                    <span>{{ item.creator ? item.creator.name : \"-\" }}</span>\n                </ng-template>\n            </data-table-column>\n\n            <data-table-column [property]=\"'store'\" [header]=\"'Store'\">\n                <ng-template #dataTableCell let-item=\"item\">\n                    <span>{{ item.store ? item.store.name : \"-\" }}</span>\n                </ng-template>\n            </data-table-column>\n\n            <data-table-column [property]=\"'category'\" [header]=\"'Category'\" [sortable]=\"true\">\n                <ng-template #dataTableCell let-item=\"item\">\n                    <span>{{ item.category.en }}</span>\n                </ng-template>\n            </data-table-column>\n\n            <data-table-column [width]=\"68\" [header]=\"'Status'\">\n                <ng-template #dataTableCell let-item=\"item\">\n                    <div>\n                        <ng-container *ngIf=\"item.sold\"><span class=\"badge blocked\">Sold</span></ng-container>\n                        <ng-container *ngIf=\"item.active\"><span class=\"badge active\">active</span>\n                        </ng-container>\n                        <ng-container *ngIf=\"!item.active\"><span class=\"badge deleted\">inactive</span></ng-container>\n                    </div>\n                </ng-template>\n            </data-table-column>\n\n            <data-table-column [width]=\"150\" header=\"Actions\">\n                <ng-template #dataTableCell let-item=\"item\" class=\"grid-center\">\n                    <a [routerLink]=\"['./edit/', item._id]\" class=\"pencil\" [tooltip]=\"'Edit'\" placement=\"bottom\">\n                        <i class=\"material-icons\">colorize</i>\n                    </a>\n                    <a (click)=\"\n              item.store ? null : openModal(templateAddToStore, item._id);\n              getStoresList()\n            \" [ngClass]=\"item.store ? '' : 'lock'\" [tooltip]=\"item.store ? '' : 'add to store'\" placement=\"bottom\" triggers=\"mouseenter:mouseleave\">\n                        <i class=\"material-icons\">{{ item.store ? \"\" : \"store\" }}</i>\n                    </a>\n                    <a (click)=\"\n              item.active\n                ? openModal(templateDeactivate, item._id)\n                : openModal(templateActivate, item._id)\n            \" [ngClass]=\"item.active ? 'trash' : 'lock'\" [tooltip]=\"item.active ? 'deactivate' : 'Activate'\" placement=\"bottom\" triggers=\"mouseenter:mouseleave\">\n                        <i class=\"material-icons\">{{\n              item.active ? \"block\" : \"check_circle_outline\"\n            }}</i>\n                    </a>\n                    <a (click)=\"\n              item.sold\n                ? openModal(templateAvailable, item._id)\n                : openModal(templateSold, item._id)\n            \" [ngClass]=\"item.sold ? 'lock' : 'trash'\" [tooltip]=\"item.sold ? 'Available' : 'Sold'\" placement=\"bottom\" triggers=\"mouseenter:mouseleave\">\n                        <i class=\"material-icons\">{{\n              item.sold ? \"done_outline\" : \"done_all\"\n            }}</i>\n                    </a>\n                    <a (click)=\"openModal(templateDelete, item._id)\" class=\"trash\" tooltip=\"Delete\" placement=\"bottom\" triggers=\"mouseenter:mouseleave\">\n                        <i class=\"material-icons\">delete</i>\n                    </a>\n                </ng-template>\n            </data-table-column>\n        </data-table>\n    </div>\n</ng-template>\n\n<ng-template #templateAddToStore id=\"template2\">\n    <div class=\"modal-header\">\n        <h4 style=\"font-weight: bold; justify-content: center\">\n            <i class=\"fa fa-user fa-lg mt-4\"></i> Do you want to add this product to a store?\n        </h4>\n        <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    </div>\n    <div class=\"modal-body\">\n        <div class=\"col-24 grid-noGutter\">\n            <app-select class=\"col-24\" [label]=\"'Store'\" [fieldId]=\"'store'\" [ItemsList]=\"selectStoresList\" [placeholder]=\"'Choose store'\" [fieldClass]=\"'col-18_md-24'\" [required]=\"true\" (itemselected)=\"selectStore($event)\">\n            </app-select>\n        </div>\n        <div class=\"grid-right\">\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color1 round\" style=\"margin-right: 10px\" (click)=\"addProductToStore()\">\n        Confirm\n      </button>\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color2 round\" (click)=\"modalRef.hide()\">\n        Cancel\n      </button>\n        </div>\n    </div>\n</ng-template>\n\n<ng-template #templateActivate id=\"template2\">\n    <div class=\"modal-header\">\n        <h4 style=\"font-weight: bold; justify-content: center\">\n            <i class=\"fa fa-trash fa-lg mt-4\"></i> Do you want to activate This Element ?\n        </h4>\n        <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    </div>\n    <div class=\"modal-body\">\n        <div class=\"grid-right\">\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color1 round\" style=\"margin-right: 10px\" (click)=\"activateElement()\">\n        Confirm\n      </button>\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color2 round\" (click)=\"modalRef.hide()\">\n        Cancel\n      </button>\n        </div>\n    </div>\n</ng-template>\n\n<ng-template #templateDeactivate id=\"template2\">\n    <div class=\"modal-header\">\n        <h4 style=\"font-weight: bold; justify-content: center\">\n            <i class=\"fa fa-trash fa-lg mt-4\"></i> Do you want to deactivate This Element ?\n        </h4>\n        <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    </div>\n    <div class=\"modal-body\">\n        <div class=\"grid-right\">\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color1 round\" style=\"margin-right: 10px\" (click)=\"deactivateElement()\">\n        Confirm\n      </button>\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color2 round\" (click)=\"modalRef.hide()\">\n        Cancel\n      </button>\n        </div>\n    </div>\n</ng-template>\n\n<ng-template #templateDelete id=\"template2\">\n    <div class=\"modal-header\">\n        <h4 style=\"color: red; font-weight: bold; justify-content: center\">\n            <i class=\"fa fa-trash fa-lg mt-4\"></i> Do you want to Delete This Element ?\n        </h4>\n        <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    </div>\n    <div class=\"modal-body\">\n        <div class=\"grid-right\">\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color1 round\" style=\"margin-right: 10px\" (click)=\"deleteElement()\">\n        Confirm\n      </button>\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color2 round\" (click)=\"modalRef.hide()\">\n        Cancel\n      </button>\n        </div>\n    </div>\n</ng-template>\n\n<ng-template #templateAvailable id=\"template2\">\n    <div class=\"modal-header\">\n        <h4 style=\"color: #0c425d; font-weight: bold; justify-content: center\">\n            <i class=\"fa fa-lock fa-lg mt-4\"></i> Do you want to change this element status to be available?\n        </h4>\n        <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    </div>\n    <div class=\"modal-body\">\n        <div class=\"grid-right\">\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color1 round\" style=\"margin-right: 10px\" (click)=\"availableElement()\">\n        Confirm\n      </button>\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color2 round\" (click)=\"modalRef.hide()\">\n        Cancel\n      </button>\n        </div>\n    </div>\n</ng-template>\n\n<ng-template #templateSold id=\"template2\">\n    <div class=\"modal-header\">\n        <h4 style=\"color: #0c425d; font-weight: bold; justify-content: center\">\n            <i class=\"fa fa-lock fa-lg mt-4\"></i> Do you want to change this element status to be sold out?\n        </h4>\n        <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    </div>\n    <div class=\"modal-body\">\n        <div class=\"grid-right\">\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color1 round\" style=\"margin-right: 10px\" (click)=\"soldElement()\">\n        Confirm\n      </button>\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color2 round\" (click)=\"modalRef.hide()\">\n        Cancel\n      </button>\n        </div>\n    </div>\n</ng-template>","import { Component, OnInit, TemplateRef } from '@angular/core';\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\nimport { ToastrService } from 'ngx-toastr';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { DataTableResource } from 'angular7-data-table';\n\nimport { ProductsService } from './products.service';\nimport { StoresService } from '../stores/stores.service';\nimport { InputSelectItem } from 'src/app/models/InputSelectItem';\n\n@Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.scss'],\n})\nexport class ProductsComponent implements OnInit {\n  itemResource;\n  items = [];\n  itemCount = 0;\n  limit = 20;\n  limits = [20, 25, 50];\n  offset = 1;\n  tableElements = [];\n\n  modalRef: any;\n\n  constructor(\n    private productsService: ProductsService,\n    private storesService: StoresService,\n    private modalService: BsModalService,\n    private toastr: ToastrService,\n    private spinner: NgxSpinnerService\n  ) {}\n\n  ngOnInit(): void {\n    this.spinner.show();\n\n    this.productsService.getAll();\n\n    this.productsService.products.subscribe(async (data) => {\n      if (data) {\n        this.items = data;\n        this.itemResource = new DataTableResource(data);\n        this.itemCount = await this.itemResource.count();\n        this.reloadItems({\n          offset: 0,\n          limit: this.limit,\n        });\n      }\n    });\n\n    this.spinner.hide();\n  }\n\n  async reloadItems(event) {\n    if (this.itemResource) {\n      this.tableElements = await this.itemResource.query(event);\n    }\n  }\n\n  async FilterRecords(FilterRecord) {\n    this.tableElements = this.items;\n    if (FilterRecord !== '') {\n      this.tableElements = this.items.filter(\n        (item) =>\n          item.name.toLowerCase().includes(FilterRecord) ||\n          item.category.en.toLowerCase().includes(FilterRecord) ||\n          item.creator.name.toLowerCase().includes(FilterRecord) ||\n          item.store?.name.toLowerCase().includes(FilterRecord)\n      );\n    }\n\n    this.itemResource = new DataTableResource(this.tableElements);\n    this.itemCount = await this.itemResource.count();\n    this.reloadItems({\n      offset: 0,\n      limit: this.limit,\n    });\n  }\n\n  // Start select dropdown\n  selectStoresList: InputSelectItem[];\n  selectedStoreId: string;\n  getStoresList() {\n    this.spinner.show();\n\n    this.storesService.getAll();\n\n    this.storesService.stores.subscribe((data) => {\n      if (data) {\n        this.selectStoresList = data.map((x) => {\n          return {\n            _id: x['_id'],\n            nameEn: `${x['name']}`,\n            nameAr: ``,\n          };\n        });\n      }\n    });\n\n    this.spinner.hide();\n  }\n  selectStore(event) {\n    if (event) {\n      this.selectedStoreId = event._id;\n    }\n  }\n  // End select dropdown\n\n  addProductToStore() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService\n      .addProductToStore(this.itemId, this.selectedStoreId)\n      .subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n          this.items = [];\n\n          this.productsService.getAll();\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n\n    this.spinner.hide();\n  }\n\n  itemId;\n  openModal(template: TemplateRef<any>, id) {\n    this.itemId = id;\n    this.modalRef = this.modalService.show(template);\n  }\n\n  // // addDiscount(form) {\n  // //   this.spinner.show();\n\n  // //   this.modalRef.hide();\n  // //   this.productsService.addDiscount(form, this.itemId).subscribe(\n  // //     (res) => {\n  // //       console.log(res);\n  // //       this.toastr.info(res['message'], 'Info');\n  // //       this.productsService.getAll();\n  // //     },\n  // //     (error) => {\n  // //       console.log(error);\n  // //       this.toastr.error(error.error.message, 'Error');\n  // //       // this.error.next(error.error.message);\n  // //     }\n  // //   );\n\n  // //   this.spinner.hide();\n  // // }\n\n  // // deleteDiscount() {\n  // //   this.spinner.show();\n\n  // //   this.modalRef.hide();\n  // //   this.productsService.deleteDiscount(this.itemId).subscribe(\n  // //     (res) => {\n  // //       console.log(res);\n  // //       this.toastr.info(res['message'], 'Info');\n  // //       this.productsService.getAll();\n  // //     },\n  // //     (error) => {\n  // //       console.log(error);\n  // //       this.toastr.error(error.error.message, 'Error');\n  // //       // this.error.next(error.error.message);\n  // //     }\n  // //   );\n\n  // //   this.spinner.hide();\n  // // }\n\n  deleteElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.deleteOne(this.itemId).subscribe(\n      (res) => {\n        console.log(res);\n        this.toastr.info(res['message'], 'Info');\n        this.productsService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  activateElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.activateOne(this.itemId).subscribe(\n      (res) => {\n        console.log(res);\n        this.toastr.info(res['message'], 'Info');\n        this.items = [];\n\n        this.productsService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  deactivateElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.deactivateOne(this.itemId).subscribe(\n      (res) => {\n        console.log(res);\n        this.toastr.info(res['message'], 'Info');\n        this.items = [];\n\n        this.productsService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  soldElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.soldOne(this.itemId).subscribe(\n      (res) => {\n        console.log(res);\n        this.toastr.info(res['message'], 'Info');\n        this.items = [];\n\n        this.productsService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  availableElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.availableOne(this.itemId).subscribe(\n      (res) => {\n        console.log(res);\n        this.toastr.info(res['message'], 'Info');\n        this.items = [];\n\n        this.productsService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { ModalModule } from 'ngx-bootstrap/modal';\nimport { DataTableModule } from 'angular7-data-table';\n\nimport { ProductsRoutingModule } from './products-routing.module';\n\nimport { FormFieldsModule } from 'src/app/reusable-components/form-fields/form-fields.module';\n\nimport { ProductsComponent } from './products.component';\nimport { AddProductComponent } from './add-product/add-product.component';\nimport { EditProductComponent } from './edit-product/edit-product.component';\n\nimport { NgxSpinnerModule } from 'ngx-spinner';\n\n@NgModule({\n  declarations: [ProductsComponent, AddProductComponent, EditProductComponent],\n  imports: [\n    CommonModule,\n    ProductsRoutingModule,\n    FormFieldsModule,\n    DataTableModule.forRoot(),\n    TooltipModule.forRoot(),\n    ModalModule.forRoot(),\n    NgxSpinnerModule,\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\n})\nexport class ProductsModule {}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { BehaviorSubject } from 'rxjs';\nimport '../../models/product';\n\nimport { baseUrl } from '../../config/variables';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductsService {\n  constructor(private http: HttpClient) {}\n\n  products = new BehaviorSubject<[Product]>(null);\n\n  getAll() {\n    return this.http.get(baseUrl + '/product').subscribe((res) => {\n      if (res['data']) {\n        this.products.next(res['data']);\n      }\n    });\n  }\n\n  getOne(itemId) {\n    return this.http.get(baseUrl + `/product/${itemId}`);\n  }\n\n  addOne(form) {\n    return this.http.post(baseUrl + '/product', form);\n  }\n\n  updateOne(form, itemId) {\n    return this.http.put(baseUrl + `/product/${itemId}`, form);\n  }\n\n  deleteOne(itemId) {\n    return this.http.delete(baseUrl + `/product/${itemId}`);\n  }\n\n  addProductToStore(productId, storeId) {\n    return this.http.post(\n      baseUrl + `/product/addProductToStore/${productId}/${storeId}`,\n      {}\n    );\n  }\n\n  activateOne(itemId) {\n    return this.http.get(baseUrl + `/product/activate/${itemId}`);\n  }\n\n  deactivateOne(itemId) {\n    return this.http.get(baseUrl + `/product/deactivate/${itemId}`);\n  }\n\n  soldOne(itemId) {\n    return this.http.get(baseUrl + `/product/sold/${itemId}`);\n  }\n\n  availableOne(itemId) {\n    return this.http.get(baseUrl + `/product/available/${itemId}`);\n  }\n\n  addDiscount(form, itemId) {\n    return this.http.post(baseUrl + `/product/addDiscount/${itemId}`, form);\n  }\n\n  deleteDiscount(itemId) {\n    return this.http.delete(baseUrl + `/product/deleteDiscount/${itemId}`);\n  }\n}\n"]}