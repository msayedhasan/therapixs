{"version":3,"sources":["webpack:///src/app/pages/products/add-product/add-product.component.ts","webpack:///src/app/pages/products/add-product/add-product.component.html","webpack:///src/app/pages/products/edit-product/edit-product.component.ts","webpack:///src/app/pages/products/edit-product/edit-product.component.html","webpack:///src/app/pages/products/products-routing.module.ts","webpack:///src/app/pages/products/products.component.html","webpack:///src/app/pages/products/products.component.ts","webpack:///src/app/pages/products/products.module.ts"],"names":["AddProductComponent","fb","productsService","productAttributeService","categoriesService","languageService","toastr","spinner","router","form","group","photos","array","name","required","description","category","_id","en","ar","properties","price","qty","productAttributes","subCategories","selectedCategory","selectedCategoryAttributes","attributesDropDown","values","langSub","currentLanguage","subscribe","lang","currentLang","arabic","unsubscribe","getbaseCategoriesList","show","getBaseCategories","baseCategories","data","baseCategoryDropDown","map","x","nameEn","nameAr","hide","event","resetProductAttributes","getOne","res","info","categories","length","getproductAttributesList","error","message","fieldIndex","key","splice","attributes","get","i","property","setArrayInGroup","removeAt","valid","push","ind","controls","value","patchValue","valueIndex","propInd","attIndex","target","index","att","Object","keys","reset","count","prop","hasOwnProperty","formData","FormData","append","JSON","stringify","addOne","navigate","selectBaseCategory","onSubmit","selector","templateUrl","styleUrls","EditProductComponent","route","originalPhotos","initialSelectedProductAttribute","productId","snapshot","paramMap","id","getCategory","initialSelectedCategory","photosControl","control","propIndex","propertyControl","console","log","categoryId","getInitialAttributes","updateOne","routes","path","component","ProductsRoutingModule","forChild","imports","exports","discountForm","modalRef","ProductsComponent","storesService","modalService","elRef","exportAsService","items","itemCount","limit","limits","offset","tableElements","discountType","discountValue","discountPercentage","validTill","minDate","Date","datePickerValue","forPeriod","exportAsConfig","type","elementIdOrContent","options","jsPDF","orientation","setNow","lastPageSub","lastParsedPage","newPagination","getAll","products","sort","a","b","active","itemResource","reloadItems","nextBtn","nativeElement","querySelector","previousBtn","clicks","click","pagination","lastPagination","query","FilterRecord","filter","item","toLowerCase","includes","creator","store","stores","selectStoresList","selectedStoreId","addProductToStore","itemId","template","now","hours","getHours","slice","minutes","getMinutes","str","time","checked","undefined","copyOne","getFullYear","getMonth","getDate","parseInt","split","addDiscount","deleteDiscount","deleteOne","activateOne","deactivateOne","soldOne","availableOne","opt","save","content","FilterRecords","exportAs","ProductsModule","forRoot","declarations","schemas"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;AC8DQ;;AACE;;AACE;;AAUE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAEF;;AACF;;AACF;;;;;;;;AAZM;;AAAA,0FAAwB,SAAxB,EAAwB,qEAAxB,EAAwB,SAAxB,EAAwB,qCAAxB,EAAwB,WAAxB,EAAwB,0BAAxB,EAAwB,aAAxB,EAAwB,iBAAxB,EAAwB,eAAxB,EAAwB,yDAAxB,EAAwB,YAAxB,EAAwB,cAAxB,EAAwB,UAAxB,EAAwB,IAAxB;;;;;;;;AAuBJ;;AACE;;AAIA;;AACE;;AACE;;AAGE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAEC;;AAAK;;AAEV;;AACF;;AACF;;;;;;;;;;;;;;AAoCI;;AAGE;;AAeE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAIF;;AACF;;;;;;;;;;;AAlBI;;AAAA,0KAEE,OAFF,EAEE,mCAFF,EAEE,SAFF,EAEE,qHAFF,EAEE,SAFF,EAEE,mCAFF,EAEE,WAFF,EAEE,+CAFF,EAEE,YAFF,EAEE,cAFF,EAEE,UAFF,EAEE,IAFF;;;;;;;;AAoBJ;;AAGE;;AAGE;;AACE;;AAA+C;;AAI7C;;AACJ;;AACA;;AACE;;AAgBE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAhBF;;AAoBF;;AACF;;AAeF;;;;;;;;AA3Ca;;AAAA;;AAAwC;;AAAA;;AAU7C;;AAAA,4GAAsC,aAAtC,EAAsC,0FAAtC,EAAsC,SAAtC,EAAsC,0FAAtC;;;;;;AAhDV;;AAME;;AAyBA;;AAmDF;;;;;;;;AA3EI;;AAAA;;AAyBA;;AAAA;;;;;;AAnCN;;AAGE;;AAmFF;;;;;;AAlFI;;AAAA;;;;;;AArDN;;AAME;;AAiBA;;AAaA;;AAaA;;AAuFF;;;;;;;AAlIgB;;AAAA;;AAmBZ;;AAAA,mFAAiB,SAAjB,EAAiB,gCAAjB,EAAiB,SAAjB,EAAiB,OAAjB,EAAiB,UAAjB,EAAiB,IAAjB,EAAiB,aAAjB,EAAiB,cAAjB,EAAiB,eAAjB,EAAiB,yDAAjB,EAAiB,SAAjB,EAAiB,wBAAjB,EAAiB,YAAjB,EAAiB,cAAjB;;AAaA;;AAAA,sFAAoB,SAApB,EAAoB,sCAApB,EAAoB,SAApB,EAAoB,KAApB,EAAoB,UAApB,EAAoB,IAApB,EAAoB,aAApB,EAAoB,kBAApB,EAAoB,eAApB,EAAoB,+DAApB,EAAoB,SAApB,EAAoB,sBAApB,EAAoB,YAApB,EAAoB,cAApB;;AAYA;;AAAA;;;;;;;;AAyFN;;AAIE;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AASA;;;;;;;;;;AAEF;;AAAS;;;;;;AATP;;AAAA;;AAOA;;AAAA;;;;;;;;QDvNGA,mB;AAOX,mCACUC,EADV,EAEUC,eAFV,EAGUC,uBAHV,EAIUC,iBAJV,EAKUC,eALV,EAMUC,MANV,EAOUC,OAPV,EAQUC,MARV,EAQwB;AAAA;;AAAA;;AAPd,aAAAP,EAAA,GAAAA,EAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,uBAAA,GAAAA,uBAAA;AACA,aAAAC,iBAAA,GAAAA,iBAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AAgBV,aAAAC,IAAA,GAAO,KAAKR,EAAL,CAAQS,KAAR,CAAc;AACnBC,gBAAM,EAAE,KAAKV,EAAL,CAAQW,KAAR,CAAc,EAAd,CADW;AAEnBC,cAAI,EAAE,CAAC,EAAD,EAAK,0DAAWC,QAAhB,CAFa;AAGnBC,qBAAW,EAAE,CAAC,EAAD,EAAK,0DAAWD,QAAhB,CAHM;AAInBE,kBAAQ,EAAE,KAAKf,EAAL,CAAQS,KAAR,CAAc;AACtBO,eAAG,EAAE,EADiB;AAEtBJ,gBAAI,EAAE,KAAKZ,EAAL,CAAQS,KAAR,CAAc;AAClBQ,gBAAE,EAAE,EADc;AAElBC,gBAAE,EAAE;AAFc,aAAd;AAFgB,WAAd,CAJS;AAYnBC,oBAAU,EAAE,KAAKnB,EAAL,CAAQW,KAAR,CAAc,CACxB,KAAKX,EAAL,CAAQS,KAAR,CAAc;AACZW,iBAAK,EAAE,CAAC,CAAD,EAAI,0DAAWP,QAAf,CADK;AAEZQ,eAAG,EAAE,CAAC,CAAD,EAAI,0DAAWR,QAAf,CAFO;AAGZS,6BAAiB,EAAE,KAAKtB,EAAL,CAAQW,KAAR,CAAc,EAAd;AAHP,WAAd,CADwB,CAAd;AAZO,SAAd,CAAP;AA2BA,aAAAY,aAAA,GAAgB,EAAhB;AACA,aAAAC,gBAAA,GAAmB,EAAnB;AACA,aAAAC,0BAAA,GAA6B,EAA7B,CA7CwB,CA6JxB;AAEA;AACA;;AACA,aAAAC,kBAAA,GAAsD,CAAC;AAAEC,gBAAM,EAAE;AAAV,SAAD,CAAtD;AA4FA,aAAAR,UAAA,GAAa,EAAb;AA3PE,aAAKS,OAAL,GAAe,KAAKxB,eAAL,CAAqByB,eAArB,CAAqCC,SAArC,CAA+C,UAACC,IAAD,EAAU;AACtE,eAAI,CAACC,WAAL,GAAmBD,IAAnB;;AACA,cAAI,KAAI,CAACC,WAAL,IAAoB,KAAI,CAACA,WAAL,KAAqB,IAA7C,EAAmD;AACjD,iBAAI,CAACC,MAAL,GAAc,IAAd;AACD,WAFD,MAEO;AACL,iBAAI,CAACA,MAAL,GAAc,KAAd;AACD;AACF,SAPc,CAAf;AAQD;;;;sCAEU;AACT,eAAKL,OAAL,CAAaM,WAAb;AACD;;;mCAuBO;AACN,eAAKC,qBAAL;AACD;;;gDAOuB;AAAA;;AACtB,eAAK7B,OAAL,CAAa8B,IAAb;AACA,eAAKjC,iBAAL,CAAuBkC,iBAAvB;AAEA,eAAKlC,iBAAL,CAAuBmC,cAAvB,CAAsCR,SAAtC,CAAgD,UAACS,IAAD,EAAU;AACxD,gBAAIA,IAAJ,EAAU;AACR,oBAAI,CAACC,oBAAL,GAA4BD,IAAI,CAACE,GAAL,CAAS,UAACC,CAAD,EAAO;AAC1C,uBAAO;AACL1B,qBAAG,EAAE0B,CAAC,CAAC,KAAD,CADD;AAELC,wBAAM,YAAKD,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL,CAFD;AAGLE,wBAAM,YAAKF,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL;AAHD,iBAAP;AAKD,eAN2B,CAA5B;AAOD;AACF,WAVD;AAWA,eAAKpC,OAAL,CAAauC,IAAb;AACD;;;2CACkBC,K,EAAO;AAAA;;AACxB,eAAKtB,gBAAL,GAAwB,EAAxB;AACA,eAAKD,aAAL,GAAqB,EAArB;AACA,eAAKwB,sBAAL;;AAEA,cAAID,KAAJ,EAAW;AACT,iBAAKtB,gBAAL,GAAwB,EAAxB;AACA,iBAAKA,gBAAL,CAAsB,CAAtB,IAA2BsB,KAA3B;AAEA,mBAAO,KAAK3C,iBAAL,CAAuB6C,MAAvB,CAA8BF,KAAK,CAAC9B,GAApC,EAAyCc,SAAzC,CACL,UAACmB,GAAD,EAAS;AACP,oBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AAEA,kBAAIA,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAhB,EAA4B;AAC1B,oBAAIF,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAZ,CAAuBC,MAAvB,GAAgC,CAApC,EAAuC;AACrC,wBAAI,CAAC7B,aAAL,CAAmB,CAAnB,IAAwB0B,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAZ,CAAuBV,GAAvB,CAA2B,UAACC,CAAD,EAAO;AACxD,2BAAO;AACL1B,yBAAG,EAAE0B,CAAC,CAAC,KAAD,CADD;AAELC,4BAAM,YAAKD,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL,CAFD;AAGLE,4BAAM,YAAKF,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL;AAHD,qBAAP;AAKD,mBANuB,CAAxB;AAOD;AACF;;AAED,kBAAIO,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAAhB,EAAmC;AACjC,sBAAI,CAACG,0BAAL,GAAkCwB,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAA9C;;AACA,sBAAI,CAAC+B,wBAAL,CAA8BJ,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAA1C;AACD;AACF,aApBI,EAqBL,UAACgC,KAAD,EAAW;AACT,oBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EADS,CAET;;AACD,aAxBI,CAAP;AA0BD,WA9BD,MA8BO;AACL,iBAAK/B,gBAAL,GAAwB,EAAxB;AACA,iBAAKD,aAAL,GAAqB,EAArB;AACA,iBAAKwB,sBAAL;AACD;AACF,S,CACD;;;;0CAEkBS,U,EAAYV,K,EAAO;AAAA;;AACnC,eAAKxC,OAAL,CAAa8B,IAAb;AAEA,eAAKW,sBAAL,GAHmC,CAInC;;AACA,eAAK,IAAMU,GAAX,IAAkB,KAAKjC,gBAAvB,EAAyC;AACvC,gBAAIiC,GAAG,GAAGD,UAAU,GAAG,CAAvB,EAA0B;AACxB,qBAAO,KAAKhC,gBAAL,CAAsBiC,GAAtB,CAAP;AACD;AACF,WATkC,CAWnC;;;AACA,eAAKlC,aAAL,CAAmBmC,MAAnB,CAA0BF,UAAU,GAAG,CAAvC;;AAEA,cAAIV,KAAJ,EAAW;AACT;AACA,iBAAKtB,gBAAL,CAAsBgC,UAAU,GAAG,CAAnC,IAAwCV,KAAxC;AAEA,iBAAK3C,iBAAL,CAAuB6C,MAAvB,CAA8BF,KAAK,CAAC9B,GAApC,EAAyCc,SAAzC,CACE,UAACmB,GAAD,EAAS;AACP,oBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,kBAAIA,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAhB,EAA4B;AAC1B,oBAAIF,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAZ,CAAuBC,MAAvB,GAAgC,CAApC,EAAuC;AACrC,wBAAI,CAAC7B,aAAL,CAAmBiC,UAAU,GAAG,CAAhC,IAAqCP,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAZ,CAAuBV,GAAvB,CACnC,UAACC,CAAD,EAAO;AACL,2BAAO;AACL1B,yBAAG,EAAE0B,CAAC,CAAC,KAAD,CADD;AAELC,4BAAM,YAAKD,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL,CAFD;AAGLE,4BAAM,YAAKF,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL;AAHD,qBAAP;AAKD,mBAPkC,CAArC;AASD;AACF;;AACD,kBAAIO,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAAhB,EAAmC;AACjC,sBAAI,CAACG,0BAAL,GAAkCwB,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAA9C;;AACA,sBAAI,CAAC+B,wBAAL,CAA8BJ,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAA1C;AACD;AACF,aApBH,EAqBE,UAACgC,KAAD,EAAW;AACT,oBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EADS,CAET;;AACD,aAxBH;AA0BD,WA9BD,MA8BO;AACL;AACA,mBAAO,KAAK/B,gBAAL,CAAsBgC,UAAU,GAAG,CAAnC,CAAP;AACD;;AAED,eAAKlD,OAAL,CAAauC,IAAb;AACD;;;iDAOwBc,U,EAAY;AACnC,cAAMxC,UAAU,GAAG,KAAKX,IAAL,CAAUoD,GAAV,CAAc,YAAd,CAAnB;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1C,UAAU,CAAC,UAAD,CAAV,CAAuBiC,MAA3C,EAAmDS,CAAC,EAApD,EAAwD;AACtD,gBAAMC,QAAQ,GAAG3C,UAAU,CAAC,UAAD,CAAV,CAAuB0C,CAAvB,CAAjB;AACA,iBAAKE,eAAL,CAAqBD,QAArB,EAA+BH,UAA/B;AACD;AACF;;;iDAEwB;AACvB,eAAKjC,kBAAL,GAA0B,CAAC;AAAEC,kBAAM,EAAE;AAAV,WAAD,CAA1B;;AACA,eAAK,IAAIkC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrD,IAAL,CAAUoD,GAAV,CAAc,YAAd,EAA4B,UAA5B,EAAwCR,MAA5D,EAAoES,CAAC,EAArE,EAAyE;AACvE,gBAAIvC,iBAAiB,GAAG,KAAKd,IAAL,CACrBoD,GADqB,CACjB,YADiB,EAErB,UAFqB,EAETC,CAFS,EAEND,GAFM,CAEF,mBAFE,CAAxB;;AAGA,mBAAOtC,iBAAiB,CAAC8B,MAAlB,KAA6B,CAApC,EAAuC;AACrC9B,+BAAiB,CAAC0C,QAAlB,CAA2B,CAA3B;AACD;AACF;AACF;;;sCAEa;AACZ,cAAM7C,UAAU,GAAG,KAAKX,IAAL,CAAUoD,GAAV,CAAc,YAAd,CAAnB;;AACA,cACEzC,UAAU,CAAC,UAAD,CAAV,CAAuBA,UAAU,CAACiC,MAAX,GAAoB,CAA3C,EAA8Ca,KAA9C,IACA,KAAKxC,0BAAL,CAAgC2B,MAAhC,GAAyC,CAF3C,EAGE;AACAjC,sBAAU,CAAC+C,IAAX,CACE,KAAKlE,EAAL,CAAQS,KAAR,CAAc;AACZW,mBAAK,EAAE,CAAC,CAAD,EAAI,0DAAWP,QAAf,CADK;AAEZQ,iBAAG,EAAE,CAAC,CAAD,EAAI,0DAAWR,QAAf,CAFO;AAGZS,+BAAiB,EAAE,KAAKtB,EAAL,CAAQW,KAAR,CAAc,EAAd;AAHP,aAAd,CADF;AAQA,iBAAKoD,eAAL,CACE5C,UAAU,CAAC,UAAD,CAAV,CAAuBA,UAAU,CAACiC,MAAX,GAAoB,CAA3C,CADF,EAEE,KAAK3B,0BAFP;AAID;AACF;;;uCAEc0C,G,EAAK;AAClB,cAAMhD,UAAU,GAAG,KAAKX,IAAL,CAAUoD,GAAV,CAAc,YAAd,CAAnB;;AACA,cAAIzC,UAAU,CAACiD,QAAX,CAAoBhB,MAApB,GAA6B,CAAjC,EAAoC;AAClCjC,sBAAU,CAAC6C,QAAX,CAAoBG,GAApB;AACD;AACF;;;wCAEe1D,K,EAAOkD,U,EAAY;AACjC,cAAIrC,iBAAiB,GAAGb,KAAK,CAACmD,GAAN,CAAU,mBAAV,CAAxB;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,UAAU,CAACP,MAA/B,EAAuCS,CAAC,EAAxC,EAA4C;AAC1C,iBAAKnC,kBAAL,CAAwBmC,CAAxB,IAA6B;AAAElC,oBAAM,EAAE;AAAV,aAA7B,CAD0C,CAG1C;;AACAL,6BAAiB,CAAC8C,QAAlB,CAA2BP,CAA3B,IAAgC,KAAK7D,EAAL,CAAQS,KAAR,CAAc;AAC5CG,kBAAI,EAAE,KAAKZ,EAAL,CAAQS,KAAR,CAAc;AAClBQ,kBAAE,EAAE,CAAC,EAAD,EAAK,0DAAWJ,QAAhB,CADc;AAElBK,kBAAE,EAAE,CAAC,EAAD;AAFc,eAAd,CADsC;AAK5CmD,mBAAK,EAAE,KAAKrE,EAAL,CAAQS,KAAR,CAAc;AACnBO,mBAAG,EAAE,CAAC,EAAD,EAAK,0DAAWH,QAAhB,CADc;AAEnBI,kBAAE,EAAE,CAAC,EAAD,EAAK,0DAAWJ,QAAhB,CAFe;AAGnBK,kBAAE,EAAE,CAAC,EAAD;AAHe,eAAd;AALqC,aAAd,CAAhC;AAYAI,6BAAiB,CAAC8C,QAAlB,CAA2BP,CAA3B,EACGD,GADH,CACO,MADP,EAEGA,GAFH,CAEO,IAFP,EAGGU,UAHH,CAGcX,UAAU,CAACE,CAAD,CAAV,CAAc,MAAd,EAAsB,IAAtB,CAHd;AAIAvC,6BAAiB,CAAC8C,QAAlB,CAA2BP,CAA3B,EACGD,GADH,CACO,MADP,EAEGA,GAFH,CAEO,IAFP,EAGGU,UAHH,CAGcX,UAAU,CAACE,CAAD,CAAV,CAAc,MAAd,EAAsB,IAAtB,CAHd,EApB0C,CAyB1C;;AACA,iBACE,IAAIU,UAAU,GAAG,CADnB,EAEEA,UAAU,GAAGZ,UAAU,CAACE,CAAD,CAAV,CAAclC,MAAd,CAAqByB,MAFpC,EAGEmB,UAAU,EAHZ,EAIE;AACA,mBAAK7C,kBAAL,CAAwBmC,CAAxB,EAA2BlC,MAA3B,CAAkCuC,IAAlC,CAAuC;AACrClD,mBAAG,EAAE2C,UAAU,CAACE,CAAD,CAAV,CAAclC,MAAd,CAAqB4C,UAArB,EAAiC,KAAjC,CADgC;AAErC5B,sBAAM,EAAEgB,UAAU,CAACE,CAAD,CAAV,CAAclC,MAAd,CAAqB4C,UAArB,EAAiC,IAAjC,CAF6B;AAGrC3B,sBAAM,EAAEe,UAAU,CAACE,CAAD,CAAV,CAAclC,MAAd,CAAqB4C,UAArB,EAAiC,IAAjC;AAH6B,eAAvC;AAKD;AACF;AACF;;;+CAGsBzB,K,EAAO0B,O,EAASC,Q,EAAU;AAC/C,cAAI,CAAC,KAAKtD,UAAL,CAAgBqD,OAAhB,CAAL,EAA+B;AAC7B,iBAAKrD,UAAL,CAAgBqD,OAAhB,IAA2B,EAA3B;AACD;;AACD,cAAI,CAAC,KAAKrD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,CAAL,EAAyC;AACvC,iBAAKtD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,IAAqC,EAArC;AACD;;AACD,eAAKtD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,IAAqC3B,KAArC;AACD;;;mDAE0BA,K,EAAO0B,O,EAASC,Q,EAAU;AACnD,cAAI,CAAC,KAAKtD,UAAL,CAAgBqD,OAAhB,CAAL,EAA+B;AAC7B,iBAAKrD,UAAL,CAAgBqD,OAAhB,IAA2B,EAA3B;AACD;;AACD,cAAI,CAAC,KAAKrD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,CAAL,EAAyC;AACvC,iBAAKtD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,IAAqC,EAArC;AACD;;AACD,eAAKtD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,IAAqC;AACnCzD,eAAG,YAAKwD,OAAL,iBAAmBC,QAAnB,CADgC;AAEnC9B,kBAAM,EAAEG,KAAK,CAAC4B,MAAN,CAAaL,KAFc;AAGnCzB,kBAAM,EAAE;AAH2B,WAArC;AAKD,S,CACD;;;;mCAEW;AAAA;;AACT,eAAKtC,OAAL,CAAa8B,IAAb,GADS,CAET;AACA;;AACA,eACE,IAAIuC,KAAK,GAAG,CADd,EAEEA,KAAK,GAAG,KAAKnE,IAAL,CAAUoD,GAAV,CAAc,YAAd,EAA4B,UAA5B,EAAwCR,MAFlD,EAGEuB,KAAK,EAHP,EAIE;AACA,gBAAMb,QAAQ,GAAG,KAAKtD,IAAL,CAAUoD,GAAV,CAAc,YAAd,EAA4B,UAA5B,EAAwCe,KAAxC,CAAjB;AACA,gBAAIhB,UAAU,GAAGG,QAAQ,CAACF,GAAT,CAAa,mBAAb,CAAjB;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,UAAU,CAAC,UAAD,CAAV,CAAuBP,MAA3C,EAAmDS,CAAC,EAApD,EAAwD;AACtD,kBAAMe,GAAG,GAAGjB,UAAU,CAAC,UAAD,CAAV,CAAuBE,CAAvB,CAAZ;;AACA,kBAAI,KAAK1C,UAAL,CAAgBwD,KAAhB,CAAJ,EAA4B;AAC1B,oBAAI,KAAKxD,UAAL,CAAgBwD,KAAhB,EAAuBd,CAAvB,CAAJ,EAA+B;AAC7Be,qBAAG,CACAhB,GADH,CACO,OADP,EAEGA,GAFH,CAEO,KAFP,EAGGU,UAHH,CAGc,KAAKnD,UAAL,CAAgBwD,KAAhB,EAAuBd,CAAvB,EAA0B7C,GAHxC;AAIA4D,qBAAG,CACAhB,GADH,CACO,OADP,EAEGA,GAFH,CAEO,IAFP,EAGGU,UAHH,CAGc,KAAKnD,UAAL,CAAgBwD,KAAhB,EAAuBd,CAAvB,EAA0BlB,MAHxC;AAIAiC,qBAAG,CACAhB,GADH,CACO,OADP,EAEGA,GAFH,CAEO,IAFP,EAGGU,UAHH,CAGc,KAAKnD,UAAL,CAAgBwD,KAAhB,EAAuBd,CAAvB,EAA0BjB,MAHxC;AAID;AACF;AACF;;AACDe,sBAAU,CAACW,UAAX,CAAsBX,UAAU,CAACS,QAAjC;AACD,WA/BQ,CAgCT;AACA;AAEA;AACA;;;AACA,cAAIS,MAAM,CAACC,IAAP,CAAY,KAAKtD,gBAAjB,EAAmC4B,MAAnC,KAA8C,CAAlD,EAAqD;AACnD,iBAAK5C,IAAL,CAAUoD,GAAV,CAAc,UAAd,EAA0BmB,KAA1B;AACD,WAFD,MAEO;AACL,gBAAIC,KAAK,GAAG,CAAZ;;AACA,iBAAK,IAAIC,IAAT,IAAiB,KAAKzD,gBAAtB,EAAwC;AACtC,kBAAI,KAAKA,gBAAL,CAAsB0D,cAAtB,CAAqCD,IAArC,CAAJ,EAAgD,EAAED,KAAF;AACjD;;AACD,gBAAI,KAAKxD,gBAAL,CAAsBwD,KAAK,GAAG,CAA9B,CAAJ,EAAsC;AACpC,mBAAKxE,IAAL,CACGoD,GADH,CACO,UADP,EAEGA,GAFH,CAEO,KAFP,EAGGU,UAHH,CAGc,KAAK9C,gBAAL,CAAsBwD,KAAK,GAAG,CAA9B,EAAiChE,GAH/C;AAKA,mBAAKR,IAAL,CACGoD,GADH,CACO,UADP,EAEGA,GAFH,CAEO,MAFP,EAGGA,GAHH,CAGO,IAHP,EAIGU,UAJH,CAIc,KAAK9C,gBAAL,CAAsBwD,KAAK,GAAG,CAA9B,EAAiCrC,MAJ/C;AAMA,mBAAKnC,IAAL,CACGoD,GADH,CACO,UADP,EAEGA,GAFH,CAEO,MAFP,EAGGA,GAHH,CAGO,IAHP,EAIGU,UAJH,CAIc,KAAK9C,gBAAL,CAAsBwD,KAAK,GAAG,CAA9B,EAAiCpC,MAJ/C;AAKD;AACF,WA9DQ,CA+DT;AACA;;;AAEA,cAAMuC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;AAEA,eAAK,IAAM3B,GAAX,IAAkB,KAAKjD,IAAL,CAAU6D,KAA5B,EAAmC;AACjC,gBAAIZ,GAAG,KAAK,QAAZ,EAAsB;AACpB,mBAAK,IAAII,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG,KAAKrD,IAAL,CAAU6D,KAAV,CAAgBZ,GAAhB,EAAqBL,MAAzC,EAAiDS,EAAC,EAAlD,EAAsD;AACpDsB,wBAAQ,CAACE,MAAT,CAAgB5B,GAAhB,EAAqB,KAAKjD,IAAL,CAAU6D,KAAV,CAAgBZ,GAAhB,EAAqBI,EAArB,CAArB;AACD;AACF,aAJD,MAIO;AACL;AACAsB,sBAAQ,CAACE,MAAT,CAAgB5B,GAAhB,EAAqB6B,IAAI,CAACC,SAAL,CAAe,KAAK/E,IAAL,CAAU6D,KAAV,CAAgBZ,GAAhB,CAAf,CAArB;AACD;AACF;;AAED,eAAKxD,eAAL,CAAqBuF,MAArB,CAA4BL,QAA5B,EAAsCrD,SAAtC,CACE,UAACmB,GAAD,EAAS;AACP,kBAAI,CAACvC,MAAL,GAAc,EAAd;;AACA,kBAAI,CAACF,IAAL,CAAUuE,KAAV;;AACA,kBAAI,CAAC1E,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,kBAAI,CAAC1C,MAAL,CAAYkF,QAAZ,CAAqB,CAAC,WAAD,CAArB;;AACA,kBAAI,CAACnF,OAAL,CAAauC,IAAb;AACD,WAPH,EAQE,UAACS,KAAD,EAAW;AACT;AACA,iBACE,IAAIqB,MAAK,GAAG,CADd,EAEEA,MAAK,GAAG,MAAI,CAACnE,IAAL,CAAUoD,GAAV,CAAc,YAAd,EAA4B,UAA5B,EAAwCR,MAFlD,EAGEuB,MAAK,EAHP,EAIE;AACA,kBAAMb,SAAQ,GAAG,MAAI,CAACtD,IAAL,CAAUoD,GAAV,CAAc,YAAd,EAA4B,UAA5B,EAAwCe,MAAxC,CAAjB;;AACA,kBAAIhB,WAAU,GAAGG,SAAQ,CAACF,GAAT,CAAa,mBAAb,CAAjB;;AACA,qBAAOD,WAAU,CAACP,MAAX,KAAsB,CAA7B,EAAgC;AAC9BO,2BAAU,CAACK,QAAX,CAAoB,CAApB;AACD;AACF,aAZQ,CAaT;;;AAEA,kBAAI,CAAC3D,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAfS,CAgBT;;;AACA,kBAAI,CAACjD,OAAL,CAAauC,IAAb;AACD,WA1BH;AA4BA,eAAKvC,OAAL,CAAauC,IAAb;AACD;;;;;;;uBAlZU9C,mB,EAAmB,2H,EAAA,kI,EAAA,wK,EAAA,iJ,EAAA,2I,EAAA,yH,EAAA,8H,EAAA,uH;AAAA,K;;;YAAnBA,mB;AAAmB,sC;AAAA,e;AAAA,c;AAAA,4hE;AAAA;AAAA;ACrBhC;;AACA;;AACE;;AACE;;AACE;;;;;;;;;;AAEF;;AACA;;AACE;;AACE;;AACE;;AACE;;AAKF;;AACF;;AAEA;;AAcA;;AAcA;;AACE;;AAUE;AAAA,mBAAgB,IAAA2F,kBAAA,QAAhB;AAA0C,WAA1C;;AAEF;;AACF;;AACA;;AAkBA;;AACE;;AAAI;;;;;;AAA0C;;AAChD;;AACA;;AAyIF;;AAEA;;AAmBA;;AACE;;AAEE;AAAA,mBAAS,IAAAC,QAAA,EAAT;AAAmB,WAAnB;;AAIA;;;;;;AACF;;AACA;;AAKE;;;;;;AACF;;AACF;;AACF;;AACF;;AACF;;;;AAhQM;;AAAA;;AAQQ;;AAAA,yFAAiB,SAAjB,EAAiB,sBAAjB;;AASJ;;AAAA,oFAAgB,SAAhB,EAAgB,gCAAhB,EAAgB,SAAhB,EAAgB,MAAhB,EAAgB,UAAhB,EAAgB,IAAhB,EAAgB,aAAhB,EAAgB,cAAhB,EAAgB,eAAhB,EAAgB,yDAAhB,EAAgB,YAAhB,EAAgB,MAAhB,EAAgB,SAAhB,EAAgB,oBAAhB,EAAgB,YAAhB,EAAgB,cAAhB;;AAcA;;AAAA,2FAAuB,SAAvB,EAAuB,gCAAvB,EAAuB,SAAvB,EAAuB,aAAvB,EAAuB,aAAvB,EAAuB,qBAAvB,EAAuB,eAAvB,EAAuB,yDAAvB,EAAuB,YAAvB,EAAuB,qBAAvB,EAAuB,SAAvB,EAAuB,2BAAvB,EAAuB,YAAvB,EAAuB,cAAvB;;AAeE;;AAAA,wFAAoB,SAApB,EAAoB,gCAApB,EAAoB,SAApB,EAAoB,UAApB,EAAoB,WAApB,EAAoB,wBAApB,EAAoB,aAApB,EAAoB,wBAApB,EAAoB,eAApB,EAAoB,oGAApB,EAAoB,YAApB,EAAoB,cAApB,EAAoB,UAApB,EAAoB,IAApB;;AAYU;;AAAA;;AAmBR;;AAAA;;AAGJ;;AAAA;;AA0IU;;AAAA;;AAwBV;;AAAA;;AAEA;;AAAA;;AAIA;;AAAA;;AAGA;;AAAA;;;;;;;;;;sED1OG5F,mB,EAAmB;cAL/B,uDAK+B;eALrB;AACT6F,kBAAQ,EAAE,iBADD;AAETC,qBAAW,EAAE,8BAFJ;AAGTC,mBAAS,EAAE,CAAC,8BAAD;AAHF,S;AAKqB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AErBhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;AC4DQ;;AACE;;AACE;;AAUE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAEF;;AACF;;AACF;;;;;;;;AAZM;;AAAA,0FAAwB,SAAxB,EAAwB,qEAAxB,EAAwB,SAAxB,EAAwB,qCAAxB,EAAwB,WAAxB,EAAwB,0BAAxB,EAAwB,aAAxB,EAAwB,iBAAxB,EAAwB,eAAxB,EAAwB,yDAAxB,EAAwB,YAAxB,EAAwB,cAAxB,EAAwB,UAAxB,EAAwB,IAAxB;;;;;;;;AAqBJ;;AACE;;AAIA;;AACE;;AACE;;AAGE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAEC;;AAAK;;AAEV;;AACF;;AACF;;;;;;;;;;;;;;AAoCI;;AAGE;;AAgBE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAIF;;AACF;;;;;;;;;;;;;AAnBI;;AAAA,2KAEE,OAFF,EAEE,mCAFF,EAEE,SAFF,EAEE,mCAFF,EAEE,aAFF,EAEE,mCAFF,EAEE,eAFF,EAEE,mCAFF,EAEE,SAFF,EAEE,mCAFF,EAEE,qBAFF,EAEE,iEAFF,EAEE,WAFF,EAEE,+CAFF,EAEE,YAFF,EAEE,cAFF,EAEE,UAFF,EAEE,IAFF;;;;;;;;;;;;;;AAqBJ;;AAGE;;AAGE;;AAME;;AAA+C;;AAI7C;;AACJ;;AACA;;AACE;;AAsBE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAtBF;;AA0BF;;AACF;;AAeF;;;;;;;;;;;AAtDM;;AAAA;;AAKO;;AAAA;;AAAwC;;AAAA;;AAU7C;;AAAA,4GAAsC,aAAtC,EAAsC,0FAAtC,EAAsC,SAAtC,EAAsC,0FAAtC,EAAsC,OAAtC,EAAsC,gKAAtC;;;;;;AAtDV;;AAME;;AA0BA;;AA8DF;;;;;;;;AAvFI;;AAAA;;AA0BA;;AAAA;;;;;;AApCN;;AAGE;;AA+FF;;;;;;AA9FI;;AAAA;;;;;;AArDN;;AAME;;AAiBA;;AAaA;;AAaA;;AAmGF;;;;;;;AA9IgB;;AAAA;;AAmBZ;;AAAA,mFAAiB,SAAjB,EAAiB,gCAAjB,EAAiB,SAAjB,EAAiB,OAAjB,EAAiB,UAAjB,EAAiB,IAAjB,EAAiB,aAAjB,EAAiB,cAAjB,EAAiB,eAAjB,EAAiB,gCAAjB,EAAiB,SAAjB,EAAiB,wBAAjB,EAAiB,YAAjB,EAAiB,cAAjB;;AAaA;;AAAA,sFAAoB,SAApB,EAAoB,sCAApB,EAAoB,SAApB,EAAoB,KAApB,EAAoB,UAApB,EAAoB,IAApB,EAAoB,aAApB,EAAoB,kBAApB,EAAoB,eAApB,EAAoB,+DAApB,EAAoB,SAApB,EAAoB,sBAApB,EAAoB,YAApB,EAAoB,cAApB;;AAYA;;AAAA;;;;;;;;AAwJN;;AACE;;AAEE;AAAA;;AAAA;;AAAA;AAAA;;AAQA;;;;;;;;;;AAEF;;AACF;;;;;;AATI;;AAAA;;AAMA;;AAAA;;;;;;;;QDlRGC,oB;AAQX,oCACU/F,EADV,EAEUgG,KAFV,EAGU/F,eAHV,EAIUE,iBAJV,EAKUC,eALV,EAMUC,MANV,EAOUC,OAPV,EAQUC,MARV,EAQwB;AAAA;;AAAA;;AAPd,aAAAP,EAAA,GAAAA,EAAA;AACA,aAAAgG,KAAA,GAAAA,KAAA;AACA,aAAA/F,eAAA,GAAAA,eAAA;AACA,aAAAE,iBAAA,GAAAA,iBAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AAfV,aAAA0F,cAAA,GAAiB,EAAjB;AA2BA,aAAAzF,IAAA,GAAO,KAAKR,EAAL,CAAQS,KAAR,CAAc;AACnB;AACAC,gBAAM,EAAE,KAAKV,EAAL,CAAQW,KAAR,CAAc,EAAd,CAFW;AAGnBC,cAAI,EAAE,CAAC,EAAD,EAAK,0DAAWC,QAAhB,CAHa;AAInBC,qBAAW,EAAE,CAAC,EAAD,EAAK,0DAAWD,QAAhB,CAJM;AAMnBE,kBAAQ,EAAE,KAAKf,EAAL,CAAQS,KAAR,CAAc;AACtBO,eAAG,EAAE,EADiB;AAEtBJ,gBAAI,EAAE,KAAKZ,EAAL,CAAQS,KAAR,CAAc;AAClBQ,gBAAE,EAAE,EADc;AAElBC,gBAAE,EAAE;AAFc,aAAd;AAFgB,WAAd,CANS;AAcnBC,oBAAU,EAAE,KAAKnB,EAAL,CAAQW,KAAR,CAAc,EAAd;AAdO,SAAd,CAAP;AAqIA,aAAAe,kBAAA,GAAsD,CAAC;AAAEC,gBAAM,EAAE;AAAV,SAAD,CAAtD;AACA,aAAAF,0BAAA,GAA6B,EAA7B;AAiDA,aAAAF,aAAA,GAAgB,EAAhB;AAEA,aAAAC,gBAAA,GAAmB,EAAnB;AA0IA,aAAA0E,+BAAA,GAAuD,CAAC,EAAD,CAAvD;AAyFA,aAAA/E,UAAA,GAAa,EAAb;AAtaE,aAAKS,OAAL,GAAe,KAAKxB,eAAL,CAAqByB,eAArB,CAAqCC,SAArC,CAA+C,UAACC,IAAD,EAAU;AACtE,gBAAI,CAACC,WAAL,GAAmBD,IAAnB;;AACA,cAAI,MAAI,CAACC,WAAL,IAAoB,MAAI,CAACA,WAAL,KAAqB,IAA7C,EAAmD;AACjD,kBAAI,CAACC,MAAL,GAAc,IAAd;AACD,WAFD,MAEO;AACL,kBAAI,CAACA,MAAL,GAAc,KAAd;AACD;AACF,SAPc,CAAf;AAQD;;;;mCAmBO;AACN,eAAKkE,SAAL,GAAiB,KAAKH,KAAL,CAAWI,QAAX,CAAoBC,QAApB,CAA6BzC,GAA7B,CAAiC,IAAjC,CAAjB;AACA,eAAKzB,qBAAL;AACD;;;0CACiB;AAChB,eAAKa,MAAL,CAAY,KAAKmD,SAAjB;AACD;;;+BAEMG,E,EAAI;AAAA;;AACT,eAAKhG,OAAL,CAAa8B,IAAb;AAEA,eAAKnC,eAAL,CAAqB+C,MAArB,CAA4BsD,EAA5B,EAAgCxE,SAAhC,CACE,UAACmB,GAAD,EAAS;AACP;AACA;AAEA,kBAAI,CAACzC,IAAL,CAAU8D,UAAV,CAAqBrB,GAAG,CAAC,MAAD,CAAxB;;AAEA,kBAAI,CAACsD,WAAL,CAAiBtD,GAAG,CAAC,MAAD,CAAH,CAAY,UAAZ,EAAwBjC,GAAzC,EANO,CAQP;;;AACA,kBAAI,CAACwF,uBAAL,GAA+B;AAC7BxF,iBAAG,EAAEiC,GAAG,CAAC,MAAD,CAAH,CAAY,UAAZ,EAAwB,KAAxB,CADwB;AAE7BN,oBAAM,EAAEM,GAAG,CAAC,MAAD,CAAH,CAAY,UAAZ,EAAwB,IAAxB,CAFqB;AAG7BL,oBAAM,EAAEK,GAAG,CAAC,MAAD,CAAH,CAAY,UAAZ,EAAwB,IAAxB;AAHqB,aAA/B;AAKA,kBAAI,CAACzB,gBAAL,GAAwB,EAAxB;AACA,kBAAI,CAACA,gBAAL,CAAsB,CAAtB,IAA2B;AACzBR,iBAAG,EAAEiC,GAAG,CAAC,MAAD,CAAH,CAAY,UAAZ,EAAwB,KAAxB,CADoB;AAEzBN,oBAAM,EAAEM,GAAG,CAAC,MAAD,CAAH,CAAY,UAAZ,EAAwB,IAAxB,CAFiB;AAGzBL,oBAAM,EAAEK,GAAG,CAAC,MAAD,CAAH,CAAY,UAAZ,EAAwB,IAAxB;AAHiB,aAA3B,CAfO,CAoBP;;AAEA,kBAAI,CAACgD,cAAL,GAAsBhD,GAAG,CAAC,MAAD,CAAH,CAAY,QAAZ,CAAtB;;AACA,gBAAIwD,aAAa,GAAG,MAAI,CAACjG,IAAL,CAAUoD,GAAV,CAAc,QAAd,CAApB;;AACA,iBAAK,IAAIe,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,MAAI,CAACsB,cAAL,CAAoB7C,MAAhD,EAAwDuB,KAAK,EAA7D,EAAiE;AAC/D8B,2BAAa,CAACvC,IAAd,CAAmB,MAAI,CAAClE,EAAL,CAAQ0G,OAAR,CAAgB,EAAhB,CAAnB;AACD;;AACD,kBAAI,CAAClG,IAAL,CAAUoD,GAAV,CAAc,QAAd,EAAwBU,UAAxB,CAAmCrB,GAAG,CAAC,MAAD,CAAH,CAAY,QAAZ,CAAnC;;AAEA,kBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AAEA,iBACE,IAAI0D,SAAS,GAAG,CADlB,EAEEA,SAAS,GAAG1D,GAAG,CAAC,MAAD,CAAH,CAAY,YAAZ,EAA0BG,MAFxC,EAGEuD,SAAS,EAHX,EAIE;AACA,kBAAIC,eAAe,GAAG,MAAI,CAACpG,IAAL,CAAUoD,GAAV,CAAc,YAAd,CAAtB;;AACAgD,6BAAe,CAAC1C,IAAhB,CACE,MAAI,CAAClE,EAAL,CAAQS,KAAR,CAAc;AACZO,mBAAG,EAAE,CAAC,EAAD,CADO;AAEZI,qBAAK,EAAE,CAAC,CAAD,EAAI,0DAAWP,QAAf,CAFK;AAGZQ,mBAAG,EAAE,CAAC,CAAD,EAAI,0DAAWR,QAAf,CAHO;AAIZS,iCAAiB,EAAE,MAAI,CAACtB,EAAL,CAAQW,KAAR,CAAc,EAAd;AAJP,eAAd,CADF;;AASA,kBAAI,CAAC,MAAI,CAACQ,UAAL,CAAgBwF,SAAhB,CAAL,EAAiC;AAC/B,sBAAI,CAACxF,UAAL,CAAgBwF,SAAhB,IAA6B,EAA7B;AACD;;AACD,mBACE,IAAIlC,QAAQ,GAAG,CADjB,EAEEA,QAAQ,GACRxB,GAAG,CAAC,MAAD,CAAH,CAAY,YAAZ,EAA0B0D,SAA1B,EAAqC,mBAArC,EAA0DvD,MAH5D,EAIEqB,QAAQ,EAJV,EAKE;AACA,oBAAI,CAAC,MAAI,CAACtD,UAAL,CAAgBwF,SAAhB,EAA2BlC,QAA3B,CAAL,EAA2C;AACzC,wBAAI,CAACtD,UAAL,CAAgBwF,SAAhB,EAA2BlC,QAA3B,IAAuC,EAAvC;AACD;;AAED,sBAAI,CAACtD,UAAL,CAAgBwF,SAAhB,EAA2BlC,QAA3B,IAAuC;AACrCzD,qBAAG,EAAEiC,GAAG,CAAC,MAAD,CAAH,CAAY,YAAZ,EAA0B0D,SAA1B,EAAqC,mBAArC,EACHlC,QADG,EAEHJ,KAFG,CAEGrD,GAH6B;AAIrC2B,wBAAM,EACJM,GAAG,CAAC,MAAD,CAAH,CAAY,YAAZ,EAA0B0D,SAA1B,EAAqC,mBAArC,EACElC,QADF,EAEEJ,KAFF,CAEQpD,EAP2B;AAQrC2B,wBAAM,EACJK,GAAG,CAAC,MAAD,CAAH,CAAY,YAAZ,EAA0B0D,SAA1B,EAAqC,mBAArC,EACElC,QADF,EAEEJ,KAFF,CAEQnD;AAX2B,iBAAvC,CALA,CAkBA;AACA;AACA;AACA;AACD;AACF;;AACD,gBACE+B,GAAG,CAAC,MAAD,CAAH,CAAY,YAAZ,KACAA,GAAG,CAAC,MAAD,CAAH,CAAY,YAAZ,EAA0BG,MAA1B,KAAqC,CAFvC,EAGE;AACA,kBAAIwD,gBAAe,GAAG,MAAI,CAACpG,IAAL,CAAUoD,GAAV,CAAc,YAAd,CAAtB;;AACAgD,8BAAe,CAAC1C,IAAhB,CACE,MAAI,CAAClE,EAAL,CAAQS,KAAR,CAAc;AACZO,mBAAG,EAAE,CAAC,EAAD,CADO;AAEZI,qBAAK,EAAE,CAAC,CAAD,EAAI,0DAAWP,QAAf,CAFK;AAGZQ,mBAAG,EAAE,CAAC,CAAD,EAAI,0DAAWR,QAAf,CAHO;AAIZS,iCAAiB,EAAE,MAAI,CAACtB,EAAL,CAAQW,KAAR,CAAc,EAAd;AAJP,eAAd,CADF;AAQD;;AACD,kBAAI,CAACH,IAAL,CAAUoD,GAAV,CAAc,YAAd,EAA4BU,UAA5B,CAAuCrB,GAAG,CAAC,MAAD,CAAH,CAAY,YAAZ,CAAvC;AACD,WA9FH,EA+FE,UAACK,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,kBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WAnGH;AAsGA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;sCAIa;AACZ,eAAKqD,+BAAL,CAAqChC,IAArC,CAA0C,EAA1C;AACA,cAAM/C,UAAU,GAAG,KAAKX,IAAL,CAAUoD,GAAV,CAAc,YAAd,CAAnB;;AACA,cAAIzC,UAAU,CAAC,UAAD,CAAV,CAAuBA,UAAU,CAACiC,MAAX,GAAoB,CAA3C,EAA8Ca,KAAlD,EAAyD;AACvD9C,sBAAU,CAAC+C,IAAX,CACE,KAAKlE,EAAL,CAAQS,KAAR,CAAc;AACZO,iBAAG,EAAE,CAAC,EAAD,CADO;AAEZI,mBAAK,EAAE,CAAC,CAAD,EAAI,0DAAWP,QAAf,CAFK;AAGZQ,iBAAG,EAAE,CAAC,CAAD,EAAI,0DAAWR,QAAf,CAHO;AAIZS,+BAAiB,EAAE,KAAKtB,EAAL,CAAQW,KAAR,CAAc,EAAd;AAJP,aAAd,CADF;AAQA,iBAAKoD,eAAL,CACE5C,UAAU,CAAC,UAAD,CAAV,CAAuBA,UAAU,CAACiC,MAAX,GAAoB,CAA3C,CADF,EAEE,KAAK3B,0BAFP;AAID;AACF;;;uCAEc0C,G,EAAK;AAClB,cAAMhD,UAAU,GAAG,KAAKX,IAAL,CAAUoD,GAAV,CAAc,YAAd,CAAnB;;AACA,cAAIzC,UAAU,CAACiD,QAAX,CAAoBhB,MAApB,GAA6B,CAAjC,EAAoC;AAClCjC,sBAAU,CAAC6C,QAAX,CAAoBG,GAApB;AACD;AACF;;;oCAEW4C,U,EAAY;AAAA;;AACtB,eAAKzG,OAAL,CAAa8B,IAAb;AAEA,iBAAO,KAAKjC,iBAAL,CAAuB6C,MAAvB,CAA8B+D,UAA9B,EAA0CjF,SAA1C,CACL,UAACmB,GAAD,EAAS;AACP,kBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AAEA,gBAAIA,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAAhB,EAAmC;AACjC,oBAAI,CAACG,0BAAL,GAAkCwB,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAA9C;;AACA,oBAAI,CAAC+B,wBAAL,CAA8BJ,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAA1C;AACD;AACF,WARI,EASL,UAACgC,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,kBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WAbI,CAAP;AAgBA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;gDAMuB;AAAA;;AACtB,eAAKvC,OAAL,CAAa8B,IAAb;AACA,eAAKjC,iBAAL,CAAuBkC,iBAAvB;AAEA,eAAKlC,iBAAL,CAAuBmC,cAAvB,CAAsCR,SAAtC,CAAgD,UAACS,IAAD,EAAU;AACxD,gBAAIA,IAAJ,EAAU;AACR,oBAAI,CAACC,oBAAL,GAA4BD,IAAI,CAACE,GAAL,CAAS,UAACC,CAAD,EAAO;AAC1C,uBAAO;AACL1B,qBAAG,EAAE0B,CAAC,CAAC,KAAD,CADD;AAELC,wBAAM,YAAKD,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL,CAFD;AAGLE,wBAAM,YAAKF,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL;AAHD,iBAAP;AAKD,eAN2B,CAA5B;AAOD;AACF,WAVD;AAWA,eAAKpC,OAAL,CAAauC,IAAb;AACD;;;2CACkBC,K,EAAO;AAAA;;AACxB,eAAKtB,gBAAL,GAAwB,EAAxB;AACA,eAAKD,aAAL,GAAqB,EAArB;AACA,eAAKwB,sBAAL;;AAEA,cAAID,KAAJ,EAAW;AACT,iBAAKtB,gBAAL,GAAwB,EAAxB;AACA,iBAAKA,gBAAL,CAAsB,CAAtB,IAA2BsB,KAA3B;AAEA,mBAAO,KAAK3C,iBAAL,CAAuB6C,MAAvB,CAA8BF,KAAK,CAAC9B,GAApC,EAAyCc,SAAzC,CACL,UAACmB,GAAD,EAAS;AACP,qBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AAEA,kBAAIA,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAhB,EAA4B;AAC1B,oBAAIF,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAZ,CAAuBC,MAAvB,GAAgC,CAApC,EAAuC;AACrC,yBAAI,CAAC7B,aAAL,CAAmB,CAAnB,IAAwB0B,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAZ,CAAuBV,GAAvB,CAA2B,UAACC,CAAD,EAAO;AACxD,2BAAO;AACL1B,yBAAG,EAAE0B,CAAC,CAAC,KAAD,CADD;AAELC,4BAAM,YAAKD,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL,CAFD;AAGLE,4BAAM,YAAKF,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL;AAHD,qBAAP;AAKD,mBANuB,CAAxB;AAOD;AACF;;AAED,kBAAIO,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAAhB,EAAmC;AACjC,uBAAI,CAACG,0BAAL,GAAkCwB,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAA9C;;AACA,uBAAI,CAAC+B,wBAAL,CAA8BJ,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAA1C;AACD;AACF,aApBI,EAqBL,UAACgC,KAAD,EAAW;AACTuD,qBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,qBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,aAzBI,CAAP;AA2BD,WA/BD,MA+BO;AACL,iBAAK/B,gBAAL,GAAwB,EAAxB;AACA,iBAAKD,aAAL,GAAqB,EAArB;AACA,iBAAKwB,sBAAL;AACD;AACF,S,CACD;;;;0CAEkBS,U,EAAYV,K,EAAO;AAAA;;AACnC,eAAKxC,OAAL,CAAa8B,IAAb;AAEA,eAAKW,sBAAL,GAHmC,CAInC;;AACA,eAAK,IAAMU,GAAX,IAAkB,KAAKjC,gBAAvB,EAAyC;AACvC,gBAAIiC,GAAG,GAAGD,UAAU,GAAG,CAAvB,EAA0B;AACxB,qBAAO,KAAKhC,gBAAL,CAAsBiC,GAAtB,CAAP;AACD;AACF,WATkC,CAWnC;;;AACA,eAAKlC,aAAL,CAAmBmC,MAAnB,CAA0BF,UAAU,GAAG,CAAvC;;AAEA,cAAIV,KAAJ,EAAW;AACT;AACA,iBAAKtB,gBAAL,CAAsBgC,UAAU,GAAG,CAAnC,IAAwCV,KAAxC;AAEA,iBAAK3C,iBAAL,CAAuB6C,MAAvB,CAA8BF,KAAK,CAAC9B,GAApC,EAAyCc,SAAzC,CACE,UAACmB,GAAD,EAAS;AACP,qBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,kBAAIA,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAhB,EAA4B;AAC1B,oBAAIF,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAZ,CAAuBC,MAAvB,GAAgC,CAApC,EAAuC;AACrC,yBAAI,CAAC7B,aAAL,CAAmBiC,UAAU,GAAG,CAAhC,IAAqCP,GAAG,CAAC,MAAD,CAAH,CAAYE,UAAZ,CAAuBV,GAAvB,CACnC,UAACC,CAAD,EAAO;AACL,2BAAO;AACL1B,yBAAG,EAAE0B,CAAC,CAAC,KAAD,CADD;AAELC,4BAAM,YAAKD,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL,CAFD;AAGLE,4BAAM,YAAKF,CAAC,CAAC,MAAD,CAAD,CAAU,IAAV,CAAL;AAHD,qBAAP;AAKD,mBAPkC,CAArC;AASD;AACF;;AACD,kBAAIO,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAAhB,EAAmC;AACjC,uBAAI,CAACG,0BAAL,GAAkCwB,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAA9C;;AACA,uBAAI,CAAC+B,wBAAL,CAA8BJ,GAAG,CAAC,MAAD,CAAH,CAAY3B,iBAA1C;AACD;AACF,aApBH,EAqBE,UAACgC,KAAD,EAAW;AACTuD,qBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,qBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,aAzBH;AA2BD,WA/BD,MA+BO;AACL;AACA,mBAAO,KAAK/B,gBAAL,CAAsBgC,UAAU,GAAG,CAAnC,CAAP;AACD;;AAED,eAAKlD,OAAL,CAAauC,IAAb;AACD;;;iDACwB;AACvB,eAAKnB,kBAAL,GAA0B,CAAC;AAAEC,kBAAM,EAAE;AAAV,WAAD,CAA1B;;AACA,eAAK,IAAIkC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrD,IAAL,CAAUoD,GAAV,CAAc,YAAd,EAA4B,UAA5B,EAAwCR,MAA5D,EAAoES,CAAC,EAArE,EAAyE;AACvE,gBAAIvC,iBAAiB,GAAG,KAAKd,IAAL,CACrBoD,GADqB,CACjB,YADiB,EAErB,UAFqB,EAETC,CAFS,EAEND,GAFM,CAEF,mBAFE,CAAxB;;AAGA,mBAAOtC,iBAAiB,CAAC8B,MAAlB,KAA6B,CAApC,EAAuC;AACrC9B,+BAAiB,CAAC0C,QAAlB,CAA2B,CAA3B;AACD;AACF;AACF,S,CAED;;;;iDAEyBL,U,EAAY;AACnC,cAAMiD,eAAe,GAAG,KAAKpG,IAAL,CAAUoD,GAAV,CAAc,YAAd,CAAxB;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+C,eAAe,CAAC,UAAD,CAAf,CAA4BxD,MAAhD,EAAwDS,CAAC,EAAzD,EAA6D;AAC3D,gBAAMC,QAAQ,GAAG8C,eAAe,CAAC,UAAD,CAAf,CAA4B/C,CAA5B,CAAjB;AACA,iBAAKE,eAAL,CAAqBD,QAArB,EAA+BH,UAA/B;AACD;;AACD,eAAKqD,oBAAL;AACD;;;wCAIevG,K,EAAOkD,U,EAAY;AACjC,cAAIrC,iBAAiB,GAAGb,KAAK,CAACmD,GAAN,CAAU,mBAAV,CAAxB;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,UAAU,CAACP,MAA/B,EAAuCS,CAAC,EAAxC,EAA4C;AAC1C,iBAAKnC,kBAAL,CAAwBmC,CAAxB,IAA6B;AAAElC,oBAAM,EAAE;AAAV,aAA7B,CAD0C,CAG1C;;AACAL,6BAAiB,CAAC8C,QAAlB,CAA2BP,CAA3B,IAAgC,KAAK7D,EAAL,CAAQS,KAAR,CAAc;AAC5CG,kBAAI,EAAE,KAAKZ,EAAL,CAAQS,KAAR,CAAc;AAClBQ,kBAAE,EAAE,CAAC,EAAD,EAAK,0DAAWJ,QAAhB,CADc;AAElBK,kBAAE,EAAE,CAAC,EAAD;AAFc,eAAd,CADsC;AAK5CmD,mBAAK,EAAE,KAAKrE,EAAL,CAAQS,KAAR,CAAc;AACnBO,mBAAG,EAAE,CAAC,EAAD,CADc;AAEnBC,kBAAE,EAAE,CAAC,EAAD,CAFe;AAGnBC,kBAAE,EAAE,CAAC,EAAD;AAHe,eAAd;AALqC,aAAd,CAAhC;AAYAI,6BAAiB,CAAC8C,QAAlB,CAA2BP,CAA3B,EACGD,GADH,CACO,MADP,EAEGA,GAFH,CAEO,IAFP,EAGGU,UAHH,CAGcX,UAAU,CAACE,CAAD,CAAV,CAAc,MAAd,EAAsB,IAAtB,CAHd;AAIAvC,6BAAiB,CAAC8C,QAAlB,CAA2BP,CAA3B,EACGD,GADH,CACO,MADP,EAEGA,GAFH,CAEO,IAFP,EAGGU,UAHH,CAGcX,UAAU,CAACE,CAAD,CAAV,CAAc,MAAd,EAAsB,IAAtB,CAHd,EApB0C,CAyB1C;;AACA,iBACE,IAAIU,UAAU,GAAG,CADnB,EAEEA,UAAU,GAAGZ,UAAU,CAACE,CAAD,CAAV,CAAclC,MAAd,CAAqByB,MAFpC,EAGEmB,UAAU,EAHZ,EAIE;AACA,mBAAK7C,kBAAL,CAAwBmC,CAAxB,EAA2BlC,MAA3B,CAAkCuC,IAAlC,CAAuC;AACrClD,mBAAG,EAAE2C,UAAU,CAACE,CAAD,CAAV,CAAclC,MAAd,CAAqB4C,UAArB,EAAiC,KAAjC,CADgC;AAErC5B,sBAAM,EAAEgB,UAAU,CAACE,CAAD,CAAV,CAAclC,MAAd,CAAqB4C,UAArB,EAAiC,IAAjC,CAF6B;AAGrC3B,sBAAM,EAAEe,UAAU,CAACE,CAAD,CAAV,CAAclC,MAAd,CAAqB4C,UAArB,EAAiC,IAAjC;AAH6B,eAAvC;AAKD;AACF;AACF;;;+CAEsB;AACrB,cAAIqC,eAAe,GAAG,KAAKpG,IAAL,CAAUoD,GAAV,CAAc,YAAd,CAAtB;;AACA,eACE,IAAI+C,SAAS,GAAG,CADlB,EAEEA,SAAS,GAAGC,eAAe,CAAC,UAAD,CAAf,CAA4BxD,MAF1C,EAGEuD,SAAS,EAHX,EAIE;AACA,gBAAIhD,UAAU,GAAGiD,eAAe,CAAC,UAAD,CAAf,CAA4BD,SAA5B,EAAuC/C,GAAvC,CACf,mBADe,CAAjB;;AAIA,iBACE,IAAIa,QAAQ,GAAG,CADjB,EAEEA,QAAQ,GAAGd,UAAU,CAAC,UAAD,CAAV,CAAuBP,MAFpC,EAGEqB,QAAQ,EAHV,EAIE;AACA,kBAAMG,GAAG,GAAGjB,UAAU,CAAC,UAAD,CAAV,CAAuBc,QAAvB,CAAZ;;AACA,kBAAI,KAAKtD,UAAL,CAAgBwF,SAAhB,EAA2BlC,QAA3B,CAAJ,EAA0C;AACxCG,mBAAG,CACAhB,GADH,CACO,OADP,EAEGA,GAFH,CAEO,KAFP,EAGGU,UAHH,CAGc,KAAKnD,UAAL,CAAgBwF,SAAhB,EAA2BlC,QAA3B,EAAqCzD,GAHnD;AAIA4D,mBAAG,CACAhB,GADH,CACO,OADP,EAEGA,GAFH,CAEO,IAFP,EAGGU,UAHH,CAGc,KAAKnD,UAAL,CAAgBwF,SAAhB,EAA2BlC,QAA3B,EAAqC9B,MAHnD;AAIAiC,mBAAG,CACAhB,GADH,CACO,OADP,EAEGA,GAFH,CAEO,IAFP,EAGGU,UAHH,CAGc,KAAKnD,UAAL,CAAgBwF,SAAhB,EAA2BlC,QAA3B,EAAqC7B,MAHnD;;AAIA,oBAAI,CAAC,KAAKsD,+BAAL,CAAqCS,SAArC,CAAL,EAAsD;AACpD,uBAAKT,+BAAL,CAAqCS,SAArC,IAAkD,EAAlD;AACD;;AAED,qBAAKT,+BAAL,CAAqCS,SAArC,EAAgDlC,QAAhD,IAA4D;AAC1DzD,qBAAG,EAAE,KAAKG,UAAL,CAAgBwF,SAAhB,EAA2BlC,QAA3B,EAAqCzD,GADgB;AAE1D2B,wBAAM,EAAE,KAAKxB,UAAL,CAAgBwF,SAAhB,EAA2BlC,QAA3B,EAAqC9B,MAFa;AAG1DC,wBAAM,EAAE,KAAKzB,UAAL,CAAgBwF,SAAhB,EAA2BlC,QAA3B,EAAqC7B;AAHa,iBAA5D;AAKD;AACF;;AACDe,sBAAU,CAACW,UAAX,CAAsBX,UAAU,CAACS,QAAjC;AACD;AACF;;;+CAGsBtB,K,EAAO0B,O,EAASC,Q,EAAU;AAC/C,cAAI,CAAC,KAAKtD,UAAL,CAAgBqD,OAAhB,CAAL,EAA+B;AAC7B,iBAAKrD,UAAL,CAAgBqD,OAAhB,IAA2B,EAA3B;AACD;;AACD,cAAI,CAAC,KAAKrD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,CAAL,EAAyC;AACvC,iBAAKtD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,IAAqC,EAArC;AACD;;AACD,eAAKtD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,IAAqC3B,KAArC;AACD;;;mDAE0BA,K,EAAO0B,O,EAASC,Q,EAAU;AACnD,cAAI,CAAC,KAAKtD,UAAL,CAAgBqD,OAAhB,CAAL,EAA+B;AAC7B,iBAAKrD,UAAL,CAAgBqD,OAAhB,IAA2B,EAA3B;AACD;;AACD,cAAI,CAAC,KAAKrD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,CAAL,EAAyC;AACvC,iBAAKtD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,IAAqC,EAArC;AACD;;AACD,eAAKtD,UAAL,CAAgBqD,OAAhB,EAAyBC,QAAzB,IAAqC;AACnCzD,eAAG,YAAKwD,OAAL,iBAAmBC,QAAnB,CADgC;AAEnC9B,kBAAM,EAAEG,KAAK,CAAC4B,MAAN,CAAaL,KAFc;AAGnCzB,kBAAM,EAAE;AAH2B,WAArC;AAKD;;;mCAEU;AAAA;;AACT,eAAKtC,OAAL,CAAa8B,IAAb,GADS,CAGT;AACA;;AACA,eACE,IAAIuC,KAAK,GAAG,CADd,EAEEA,KAAK,GAAG,KAAKnE,IAAL,CAAUoD,GAAV,CAAc,YAAd,EAA4B,UAA5B,EAAwCR,MAFlD,EAGEuB,KAAK,EAHP,EAIE;AACA,gBAAMb,QAAQ,GAAG,KAAKtD,IAAL,CAAUoD,GAAV,CAAc,YAAd,EAA4B,UAA5B,EAAwCe,KAAxC,CAAjB;AACA,gBAAIhB,UAAU,GAAGG,QAAQ,CAACF,GAAT,CAAa,mBAAb,CAAjB;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,UAAU,CAAC,UAAD,CAAV,CAAuBP,MAA3C,EAAmDS,CAAC,EAApD,EAAwD;AACtD,kBAAMe,GAAG,GAAGjB,UAAU,CAAC,UAAD,CAAV,CAAuBE,CAAvB,CAAZ;;AAEA,kBAAI,KAAK1C,UAAL,CAAgBwD,KAAhB,CAAJ,EAA4B;AAC1B,oBAAI,KAAKxD,UAAL,CAAgBwD,KAAhB,EAAuBd,CAAvB,CAAJ,EAA+B;AAC7Be,qBAAG,CACAhB,GADH,CACO,OADP,EAEGA,GAFH,CAEO,KAFP,EAGGU,UAHH,CAGc,KAAKnD,UAAL,CAAgBwD,KAAhB,EAAuBd,CAAvB,EAA0B7C,GAHxC;AAIA4D,qBAAG,CACAhB,GADH,CACO,OADP,EAEGA,GAFH,CAEO,IAFP,EAGGU,UAHH,CAGc,KAAKnD,UAAL,CAAgBwD,KAAhB,EAAuBd,CAAvB,EAA0BlB,MAHxC;AAIAiC,qBAAG,CACAhB,GADH,CACO,OADP,EAEGA,GAFH,CAEO,IAFP,EAGGU,UAHH,CAGc,KAAKnD,UAAL,CAAgBwD,KAAhB,EAAuBd,CAAvB,EAA0BjB,MAHxC;AAID;AACF;AACF;;AACDe,sBAAU,CAACW,UAAX,CAAsBX,UAAU,CAACS,QAAjC;AACD,WAjCQ,CAkCT;AACA;AAEA;AACA;;;AACA,cAAIS,MAAM,CAACC,IAAP,CAAY,KAAKtD,gBAAjB,EAAmC4B,MAAnC,KAA8C,CAAlD,EAAqD;AACnD,iBAAK5C,IAAL,CAAUoD,GAAV,CAAc,UAAd,EAA0BmB,KAA1B;AACD,WAFD,MAEO;AACL,gBAAIC,KAAK,GAAG,CAAZ;;AACA,iBAAK,IAAIC,IAAT,IAAiB,KAAKzD,gBAAtB,EAAwC;AACtC,kBAAI,KAAKA,gBAAL,CAAsB0D,cAAtB,CAAqCD,IAArC,CAAJ,EAAgD,EAAED,KAAF;AACjD;;AACD,gBAAI,KAAKxD,gBAAL,CAAsBwD,KAAK,GAAG,CAA9B,CAAJ,EAAsC;AACpC,mBAAKxE,IAAL,CACGoD,GADH,CACO,UADP,EAEGA,GAFH,CAEO,KAFP,EAGGU,UAHH,CAGc,KAAK9C,gBAAL,CAAsBwD,KAAK,GAAG,CAA9B,EAAiChE,GAH/C;AAKA,mBAAKR,IAAL,CACGoD,GADH,CACO,UADP,EAEGA,GAFH,CAEO,MAFP,EAGGA,GAHH,CAGO,IAHP,EAIGU,UAJH,CAIc,KAAK9C,gBAAL,CAAsBwD,KAAK,GAAG,CAA9B,EAAiCrC,MAJ/C;AAMA,mBAAKnC,IAAL,CACGoD,GADH,CACO,UADP,EAEGA,GAFH,CAEO,MAFP,EAGGA,GAHH,CAGO,IAHP,EAIGU,UAJH,CAIc,KAAK9C,gBAAL,CAAsBwD,KAAK,GAAG,CAA9B,EAAiCpC,MAJ/C;AAKD;AACF,WAhEQ,CAiET;AACA;;;AAEA,cAAMuC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;AAEA,eAAK,IAAM3B,GAAX,IAAkB,KAAKjD,IAAL,CAAU6D,KAA5B,EAAmC;AACjC,gBAAIZ,GAAG,KAAK,QAAZ,EAAsB;AACpB,mBAAK,IAAII,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAG,KAAKrD,IAAL,CAAU6D,KAAV,CAAgBZ,GAAhB,EAAqBL,MAAzC,EAAiDS,GAAC,EAAlD,EAAsD;AACpDsB,wBAAQ,CAACE,MAAT,CAAgB5B,GAAhB,EAAqB,KAAKjD,IAAL,CAAU6D,KAAV,CAAgBZ,GAAhB,EAAqBI,GAArB,CAArB;AACD;AACF,aAJD,MAIO;AACL;AACAsB,sBAAQ,CAACE,MAAT,CAAgB5B,GAAhB,EAAqB6B,IAAI,CAACC,SAAL,CAAe,KAAK/E,IAAL,CAAU6D,KAAV,CAAgBZ,GAAhB,CAAf,CAArB;AACD;AACF;;AAED,eAAKxD,eAAL,CAAqBgH,SAArB,CAA+B9B,QAA/B,EAAyC,KAAKgB,SAA9C,EAAyDrE,SAAzD,CACE,UAACmB,GAAD,EAAS;AACP,mBAAI,CAACgD,cAAL,GAAsB,EAAtB,CADO,CAEP;;AACA,mBAAI,CAAC5F,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,mBAAI,CAAC1C,MAAL,CAAYkF,QAAZ,CAAqB,CAAC,WAAD,CAArB;AACD,WANH,EAOE,UAACnC,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,mBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WAXH;AAcA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;;;;;uBAjjBUkD,oB,EAAoB,2H,EAAA,+H,EAAA,kI,EAAA,iJ,EAAA,2I,EAAA,yH,EAAA,8H,EAAA,uH;AAAA,K;;;YAApBA,oB;AAAoB,uC;AAAA,e;AAAA,c;AAAA,+vE;AAAA;AAAA;AClBjC;;AACE;;AACE;;AAAsC;;AAAY;;AAClD;;AACE;;AACE;;AACE;;AACE;;AAKF;;AACF;;AAEA;;AAeA;;AAcA;;AACE;;AAWE;AAAA,mBAAgB,IAAAL,kBAAA,QAAhB;AAA0C,WAA1C;;AAEF;;AACF;;AACA;;AAkBA;;AAAgD;;AAAI;;AAAU;;AAAI;;AAClE;;AAyMF;;AACA;;AAeA;;AACE;;AAEE;AAAA,mBAAS,IAAAC,QAAA,EAAT;AAAmB,WAAnB;;AAIA;;;;;;AACF;;AACA;;AAKE;;;;;;AACF;;AACF;;AACF;;AACF;;AACF;;;;AAnTc;;AAAA,wGAAgC,SAAhC,EAAgC,sBAAhC;;AASJ;;AAAA,oFAAgB,SAAhB,EAAgB,gCAAhB,EAAgB,SAAhB,EAAgB,MAAhB,EAAgB,UAAhB,EAAgB,IAAhB,EAAgB,aAAhB,EAAgB,cAAhB,EAAgB,eAAhB,EAAgB,yDAAhB,EAAgB,YAAhB,EAAgB,MAAhB,EAAgB,SAAhB,EAAgB,oBAAhB,EAAgB,YAAhB,EAAgB,cAAhB;;AAeA;;AAAA,2FAAuB,SAAvB,EAAuB,gCAAvB,EAAuB,SAAvB,EAAuB,aAAvB,EAAuB,aAAvB,EAAuB,qBAAvB,EAAuB,eAAvB,EAAuB,yDAAvB,EAAuB,YAAvB,EAAuB,qBAAvB,EAAuB,SAAvB,EAAuB,2BAAvB,EAAuB,YAAvB,EAAuB,cAAvB;;AAeE;;AAAA,wFAAoB,SAApB,EAAoB,gCAApB,EAAoB,SAApB,EAAoB,UAApB,EAAoB,qBAApB,EAAoB,2BAApB,EAAoB,WAApB,EAAoB,wBAApB,EAAoB,aAApB,EAAoB,wBAApB,EAAoB,eAApB,EAAoB,oGAApB,EAAoB,YAApB,EAAoB,cAApB,EAAoB,UAApB,EAAoB,IAApB;;AAaU;;AAAA;;AAoBZ;;AAAA;;AAyMU;;AAAA;;AAoBV;;AAAA;;AAEA;;AAAA;;AAIA;;AAAA;;AAGA;;AAAA;;;;;;;;;;sEDpSGI,oB,EAAoB;cALhC,uDAKgC;eALtB;AACTH,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,+BAAD;AAHF,S;AAKsB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AElBjC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,QAAMoB,MAAM,GAAW,CACrB;AAAEC,UAAI,EAAE,EAAR;AAAYC,eAAS,EAAE;AAAvB,KADqB,EAErB;AAAED,UAAI,EAAE,KAAR;AAAeC,eAAS,EAAE;AAA1B,KAFqB,EAGrB;AAAED,UAAI,EAAE,UAAR;AAAoBC,eAAS,EAAE;AAA/B,KAHqB,CAAvB;;QAUaC,qB;;;;;YAAAA;;;;yBAAAA,qB;AAAqB,O;AAAA,gBAHvB,CAAC,6DAAaC,QAAb,CAAsBJ,MAAtB,CAAD,CAGuB,EAFtB,4DAEsB;;;;0HAArBG,qB,EAAqB;AAAA;AAAA,kBAFtB,4DAEsB;AAAA,O;AAFV,K;;;;;sEAEXA,qB,EAAqB;cAJjC,sDAIiC;eAJxB;AACRE,iBAAO,EAAE,CAAC,6DAAaD,QAAb,CAAsBJ,MAAtB,CAAD,CADD;AAERM,iBAAO,EAAE,CAAC,4DAAD;AAFD,S;AAIwB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsF1B;;;;;;AA0BE;;;;;;AACE;;;;;;AAyBF;;AAAM;;AAMJ;;;;;;AANI;;AAAA;;;;;;AAgBN;;AAAM;;AAMJ;;;;;;AANI;;AAAA;;;;;;AAWN;;AAAM;;AAA+B;;;;;;AAA/B;;AAAA;;;;;;AAUN;;AAAM;;AAA4C;;;;;;AAA5C;;AAAA;;;;;;AAUN;;AAAM;;AAAwC;;;;;;AAAxC;;AAAA;;;;;;AAUN;;AAAM;;AAAsB;;;;;;AAAtB;;AAAA;;;;;;AAYJ;;AACG;;AAA4B;;;;;;AAE3B;;AAAO;;;;AAFoB;;AAAA;;;;;;AAI/B;;AACG;;AAA2B;;;;;;AAE1B;;AACJ;;;;AAH8B;;AAAA;;;;;;AAI9B;;AACG;;AAA4B;;;;;;AAE3B;;AAAO;;;;AAFoB;;AAAA;;;;;;AAZjC;;AACE;;AAKA;;AAKA;;AAKF;;;;;;AAfgB;;AAAA;;AAKA;;AAAA;;AAKA;;AAAA;;;;;;;;;;;;AAWhB;;AAKE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AAA0B;;AAAQ;;AACpC;;AACA;;AACE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,2BAC8B,IAD9B,GACkC,oCADlC;AACkC;AAAA,SADlC;;AASA;;AAA0B;;AAA+B;;AAC3D;;AACA;;AACE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAMA;;AAA0B;;AAAY;;AACxC;;AACA;;AACE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAUA;;AAA0B;;AAExB;;AACJ;;AACA;;AACE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAUA;;AAA0B;;AAExB;;AACJ;;AAEA;;AACE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAUA;;AAA0B;;AAAS;;AACrC;;AAEA;;AACE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAMA;;AAA0B;;AAAM;;AAClC;;;;;;AAlFE,qKAAoC,SAApC,EAAoC,MAApC;;AAaA;;AAAA,0GAAoC,SAApC,EAAoC,oCAApC;;AAK0B;;AAAA;;AAI1B;;AAAA,oFAAkB,SAAlB,EAAkB,MAAlB;;AAaA;;AAAA,gHAA0C,SAA1C,EAA0C,2CAA1C;;AAK0B;;AAAA;;AAU1B;;AAAA,8GAAwC,SAAxC,EAAwC,oCAAxC;;AAK0B;;AAAA;;AAW1B;;AAAA;;AACA;;;;;;;;AA3MV;;AACE;;AAQE;AAAA;;AAAA;;AAAA;AAAA;;AAGA;;AAME;;AAYF;;AAEA;;AAOA;;AAKE;;AASF;;AAEA;;AAKE;;AASF;;AACA;;AACE;;AAGF;;AAEA;;AAKE;;AAGF;;AAEA;;AAKE;;AAGF;;AAGA;;AAIE;;AAGF;;AAEA;;AAME;;AAmBF;;AAEA;;AACE;;AAsFF;;AACF;;AACF;;;;;;AA1NI;;AAAA,gGAAuB,WAAvB,EAAuB,gBAAvB,EAAuB,YAAvB,EAAuB,aAAvB,EAAuB,OAAvB,EAAuB,YAAvB,EAAuB,YAAvB,EAAuB,IAAvB,EAAuB,eAAvB,EAAuB,iBAAvB;;AASE;;AAAA,8EAAY,UAAZ,EAAY,OAAZ,EAAY,WAAZ,EAAY,IAAZ,EAAY,QAAZ,EAAY,kDAAZ;;AAoBA;;AAAA,qFAAmB,QAAnB,EAAmB,yDAAnB,EAAmB,UAAnB,EAAmB,IAAnB;;AAOA;;AAAA,uFAAqB,QAArB,EAAqB,2DAArB,EAAqB,UAArB,EAAqB,IAArB;;AAgBA;;AAAA,yFAAuB,QAAvB,EAAuB,6DAAvB,EAAuB,UAAvB,EAAuB,IAAvB;;AAciB;;AAAA;;AAOjB;;AAAA,wFAAsB,QAAtB,EAAsB,kEAAtB,EAAsB,UAAtB,EAAsB,IAAtB;;AAUA;;AAAA,sFAAoB,UAApB,EAAoB,IAApB,EAAoB,QAApB,EAAoB,gEAApB;;AAYA;;AAAA;;AAQA;;AAAA,uFAAqB,OAArB,EAAqB,EAArB,EAAqB,QAArB,EAAqB,iEAArB,EAAqB,UAArB,EAAqB,IAArB;;AA0BiB;;AAAA,+EAAa,QAAb,EAAa,8BAAb;;;;;;;;AAwHf;;AAGE;;AAEE;AAAA;;AAAA;;AAAA,iBAAU,QAAAC,YAAA,KAAiB,oBAAjB,EAAuCnD,UAAvC,CAAkD,CAAlD,CAAV;AAA8D,SAA9D;;AAQF;;AACF;;;;;;AARI;;AAAA,4FAA0B,SAA1B,EAA0B,eAA1B,EAA0B,aAA1B,EAA0B,2BAA1B,EAA0B,SAA1B,EAA0B,yCAA1B,EAA0B,YAA1B,EAA0B,2BAA1B;;;;;;;;AAUJ;;AAGE;;AAEE;AAAA;;AAAA;;AAAA,iBAAU,QAAAmD,YAAA,KAAiB,eAAjB,EAAkCnD,UAAlC,CAA6C,CAA7C,CAAV;AAAyD,SAAzD;;AAQF;;AACF;;;;;;AARI;;AAAA,8FAA4B,SAA5B,EAA4B,oBAA5B,EAA4B,aAA5B,EAA4B,2BAA5B,EAA4B,SAA5B,EAA4B,8CAA5B,EAA4B,YAA5B,EAA4B,2BAA5B;;;;;;;;;;;;;;;;;AA0CR;;AAAA;;AACE;;AACE;;AAAO;;;;;;AAA2C;;AAClD;;AACE;;AAME;AAAA;;AAAA;;AAAA;AAAA;;AANF;;AAUA;;AAA4C;AAAA;;AAAA;;AAAA;AAAA;;AAA5C;;AACF;;AACF;;AACA;;AACF;;;;;;AAhBW;;AAAA;;AAQH;;AAAA,qGAA6B,SAA7B,EAA6B,eAA7B,EAA6B,UAA7B,EAA6B,qEAA7B;;AAI0C;;AAAA;;;;;;;;;;;;AAzGtD;;AACE;;AACE;;AAAsC;;AAExC;;AACA;;AAIE;AAAA;;AAAA;;AAAA,iBAAS,QAAAoD,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AASA;;AAgBA;;AAeF;;AACF;;AACF;;AAEA;;AACE;;AACE;;AACE;;AACE;;AAAoB;;;;;;AAElB;;AACJ;;AAEA;;AACE;;AACE;;AAGE;AAAA;;AAAA;;AAAA;AAAA,WAAuB,QAAvB,EAAuB;AAAA;;AAAA;;AAAA;AAAA,SAAvB;;AAHF;;AAMA;;AACE;;AAAA;;AACE;;AAIF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AAmBF;;AAEA;;AAAA;;AACE;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;;;;;AACF;;AACA;;AAGE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;;;;;AACF;;AACF;;AACF;;;;;;AA7GU;;AAAA,2FAAyB,SAAzB,EAAyB,cAAzB,EAAyB,OAAzB,EAAyB,sEAAzB,EAAyB,SAAzB,EAAyB,uCAAzB,EAAyB,YAAzB,EAAyB,2BAAzB;;AAQA;;AAAA;;AAgBA;;AAAA;;AAsBoB;;AAAA;;AAUhB;;AAAA;;AAeI;;AAAA;;AA4BZ;;AAAA;;AAOA;;AAAA;;;;;;;;AAON;;AACE;;AACE;;AAAuC;;AAEzC;;AACA;;AAIE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AACE;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;;;;;AACF;;AACA;;AAGE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;;;;;AACF;;AACF;;AACF;;;;AAVM;;AAAA;;AAOA;;AAAA;;;;;;;;AAON;;AACE;;AACE;;AAAsC;;AAExC;;AACA;;AAIE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AACE;;AAQE;AAAA;;AAAA;;AAAA;AAAA;;AAEF;;AACF;;AACA;;AACE;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;;;;;AACF;;AACA;;AAGE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;;;;;AACF;;AACF;;AACF;;;;;;AA3BM;;AAAA,mFAAiB,SAAjB,EAAiB,OAAjB,EAAiB,WAAjB,EAAiB,uBAAjB,EAAiB,aAAjB,EAAiB,cAAjB,EAAiB,YAAjB,EAAiB,cAAjB,EAAiB,UAAjB,EAAiB,IAAjB;;AAiBA;;AAAA;;AAOA;;AAAA;;;;;;;;AAON;;AACE;;AACE;;AAAuC;;AACzC;;AACA;;AAIE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AACE;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;;;;;AACF;;AACA;;AAGE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;;;;;AACF;;AACF;;AACF;;;;AAVM;;AAAA;;AAOA;;AAAA;;;;;;;;AAON;;AACE;;AACE;;AAAuC;;AAEzC;;AACA;;AAIE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AACE;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;;;;;AACF;;AACA;;AAGE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;;;;;AACF;;AACF;;AACF;;;;AAVM;;AAAA;;AAOA;;AAAA;;;;;;;;AAON;;AACE;;AACE;;AAAuC;;AAEzC;;AACA;;AAIE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AACE;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;;;;;AACF;;AACA;;AAGE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;;;;;AACF;;AACF;;AACF;;;;AAVM;;AAAA;;AAOA;;AAAA;;;;;;;;AAON;;AACE;;AACE;;AAAuC;;AAEzC;;AACA;;AAIE;AAAA;;AAAA;;AAAA,iBAAS,QAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AACE;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;;;;;AACF;;AACA;;AAGE;AAAA;;AAAA;;AAAA,iBAAS,SAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;;;;;AACF;;AACF;;AACF;;;;AAVM;;AAAA;;AAOA;;AAAA;;;;;;;;AAON;;AACE;;AACE;;AAAsC;;AAExC;;AACA;;AAIE;AAAA;;AAAA;;AAAA,iBAAS,SAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AACE;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;;;;;AACF;;AACA;;AAGE;AAAA;;AAAA;;AAAA,iBAAS,SAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;;;;;AACF;;AACF;;AACF;;;;AAVM;;AAAA;;AAOA;;AAAA;;;;;;;;AAON;;AACE;;AACE;;AAAsC;;AAExC;;AACA;;AAIE;AAAA;;AAAA;;AAAA,iBAAS,SAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AACE;;AAIE;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;;;;;AACF;;AACA;;AAGE;AAAA;;AAAA;;AAAA,iBAAS,SAAAA,QAAA,OAAT;AAAwB,SAAxB;;AAEA;;;;;;AACF;;AACF;;AACF;;;;AAVM;;AAAA;;AAOA;;AAAA;;;;;;;;QC9tBKC,iB;AAmBX,iCACU1H,eADV,EAEU2H,aAFV,EAGUxH,eAHV,EAIUyH,YAJV,EAKUxH,MALV,EAMUC,OANV,EAOUN,EAPV,EAQUO,MARV,EASUuH,KATV,EAUUC,eAVV,EAU0C;AAAA;;AAAA;;AAThC,aAAA9H,eAAA,GAAAA,eAAA;AACA,aAAA2H,aAAA,GAAAA,aAAA;AACA,aAAAxH,eAAA,GAAAA,eAAA;AACA,aAAAyH,YAAA,GAAAA,YAAA;AACA,aAAAxH,MAAA,GAAAA,MAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAN,EAAA,GAAAA,EAAA;AACA,aAAAO,MAAA,GAAAA,MAAA;AACA,aAAAuH,KAAA,GAAAA,KAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AA3BV,aAAAC,KAAA,GAAQ,EAAR;AACA,aAAAC,SAAA,GAAY,CAAZ;AACA,aAAAC,KAAA,GAAQ,EAAR;AACA,aAAAC,MAAA,GAAS,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAAT;AACA,aAAAC,MAAA,GAAS,CAAT;AACA,aAAAC,aAAA,GAAgB,EAAhB;AAkLA,aAAAZ,YAAA,GAAe,KAAKzH,EAAL,CAAQS,KAAR,CAAc;AAC3B6H,sBAAY,EAAE,CAAC,EAAD,CADa;AAE3BC,uBAAa,EAAE,CAAC,CAAD,CAFY;AAG3BC,4BAAkB,EAAE,CAAC,CAAD,CAHO;AAI3BC,mBAAS,EAAE;AAJgB,SAAd,CAAf;AAOA,aAAAC,OAAA,GAAU,IAAIC,IAAJ,EAAV;AACA,aAAAC,eAAA,GAAwB,IAAID,IAAJ,EAAxB;AAEA,aAAAE,SAAA,GAAY,KAAZ;AAsMA,aAAAC,cAAA,GAAiC;AAC/BC,cAAI,EAAE,KADyB;AAE/BC,4BAAkB,EAAE,UAFW;AAG/BC,iBAAO,EAAE;AACPC,iBAAK,EAAE;AACLC,yBAAW,EAAE;AADR;AADA;AAHsB,SAAjC;AA1WE,aAAKC,MAAL;AAEA,aAAKxH,OAAL,GAAe,KAAKxB,eAAL,CAAqByB,eAArB,CAAqCC,SAArC,CAA+C,UAACC,IAAD,EAAU;AACtE,iBAAI,CAACC,WAAL,GAAmBD,IAAnB;;AACA,cAAI,OAAI,CAACC,WAAL,IAAoB,OAAI,CAACA,WAAL,KAAqB,IAA7C,EAAmD;AACjD,mBAAI,CAACC,MAAL,GAAc,IAAd;AACD,WAFD,MAEO;AACL,mBAAI,CAACA,MAAL,GAAc,KAAd;AACD;AACF,SAPc,CAAf;AASA,aAAKoH,WAAL,GAAmB,KAAKpJ,eAAL,CAAqBqJ,cAArB,CAAoCxH,SAApC,CAA8C,UAACS,IAAD,EAAU;AACzE,cAAIA,IAAJ,EAAU;AACR,gBAAI,CAAC,OAAI,CAACgH,aAAN,IAAuBhH,IAA3B,EAAiC;AAC/B,qBAAI,CAACgH,aAAL,GAAqBhH,IAArB;AACD;AACF;AACF,SANkB,CAAnB;AAOD;;;;sCAEU;AACT,eAAKX,OAAL,CAAaM,WAAb;AACA,eAAKmH,WAAL,CAAiBnH,WAAjB;AACD;;;mCAEO;AAAA;;AACN,eAAK5B,OAAL,CAAa8B,IAAb;AAEA,eAAKnC,eAAL,CAAqBuJ,MAArB;AAEA,eAAKvJ,eAAL,CAAqBwJ,QAArB,CAA8B3H,SAA9B,CAAwC,UAAOS,IAAP;AAAA,mBAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAClDA,IADkD;AAAA;AAAA;AAAA;;AAEpD,2BAAKyF,KAAL,GAAazF,IAAb;AAEAA,0BAAI,CAACmH,IAAL,CAAU,UAACC,CAAD,EAAIC,CAAJ;AAAA,+BAAWD,CAAC,CAACE,MAAF,KAAaD,CAAC,CAACC,MAAf,GAAwB,CAAxB,GAA4B,CAACF,CAAC,CAACE,MAAH,GAAY,CAAC,CAAb,GAAiB,CAAxD;AAAA,uBAAV;AAEA,2BAAKC,YAAL,GAAoB,IAAI,qEAAJ,CAAsBvH,IAAtB,CAApB;AANoD;AAOnC,6BAAM,KAAKuH,YAAL,CAAkB9E,KAAlB,EAAN;;AAPmC;AAOpD,2BAAKiD,SAP+C;AASpD,2BAAK8B,WAAL,CAAiB;AACf3B,8BAAM,EAAE,CADO;AAEfF,6BAAK,EAAE,KAAKA;AAFG,uBAAjB;;AAToD,2BAchD,KAAKqB,aAd2C;AAAA;AAAA;AAAA;;AAe9CS,6BAf8C,GAepC,KAAKlC,KAAL,CAAWmC,aAAX,CAAyBC,aAAzB,CACZ,4CADY,CAfoC;AAkB9CC,iCAlB8C,GAkBhC,KAAKrC,KAAL,CAAWmC,aAAX,CAAyBC,aAAzB,CAChB,4CADgB,CAlBgC;AAsB9CE,4BAtB8C,GAsBrC,KAAKb,aAAL,CAAmBnB,MAAnB,GAA4B,EAtBS;;AAuBlD,2BAASzD,KAAT,GAAiB,CAAjB,EAAoBA,KAAK,GAAGyF,MAA5B,EAAoCzF,KAAK,EAAzC,EAA6C;AAC3CqF,+BAAO,CAACK,KAAR;AACD;;AAzBiD,uDA0B3CF,WAAW,CAACE,KAAZ,EA1B2C;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAhB;AAAA,WAAxC;AA+BA,eAAK/J,OAAL,CAAauC,IAAb;AACD;;;yCAEgB;AACf,eAAK5C,eAAL,CAAqBqK,UAArB,CAAgC,KAAKC,cAArC;AACD;;;oCAEiBzH,K,EAAO;;;;;;AACvB,yBAAKyH,cAAL,GAAsBzH,KAAtB;;yBAEI,KAAKgH,Y;;;;;;AACc,2BAAM,KAAKA,YAAL,CAAkBU,KAAlB,CAAwB1H,KAAxB,CAAN;;;AAArB,yBAAKuF,a;;;;;;;;;AAER;;;sCAEmBoC,Y,EAAc;;;;;;AAChC,yBAAKpC,aAAL,GAAqB,KAAKL,KAA1B;;AACA,wBAAIyC,YAAY,KAAK,EAArB,EAAyB;AACvB,2BAAKpC,aAAL,GAAqB,KAAKL,KAAL,CAAW0C,MAAX,CACnB,UAACC,IAAD,EAAS;;;AACP,+BAAAA,IAAI,CAAC/J,IAAL,CAAUgK,WAAV,GAAwBC,QAAxB,CAAiCJ,YAAjC,MAA8C,MAC9CE,IAAI,CAAC5J,QADyC,MACjC,IADiC,IACjC,aADiC,GACjC,MADiC,GACjC,GAAEE,EAAF,CAAK2J,WAAL,GAAmBC,QAAnB,CAA4BJ,YAA5B,CADb,MACsD,MACtDE,IAAI,CAACG,OADiD,MAC1C,IAD0C,IAC1C,aAD0C,GAC1C,MAD0C,GAC1C,GAAElK,IAAF,CAAOgK,WAAP,GAAqBC,QAArB,CAA8BJ,YAA9B,CAFZ,MAEuD,MACvDE,IAAI,CAACI,KADkD,MAC7C,IAD6C,IAC7C,aAD6C,GAC7C,MAD6C,GAC7C,GAAEnK,IAAF,CAAOgK,WAAP,GAAqBC,QAArB,CAA8BJ,YAA9B,CAHV;AAGqD,uBALpC,CAArB;AAOD;;AAED,yBAAKX,YAAL,GAAoB,IAAI,qEAAJ,CAAsB,KAAKzB,aAA3B,CAApB;;AACiB,2BAAM,KAAKyB,YAAL,CAAkB9E,KAAlB,EAAN;;;AAAjB,yBAAKiD,S;AACL,yBAAK8B,WAAL,CAAiB;AACf3B,4BAAM,EAAE,CADO;AAEfF,2BAAK,EAAE,KAAKA;AAFG,qBAAjB;;;;;;;;;AAID;;;wCAKe;AAAA;;AACd,eAAK5H,OAAL,CAAa8B,IAAb;AAEA,eAAKwF,aAAL,CAAmB4B,MAAnB;AAEA,eAAK5B,aAAL,CAAmBoD,MAAnB,CAA0BlJ,SAA1B,CAAoC,UAACS,IAAD,EAAU;AAC5C,gBAAIA,IAAJ,EAAU;AACR,qBAAI,CAAC0I,gBAAL,GAAwB1I,IAAI,CAACE,GAAL,CAAS,UAACC,CAAD,EAAO;AACtC,uBAAO;AACL1B,qBAAG,EAAE0B,CAAC,CAAC,KAAD,CADD;AAELC,wBAAM,YAAKD,CAAC,CAAC,MAAD,CAAN,CAFD;AAGLE,wBAAM;AAHD,iBAAP;AAKD,eANuB,CAAxB;AAOD;AACF,WAVD;AAYA,eAAKtC,OAAL,CAAauC,IAAb;AACD;;;oCACWC,K,EAAO;AACjB,cAAIA,KAAJ,EAAW;AACT,iBAAKoI,eAAL,GAAuBpI,KAAK,CAAC9B,GAA7B;AACD;AACF,S,CACD;;;;4CAEoB;AAAA;;AAClB,eAAKV,OAAL,CAAa8B,IAAb;AAEA,eAAKsF,QAAL,CAAc7E,IAAd;AACA,eAAK5C,eAAL,CACGkL,iBADH,CACqB,KAAKC,MAD1B,EACkC,KAAKF,eADvC,EAEGpJ,SAFH,CAGI,UAACmB,GAAD,EAAS;AACP,mBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,mBAAI,CAAC+E,KAAL,GAAa,EAAb;;AAEA,mBAAI,CAAC/H,eAAL,CAAqBuJ,MAArB;AACD,WARL,EASI,UAAClG,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,mBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WAbL;AAgBA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;kCAGSwI,Q,EAA4B/E,E,EAAI;AACxC,eAAK8E,MAAL,GAAc9E,EAAd;AACA,eAAKoB,QAAL,GAAgB,KAAKG,YAAL,CAAkBzF,IAAlB,CAAuBiJ,QAAvB,CAAhB;AACD;;;iCAaQ;AACP,cAAIC,GAAG,GAAG,IAAI3C,IAAJ,EAAV;AACA,cAAI4C,KAAK,GAAG,CAAC,MAAMD,GAAG,CAACE,QAAJ,EAAP,EAAuBC,KAAvB,CAA6B,CAAC,CAA9B,CAAZ;AACA,cAAIC,OAAO,GAAG,CAAC,MAAMJ,GAAG,CAACK,UAAJ,EAAP,EAAyBF,KAAzB,CAA+B,CAAC,CAAhC,CAAd;AACA,cAAIG,GAAG,GAAGL,KAAK,GAAG,GAAR,GAAcG,OAAxB;AACA,eAAKG,IAAL,GAAYD,GAAZ;AACD;;;qCACY9I,K,EAAO;AAClB,cAAI,CAACA,KAAK,CAAC4B,MAAN,CAAaoH,OAAlB,EAA2B;AACzB,iBAAKrE,YAAL,CAAkB7D,GAAlB,CAAsB,WAAtB,EAAmCU,UAAnC,CAA8CyH,SAA9C;AACD;AACF;;;sCAEa;AAAA;;AACZ,eAAKzL,OAAL,CAAa8B,IAAb;AAEA,eAAKsF,QAAL,CAAc7E,IAAd;AACA,eAAK5C,eAAL,CAAqB+L,OAArB,CAA6B,KAAKZ,MAAlC,EAA0CtJ,SAA1C,CACE,UAACmB,GAAD,EAAS;AACP,mBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,mBAAI,CAAC+E,KAAL,GAAa,EAAb;;AAEA,mBAAI,CAAC/H,eAAL,CAAqBuJ,MAArB;;AACA,mBAAI,CAACjJ,MAAL,CAAYkF,QAAZ,CAAqB,2BAAoBxC,GAAG,CAAC,MAAD,CAAH,CAAYjC,GAAhC,EAArB;AACD,WAPH,EAQE,UAACsC,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,mBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WAZH;AAeA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;sCAEa;AAAA;;AACZ,eAAKvC,OAAL,CAAa8B,IAAb;AAEA,eAAKsF,QAAL,CAAc7E,IAAd;;AAEA,cAAI,KAAKgG,SAAT,EAAoB;AAClB,gBAAIJ,SAAS,GAAG,IAAIE,IAAJ,CACd,KAAKC,eAAL,CAAqBqD,WAArB,EADc,EAEd,KAAKrD,eAAL,CAAqBsD,QAArB,EAFc,EAGd,KAAKtD,eAAL,CAAqBuD,OAArB,EAHc,EAIdC,QAAQ,CAAC,KAAKP,IAAL,CAAUQ,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAD,CAJM,EAKdD,QAAQ,CAAC,KAAKP,IAAL,CAAUQ,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAD,CALM,EAMd,CANc,CAAhB;AASA,iBAAK5E,YAAL,CAAkB7D,GAAlB,CAAsB,WAAtB,EAAmCU,UAAnC,CAA8CmE,SAA9C;AACD;;AAED,eAAKxI,eAAL,CACGqM,WADH,CACe,KAAK7E,YAAL,CAAkBpD,KADjC,EACwC,KAAK+G,MAD7C,EAEGtJ,SAFH,CAGI,UAACmB,GAAD,EAAS;AACP,mBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,mBAAI,CAAC+E,KAAL,GAAa,EAAb;;AAEA,mBAAI,CAACP,YAAL,CAAkB1C,KAAlB;;AACA,mBAAI,CAAC9E,eAAL,CAAqBuJ,MAArB;AACD,WATL,EAUI,UAAClG,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,mBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WAdL;AAiBA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;yCAEgB;AAAA;;AACf,eAAKvC,OAAL,CAAa8B,IAAb;AAEA,eAAKsF,QAAL,CAAc7E,IAAd;AACA,eAAK5C,eAAL,CAAqBsM,cAArB,CAAoC,KAAKnB,MAAzC,EAAiDtJ,SAAjD,CACE,UAACmB,GAAD,EAAS;AACP,mBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,mBAAI,CAAC+E,KAAL,GAAa,EAAb;;AAEA,mBAAI,CAAC/H,eAAL,CAAqBuJ,MAArB;AACD,WANH,EAOE,UAAClG,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,mBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WAXH;AAcA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;wCAEe;AAAA;;AACd,eAAKvC,OAAL,CAAa8B,IAAb;AAEA,eAAKsF,QAAL,CAAc7E,IAAd;AACA,eAAK5C,eAAL,CAAqBuM,SAArB,CAA+B,KAAKpB,MAApC,EAA4CtJ,SAA5C,CACE,UAACmB,GAAD,EAAS;AACP,mBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,mBAAI,CAAChD,eAAL,CAAqBuJ,MAArB;AACD,WAJH,EAKE,UAAClG,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,mBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WATH;AAYA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;0CAEiB;AAAA;;AAChB,eAAKvC,OAAL,CAAa8B,IAAb;AAEA,eAAKsF,QAAL,CAAc7E,IAAd;AACA,eAAK5C,eAAL,CAAqBwM,WAArB,CAAiC,KAAKrB,MAAtC,EAA8CtJ,SAA9C,CACE,UAACmB,GAAD,EAAS;AACP,mBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,mBAAI,CAAC+E,KAAL,GAAa,EAAb;;AAEA,mBAAI,CAAC/H,eAAL,CAAqBuJ,MAArB;AACD,WANH,EAOE,UAAClG,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,mBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WAXH;AAcA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;4CAEmB;AAAA;;AAClB,eAAKvC,OAAL,CAAa8B,IAAb;AAEA,eAAKsF,QAAL,CAAc7E,IAAd;AACA,eAAK5C,eAAL,CAAqByM,aAArB,CAAmC,KAAKtB,MAAxC,EAAgDtJ,SAAhD,CACE,UAACmB,GAAD,EAAS;AACP,mBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,mBAAI,CAAC+E,KAAL,GAAa,EAAb;;AAEA,mBAAI,CAAC/H,eAAL,CAAqBuJ,MAArB;AACD,WANH,EAOE,UAAClG,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,mBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WAXH;AAcA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;sCAEa;AAAA;;AACZ,eAAKvC,OAAL,CAAa8B,IAAb;AAEA,eAAKsF,QAAL,CAAc7E,IAAd;AACA,eAAK5C,eAAL,CAAqB0M,OAArB,CAA6B,KAAKvB,MAAlC,EAA0CtJ,SAA1C,CACE,UAACmB,GAAD,EAAS;AACP,mBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,mBAAI,CAAC+E,KAAL,GAAa,EAAb;;AAEA,mBAAI,CAAC/H,eAAL,CAAqBuJ,MAArB;AACD,WANH,EAOE,UAAClG,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,mBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WAXH;AAcA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;2CAEkB;AAAA;;AACjB,eAAKvC,OAAL,CAAa8B,IAAb;AAEA,eAAKsF,QAAL,CAAc7E,IAAd;AACA,eAAK5C,eAAL,CAAqB2M,YAArB,CAAkC,KAAKxB,MAAvC,EAA+CtJ,SAA/C,CACE,UAACmB,GAAD,EAAS;AACP,mBAAI,CAAC5C,MAAL,CAAY6C,IAAZ,CAAiBD,GAAG,CAAC,SAAD,CAApB,EAAiC,MAAjC;;AACA,mBAAI,CAAC+E,KAAL,GAAa,EAAb;;AAEA,mBAAI,CAAC/H,eAAL,CAAqBuJ,MAArB;AACD,WANH,EAOE,UAAClG,KAAD,EAAW;AACTuD,mBAAO,CAACC,GAAR,CAAYxD,KAAZ;;AACA,mBAAI,CAACjD,MAAL,CAAYiD,KAAZ,CAAkBA,KAAK,CAACA,KAAN,CAAYC,OAA9B,EAAuC,OAAvC,EAFS,CAGT;;AACD,WAXH;AAcA,eAAKjD,OAAL,CAAauC,IAAb;AACD;;;iCAWQkG,I,EAA2B8D,G,EAAc;AAChD,eAAK/D,cAAL,CAAoBC,IAApB,GAA2BA,IAA3B;;AACA,cAAI8D,GAAJ,EAAS;AACP,iBAAK/D,cAAL,CAAoBG,OAApB,CAA4BC,KAA5B,CAAkCC,WAAlC,GAAgD0D,GAAhD;AACD;;AACD,eAAK9E,eAAL,CAAqB+E,IAArB,CAA0B,KAAKhE,cAA/B,EAA+C,UAA/C,EAA2DhH,SAA3D,CAAqE,YAAM,CACzE;AACD,WAFD;AAGA,eAAKiG,eAAL,CAAqBnE,GAArB,CAAyB,KAAKkF,cAA9B,EAA8ChH,SAA9C,CAAwD,UAACiL,OAAD,EAAa,CACpE,CADD;AAED;;;;;;;uBA5ZUpF,iB,EAAiB,kI,EAAA,qI,EAAA,2I,EAAA,mI,EAAA,yH,EAAA,8H,EAAA,2H,EAAA,wH,EAAA,yH,EAAA,+H;AAAA,K;;;YAAjBA,iB;AAAiB,mC;AAAA,e;AAAA,c;AAAA,khJ;AAAA;AAAA;;;AD3B9B;;AACE;;AACE;;AACE;;AACE;;AAAM;;;;;;AAAwC;;AAChD;;AACA;;AACE;;AACE;;AACE;;AACE;;AAQE;;AAA0B;;AAAI;;AAChC;;AACA;;AACE;;AACE;;AACF;;AACA;;AACE;;;;;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACG;;;;;;;;;;AACsC;;AAE3C;;AACF;;AACF;;AACA;;AACE;;AACE;;AAIE;;AAIG;;;;;;AAA0C;;AAE7C;;AACE;;AAMA;;AACE;AAAA;;AAAA;;AAAA,mBAAS,IAAAqF,aAAA,WAAT;AAA0C,WAA1C;;AAGA;;AAAwB;;;;;;AAEtB;;AACF;;AAAM;;AAA0B;;AAAM;;AAAI;;AAC5C;;AACA;;AACE;AAAA;;AAAA;;AAAS,gBAAAA,aAAA,CAAc,EAAd;AAAmB,mBAAF,YAAuB,EAArB;AAAuB,WAAnD;;AAGA;;AAAwB;;;;;;AAEtB;;AACF;;AAAM;;AAA0B;;AAAK;;AAAI;;AAC3C;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AAEA;;AACE;;AAAiC;AAAA,mBAAS,IAAAC,QAAA,CAAS,MAAT,CAAT;AAAyB,WAAzB;;AAC/B;;;;;;AACF;;AAYF;;AAEA;;AACE;;AACE;;AACF;;AACF;;AACF;;AACF;;AAEA;;AAkOA;;AAqIA;;AAoCA;;AAiDA;;AAmCA;;AAoCA;;AAoCA;;AAoCA;;AAoCA;;;;;;AAvtBc;;AAAA;;AAkBI;;AAAA;;AAGA;;AAAA;;AAOD;;AAAA;;AACA;;AAAA;;AAgBA;;AAAA;;AAayB;;AAAA;;AASA;;AAAA;;AAclC;;AAAA;;AAiBc;;AAAA;;;;;;;;;;sEC3ETtF,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACT/B,kBAAQ,EAAE,cADD;AAETC,qBAAW,EAAE,2BAFJ;AAGTC,mBAAS,EAAE,CAAC,2BAAD;AAHF,S;AAKmB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3B9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAuCaoH,c;;;;;YAAAA;;;;yBAAAA,c;AAAc,O;AAAA,gBAfhB,CACP,4DADO,EAEP,8EAFO,EAGP,0DAHO,EAIP,2GAJO,EAKP,oEAAgBC,OAAhB,EALO,EAMP,4EAAmBA,OAAnB,EANO,EAOP,oEAAcA,OAAd,EAPO,EAQP,gEAAYA,OAAZ,EARO,EASP,6DATO,EAUP,4DAVO,EAWP,mEAXO,CAegB;;;;0HAAdD,c,EAAc;AAAA,uBAhBV,sEAgBU,EAhBS,uFAgBT,EAhB8B,0FAgB9B;AAhBkD,kBAEzE,4DAFyE,EAGzE,8EAHyE,EAIzE,0DAJyE,EAKzE,2GALyE,EAKzD,mEALyD,EAKzD,2EALyD,EAKzD,mEALyD,EAKzD,+DALyD,EAUzE,6DAVyE,EAWzE,4DAXyE,EAYzE,mEAZyE;AAgBlD,O;AAJX,K;;;;;sEAIHA,c,EAAc;cAjB1B,sDAiB0B;eAjBjB;AACRE,sBAAY,EAAE,CAAC,sEAAD,EAAoB,uFAApB,EAAyC,0FAAzC,CADN;AAER7F,iBAAO,EAAE,CACP,4DADO,EAEP,8EAFO,EAGP,0DAHO,EAIP,2GAJO,EAKP,oEAAgB4F,OAAhB,EALO,EAMP,4EAAmBA,OAAnB,EANO,EAOP,oEAAcA,OAAd,EAPO,EAQP,gEAAYA,OAAZ,EARO,EASP,6DATO,EAUP,4DAVO,EAWP,mEAXO,CAFD;AAeRE,iBAAO,EAAE,CAAC,oEAAD;AAfD,S;AAiBiB,Q","file":"pages-products-products-module-es5.js","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { FormBuilder, Validators, FormArray } from '@angular/forms';\nimport { Router } from '@angular/router';\n\nimport { ToastrService } from 'ngx-toastr';\nimport { NgxSpinnerService } from 'ngx-spinner';\n\nimport { InputSelectItem } from 'src/app/models/InputSelectItem';\n\nimport { LanguageService } from '../../../services/language.service';\nimport { Subscription } from 'rxjs';\n\nimport { ProductsService } from '../products.service';\nimport { ProductAttributesService } from '../../product-attributes/product-attributes.service';\nimport { CategoriesService } from '../../categories/categories.service';\n\n@Component({\n  selector: 'app-add-product',\n  templateUrl: './add-product.component.html',\n  styleUrls: ['./add-product.component.scss'],\n})\nexport class AddProductComponent implements OnInit, OnDestroy {\n  photos;\n\n  private langSub: Subscription;\n  currentLang;\n  arabic: boolean;\n\n  constructor(\n    private fb: FormBuilder,\n    private productsService: ProductsService,\n    private productAttributeService: ProductAttributesService,\n    private categoriesService: CategoriesService,\n    private languageService: LanguageService,\n    private toastr: ToastrService,\n    private spinner: NgxSpinnerService,\n    private router: Router\n  ) {\n    this.langSub = this.languageService.currentLanguage.subscribe((lang) => {\n      this.currentLang = lang;\n      if (this.currentLang && this.currentLang === 'ar') {\n        this.arabic = true;\n      } else {\n        this.arabic = false;\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.langSub.unsubscribe();\n  }\n\n  form = this.fb.group({\n    photos: this.fb.array([]),\n    name: ['', Validators.required],\n    description: ['', Validators.required],\n    category: this.fb.group({\n      _id: [],\n      name: this.fb.group({\n        en: [],\n        ar: [],\n      }),\n    }),\n\n    properties: this.fb.array([\n      this.fb.group({\n        price: [0, Validators.required],\n        qty: [0, Validators.required],\n        productAttributes: this.fb.array([]),\n      }),\n    ]),\n  });\n\n  ngOnInit(): void {\n    this.getbaseCategoriesList();\n  }\n\n  // Start select dropdown\n  baseCategoryDropDown: InputSelectItem[];\n  subCategories = [];\n  selectedCategory = {};\n  selectedCategoryAttributes = [];\n  getbaseCategoriesList() {\n    this.spinner.show();\n    this.categoriesService.getBaseCategories();\n\n    this.categoriesService.baseCategories.subscribe((data) => {\n      if (data) {\n        this.baseCategoryDropDown = data.map((x) => {\n          return {\n            _id: x['_id'],\n            nameEn: `${x['name']['en']}`,\n            nameAr: `${x['name']['ar']}`,\n          };\n        });\n      }\n    });\n    this.spinner.hide();\n  }\n  selectBaseCategory(event) {\n    this.selectedCategory = {};\n    this.subCategories = [];\n    this.resetProductAttributes();\n\n    if (event) {\n      this.selectedCategory = {};\n      this.selectedCategory[0] = event;\n\n      return this.categoriesService.getOne(event._id).subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n\n          if (res['data'].categories) {\n            if (res['data'].categories.length > 0) {\n              this.subCategories[0] = res['data'].categories.map((x) => {\n                return {\n                  _id: x['_id'],\n                  nameEn: `${x['name']['en']}`,\n                  nameAr: `${x['name']['ar']}`,\n                };\n              });\n            }\n          }\n\n          if (res['data'].productAttributes) {\n            this.selectedCategoryAttributes = res['data'].productAttributes;\n            this.getproductAttributesList(res['data'].productAttributes);\n          }\n        },\n        (error) => {\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n    } else {\n      this.selectedCategory = {};\n      this.subCategories = [];\n      this.resetProductAttributes();\n    }\n  }\n  // End select dropdown\n\n  selectSubCategory(fieldIndex, event) {\n    this.spinner.show();\n\n    this.resetProductAttributes();\n    // delete all next selected categories to index\n    for (const key in this.selectedCategory) {\n      if (key > fieldIndex + 1) {\n        delete this.selectedCategory[key];\n      }\n    }\n\n    // delete all next subcategories\n    this.subCategories.splice(fieldIndex + 1);\n\n    if (event) {\n      // selected category of index = event\n      this.selectedCategory[fieldIndex + 1] = event;\n\n      this.categoriesService.getOne(event._id).subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n          if (res['data'].categories) {\n            if (res['data'].categories.length > 0) {\n              this.subCategories[fieldIndex + 1] = res['data'].categories.map(\n                (x) => {\n                  return {\n                    _id: x['_id'],\n                    nameEn: `${x['name']['en']}`,\n                    nameAr: `${x['name']['ar']}`,\n                  };\n                }\n              );\n            }\n          }\n          if (res['data'].productAttributes) {\n            this.selectedCategoryAttributes = res['data'].productAttributes;\n            this.getproductAttributesList(res['data'].productAttributes);\n          }\n        },\n        (error) => {\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n    } else {\n      // selected category of index = event\n      delete this.selectedCategory[fieldIndex + 1];\n    }\n\n    this.spinner.hide();\n  }\n  // End select dropdown\n\n  // Start select dropdown\n  // dropdown lists for product attributes\n  attributesDropDown: [{ values: InputSelectItem[] }] = [{ values: [] }];\n\n  getproductAttributesList(attributes) {\n    const properties = this.form.get('properties') as FormArray;\n    for (let i = 0; i < properties['controls'].length; i++) {\n      const property = properties['controls'][i];\n      this.setArrayInGroup(property, attributes);\n    }\n  }\n\n  resetProductAttributes() {\n    this.attributesDropDown = [{ values: [] }];\n    for (let i = 0; i < this.form.get('properties')['controls'].length; i++) {\n      let productAttributes = this.form\n        .get('properties')\n        ['controls'][i].get('productAttributes') as FormArray;\n      while (productAttributes.length !== 0) {\n        productAttributes.removeAt(0);\n      }\n    }\n  }\n\n  addProperty() {\n    const properties = this.form.get('properties') as FormArray;\n    if (\n      properties['controls'][properties.length - 1].valid &&\n      this.selectedCategoryAttributes.length > 0\n    ) {\n      properties.push(\n        this.fb.group({\n          price: [0, Validators.required],\n          qty: [0, Validators.required],\n          productAttributes: this.fb.array([]),\n        })\n      );\n\n      this.setArrayInGroup(\n        properties['controls'][properties.length - 1],\n        this.selectedCategoryAttributes\n      );\n    }\n  }\n\n  removeProperty(ind) {\n    const properties = this.form.get('properties') as FormArray;\n    if (properties.controls.length > 1) {\n      properties.removeAt(ind);\n    }\n  }\n\n  setArrayInGroup(group, attributes) {\n    let productAttributes = group.get('productAttributes') as FormArray;\n    for (let i = 0; i < attributes.length; i++) {\n      this.attributesDropDown[i] = { values: [] };\n\n      // add product attributes to form\n      productAttributes.controls[i] = this.fb.group({\n        name: this.fb.group({\n          en: ['', Validators.required],\n          ar: [''],\n        }),\n        value: this.fb.group({\n          _id: ['', Validators.required],\n          en: ['', Validators.required],\n          ar: [''],\n        }),\n      });\n\n      productAttributes.controls[i]\n        .get('name')\n        .get('en')\n        .patchValue(attributes[i]['name']['en']);\n      productAttributes.controls[i]\n        .get('name')\n        .get('ar')\n        .patchValue(attributes[i]['name']['ar']);\n\n      // list of product attributes values to dropdown fields\n      for (\n        let valueIndex = 0;\n        valueIndex < attributes[i].values.length;\n        valueIndex++\n      ) {\n        this.attributesDropDown[i].values.push({\n          _id: attributes[i].values[valueIndex]['_id'],\n          nameEn: attributes[i].values[valueIndex]['en'],\n          nameAr: attributes[i].values[valueIndex]['ar'],\n        });\n      }\n    }\n  }\n\n  properties = [];\n  selectProductAttribute(event, propInd, attIndex) {\n    if (!this.properties[propInd]) {\n      this.properties[propInd] = [];\n    }\n    if (!this.properties[propInd][attIndex]) {\n      this.properties[propInd][attIndex] = [];\n    }\n    this.properties[propInd][attIndex] = event;\n  }\n\n  selectProductAttributeText(event, propInd, attIndex) {\n    if (!this.properties[propInd]) {\n      this.properties[propInd] = [];\n    }\n    if (!this.properties[propInd][attIndex]) {\n      this.properties[propInd][attIndex] = [];\n    }\n    this.properties[propInd][attIndex] = {\n      _id: `${propInd} ff ${attIndex}`,\n      nameEn: event.target.value,\n      nameAr: '',\n    };\n  }\n  // End select dropdown\n\n  onSubmit() {\n    this.spinner.show();\n    //** Start product attributes  */ */ */\n    //** adding values to product attributes form array controls */ */ */\n    for (\n      let index = 0;\n      index < this.form.get('properties')['controls'].length;\n      index++\n    ) {\n      const property = this.form.get('properties')['controls'][index];\n      let attributes = property.get('productAttributes') as FormArray;\n      for (let i = 0; i < attributes['controls'].length; i++) {\n        const att = attributes['controls'][i];\n        if (this.properties[index]) {\n          if (this.properties[index][i]) {\n            att\n              .get('value')\n              .get('_id')\n              .patchValue(this.properties[index][i]._id);\n            att\n              .get('value')\n              .get('en')\n              .patchValue(this.properties[index][i].nameEn);\n            att\n              .get('value')\n              .get('ar')\n              .patchValue(this.properties[index][i].nameAr);\n          }\n        }\n      }\n      attributes.patchValue(attributes.controls);\n    }\n    // adding values to product attributes form array controls\n    // End product attributes\n\n    /////////////////////////\n    // Start category\n    if (Object.keys(this.selectedCategory).length === 0) {\n      this.form.get('category').reset();\n    } else {\n      var count = 0;\n      for (var prop in this.selectedCategory) {\n        if (this.selectedCategory.hasOwnProperty(prop)) ++count;\n      }\n      if (this.selectedCategory[count - 1]) {\n        this.form\n          .get('category')\n          .get('_id')\n          .patchValue(this.selectedCategory[count - 1]._id);\n\n        this.form\n          .get('category')\n          .get('name')\n          .get('en')\n          .patchValue(this.selectedCategory[count - 1].nameEn);\n\n        this.form\n          .get('category')\n          .get('name')\n          .get('ar')\n          .patchValue(this.selectedCategory[count - 1].nameAr);\n      }\n    }\n    // End category\n    /////////////////////////\n\n    const formData = new FormData();\n\n    for (const key in this.form.value) {\n      if (key === 'photos') {\n        for (let i = 0; i < this.form.value[key].length; i++) {\n          formData.append(key, this.form.value[key][i]);\n        }\n      } else {\n        // contains object\n        formData.append(key, JSON.stringify(this.form.value[key]));\n      }\n    }\n\n    this.productsService.addOne(formData).subscribe(\n      (res) => {\n        this.photos = [];\n        this.form.reset();\n        this.toastr.info(res['message'], 'Info');\n        this.router.navigate(['/products']);\n        this.spinner.hide();\n      },\n      (error) => {\n        //** */\n        for (\n          let index = 0;\n          index < this.form.get('properties')['controls'].length;\n          index++\n        ) {\n          const property = this.form.get('properties')['controls'][index];\n          let attributes = property.get('productAttributes') as FormArray;\n          while (attributes.length !== 0) {\n            attributes.removeAt(0);\n          }\n        }\n        //** */\n\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n        this.spinner.hide();\n      }\n    );\n    this.spinner.hide();\n  }\n}\n","<ngx-spinner></ngx-spinner>\n<div class=\"grid-center-noGutter\">\n  <div class=\"col-20_sm-22_xs-23 grid-center-noGutter content\">\n    <div class=\"title col-24 grid-center\">\n      {{ \"add\" | lowercase | translate }}\n      {{ \"Product\" | lowercase | translate }}\n    </div>\n    <div class=\"form col-23\">\n      <div class=\"grid-middle-spaceBetween-noGutter\">\n        <div class=\"form-group grid-center-middle-noGutter col-24\">\n          <div class=\"col-24 grid-center\">\n            <app-upload-multi-photos\n              [photos]=\"photos\"\n              [control]=\"form.get('photos')\"\n            >\n            </app-upload-multi-photos>\n          </div>\n        </div>\n\n        <app-input-text\n          class=\"col-11_sm-24\"\n          [label]=\"'Name'\"\n          [labelAr]=\"'الاسم'\"\n          [fieldId]=\"'name'\"\n          [required]=\"true\"\n          type=\"text\"\n          [placeholder]=\"'Product Name'\"\n          [placeholderAr]=\"'اسم المنتج'\"\n          [tooltipMsg]=\"'Name'\"\n          [control]=\"form.get('name')\"\n          [fieldClass]=\"'col-18_md-24'\"\n        >\n        </app-input-text>\n        <app-textarea\n          class=\"col-11_sm-24 grid-noGutter\"\n          [label]=\"'Description'\"\n          [labelAr]=\"'الوصف'\"\n          [fieldId]=\"'description'\"\n          type=\"text\"\n          [placeholder]=\"'Product description'\"\n          [placeholderAr]=\"'وصف المنتج'\"\n          [tooltipMsg]=\"'Product description'\"\n          [control]=\"form.get('description')\"\n          [fieldClass]=\"'col-18_md-24'\"\n        >\n        </app-textarea>\n\n        <div class=\"col-24 grid-noGutter\">\n          <app-select\n            class=\"col-11_sm-24\"\n            [label]=\"'Category'\"\n            [labelAr]=\"'القسم'\"\n            [fieldId]=\"'category'\"\n            [ItemsList]=\"baseCategoryDropDown\"\n            [placeholder]=\"'Choose parent category'\"\n            [placeholderAr]=\"'اختر القسم الرئيسي'\"\n            [fieldClass]=\"'col-18_md-24'\"\n            [required]=\"true\"\n            (itemselected)=\"selectBaseCategory($event)\"\n          >\n          </app-select>\n        </div>\n        <ng-container *ngFor=\"let category of subCategories; index as i\">\n          <div class=\"col-24 grid-noGutter\">\n            <app-select\n              class=\"col-11_sm-24\"\n              [label]=\"'sub category'\"\n              [labelAr]=\"'القسم الفرعي'\"\n              [fieldId]=\"'subCategory' + (i + 1).toString()\"\n              [ItemsList]=\"subCategories[i]\"\n              [placeholder]=\"'Choose category'\"\n              [placeholderAr]=\"'اختر القسم'\"\n              [fieldClass]=\"'col-18_md-24'\"\n              [required]=\"true\"\n              (itemselected)=\"selectSubCategory(i, $event)\"\n            >\n            </app-select>\n          </div>\n        </ng-container>\n\n        <div class=\"grid-start-noGutter col-24\" style=\"margin-bottom: 15px\">\n          <b> {{ \"properties\" | lowercase | translate }}</b>\n        </div>\n        <ng-container\n          *ngFor=\"\n            let property of form.get('properties')['controls'];\n            index as propInd\n          \"\n        >\n          <ng-container *ngIf=\"propInd > 0\">\n            <div\n              class=\"col-24\"\n              style=\"height: 2px; background-color: #e9e9e9; margin: 10px\"\n            ></div>\n            <div class=\"col-24 actions\">\n              <div class=\"grid-right\">\n                <i\n                  class=\"material-icons\"\n                  tooltip=\"Remove property\"\n                  (click)=\"removeProperty(propInd)\"\n                  style=\"cursor: pointer\"\n                  >clear</i\n                >\n              </div>\n            </div>\n          </ng-container>\n          <app-input-text\n            class=\"col-11_sm-24\"\n            [label]=\"'Price'\"\n            [labelAr]=\"'السعر'\"\n            [fieldId]=\"'price'\"\n            [required]=\"true\"\n            type=\"number\"\n            [placeholder]=\"'Product Cost'\"\n            [placeholderAr]=\"'سعر المنتج'\"\n            [control]=\"property.get('price')\"\n            [fieldClass]=\"'col-18_md-24'\"\n          >\n          </app-input-text>\n          <app-input-text\n            class=\"col-11_sm-24 grid-noGutter\"\n            [label]=\"'Quantity'\"\n            [labelAr]=\"'الكمية'\"\n            [fieldId]=\"'qty'\"\n            [required]=\"true\"\n            type=\"number\"\n            [placeholder]=\"'Product quantity'\"\n            [placeholderAr]=\"'كمية المنتج'\"\n            [control]=\"property.get('qty')\"\n            [fieldClass]=\"'col-18_md-24'\"\n          >\n          </app-input-text>\n          <ng-container\n            *ngIf=\"property.get('productAttributes')['controls'].length > 0\"\n          >\n            <ng-container\n              *ngFor=\"\n                let att of property.get('productAttributes')['controls'];\n                index as attIndex\n              \"\n            >\n              <ng-container\n                *ngIf=\"attributesDropDown[attIndex].values.length > 0\"\n              >\n                <app-select\n                  class=\"col-11_sm-24\"\n                  [ngClass]=\"{\n                    'grid-noGutter': attIndex % 2 != 0\n                  }\"\n                  [label]=\"att.get('name').get('en').value\"\n                  [labelAr]=\"\n                    att.get('name').get('ar').value != ''\n                      ? att.get('name').get('ar').value\n                      : att.get('name').get('en').value\n                  \"\n                  [fieldId]=\"att.get('name').get('en').value\"\n                  [ItemsList]=\"attributesDropDown[attIndex].values\"\n                  [fieldClass]=\"'col-18_md-24'\"\n                  [required]=\"true\"\n                  (itemselected)=\"\n                    selectProductAttribute($event, propInd, attIndex)\n                  \"\n                >\n                </app-select>\n              </ng-container>\n\n              <ng-container\n                *ngIf=\"attributesDropDown[attIndex].values.length === 0\"\n              >\n                <div\n                  class=\"form-group col-11_sm-24 grid-center-middle-noGutter\"\n                >\n                  <div class=\"col_sm-24 grid_sm-noGutter\">\n                    <label [for]=\"att.get('name').get('en').value\">{{\n                      arabic\n                        ? att.get(\"name\").get(\"ar\").value\n                        : att.get(\"name\").get(\"en\").value\n                    }}</label>\n                  </div>\n                  <div class=\"col-18_md-24 grid\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      [id]=\"att.get('name').get('en').value\"\n                      autocomplete=\"off\"\n                      [placeholder]=\"\n                        arabic\n                          ? att.get('name').get('ar').value\n                          : att.get('name').get('en').value\n                      \"\n                      [tooltip]=\"\n                        arabic\n                          ? att.get('name').get('ar').value\n                          : att.get('name').get('en').value\n                      \"\n                      placement=\"top\"\n                      (input)=\"\n                        selectProductAttributeText($event, propInd, attIndex)\n                      \"\n                    />\n                  </div>\n                </div>\n\n                <!-- <app-input-text\n                  class=\"col-11_sm-24\"\n                  [ngClass]=\"{\n                    'grid-right': attIndex % 2 != 0\n                  }\"\n                  [label]=\"att.get('name').get('en').value\"\n                  [fieldId]=\"att.get('name').get('en').value\"\n                  [fieldClass]=\"'col-18_md-24'\"\n                  [required]=\"true\"\n                  type=\"text\"\n                  [placeholder]=\"att.get('name').get('en').value\"\n                >\n                </app-input-text> -->\n              </ng-container>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n      </div>\n\n      <ng-container *ngIf=\"selectedCategoryAttributes.length != 0\">\n        <!-- form.get('properties')['controls'][\n            form.get('properties')['controls'].length - 1\n          ].valid &&  -->\n        <button\n          (click)=\"addProperty()\"\n          class=\"btn color1\"\n          [disabled]=\"\n            !form.get('properties')['controls'][\n              form.get('properties')['controls'].length - 1\n            ].valid || selectedCategoryAttributes.length == 0\n          \"\n          style=\"margin-bottom: 20px\"\n        >\n          {{ \"Add\" | lowercase | translate }}\n          {{ \"property\" | lowercase | translate }}\n        </button></ng-container\n      >\n\n      <div class=\"grid-right\">\n        <button\n          type=\"submit\"\n          (click)=\"onSubmit()\"\n          class=\"btn col-3_sm-5_xs-6 color1 round\"\n          [disabled]=\"!form.valid\"\n        >\n          {{ \"Submit\" | lowercase | translate }}\n        </button>\n        <button\n          type=\"button\"\n          [routerLink]=\"['/products']\"\n          class=\"btn col-3_sm-5_xs-6 color2 round\"\n        >\n          {{ \"Cancel\" | lowercase | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit, AfterViewInit } from '@angular/core';\nimport { FormBuilder, Validators, FormArray } from '@angular/forms';\nimport { ProductsService } from '../products.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { CategoriesService } from '../../categories/categories.service';\nimport { InputSelectItem } from 'src/app/models/InputSelectItem';\n\nimport { LanguageService } from '../../../services/language.service';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-edit-product',\n  templateUrl: './edit-product.component.html',\n  styleUrls: ['./edit-product.component.scss'],\n})\nexport class EditProductComponent implements OnInit, AfterViewInit {\n  originalPhotos = [];\n  productId;\n\n  private langSub: Subscription;\n  currentLang;\n  arabic: boolean;\n\n  constructor(\n    private fb: FormBuilder,\n    private route: ActivatedRoute,\n    private productsService: ProductsService,\n    private categoriesService: CategoriesService,\n    private languageService: LanguageService,\n    private toastr: ToastrService,\n    private spinner: NgxSpinnerService,\n    private router: Router\n  ) {\n    this.langSub = this.languageService.currentLanguage.subscribe((lang) => {\n      this.currentLang = lang;\n      if (this.currentLang && this.currentLang === 'ar') {\n        this.arabic = true;\n      } else {\n        this.arabic = false;\n      }\n    });\n  }\n\n  form = this.fb.group({\n    // originalPhotos: this.fb.array([]),\n    photos: this.fb.array([]),\n    name: ['', Validators.required],\n    description: ['', Validators.required],\n\n    category: this.fb.group({\n      _id: [],\n      name: this.fb.group({\n        en: [],\n        ar: [],\n      }),\n    }),\n\n    properties: this.fb.array([]),\n  });\n\n  ngOnInit(): void {\n    this.productId = this.route.snapshot.paramMap.get('id');\n    this.getbaseCategoriesList();\n  }\n  ngAfterViewInit() {\n    this.getOne(this.productId);\n  }\n\n  getOne(id) {\n    this.spinner.show();\n\n    this.productsService.getOne(id).subscribe(\n      (res) => {\n        // this.form.get('name').patchValue(res['data']['name']);\n        // this.form.get('description').patchValue(res['data']['description']);\n\n        this.form.patchValue(res['data']);\n\n        this.getCategory(res['data']['category']._id);\n\n        //** set initial selected category */\n        this.initialSelectedCategory = {\n          _id: res['data']['category']['_id'],\n          nameEn: res['data']['category']['en'],\n          nameAr: res['data']['category']['ar'],\n        };\n        this.selectedCategory = {};\n        this.selectedCategory[0] = {\n          _id: res['data']['category']['_id'],\n          nameEn: res['data']['category']['en'],\n          nameAr: res['data']['category']['ar'],\n        };\n        //** finish setting initial selected category */\n\n        this.originalPhotos = res['data']['photos'];\n        let photosControl = this.form.get('photos') as FormArray;\n        for (let index = 0; index < this.originalPhotos.length; index++) {\n          photosControl.push(this.fb.control(''));\n        }\n        this.form.get('photos').patchValue(res['data']['photos']);\n\n        this.toastr.info(res['message'], 'Info');\n\n        for (\n          let propIndex = 0;\n          propIndex < res['data']['properties'].length;\n          propIndex++\n        ) {\n          let propertyControl = this.form.get('properties') as FormArray;\n          propertyControl.push(\n            this.fb.group({\n              _id: [''],\n              price: [0, Validators.required],\n              qty: [0, Validators.required],\n              productAttributes: this.fb.array([]),\n            })\n          );\n\n          if (!this.properties[propIndex]) {\n            this.properties[propIndex] = [];\n          }\n          for (\n            let attIndex = 0;\n            attIndex <\n            res['data']['properties'][propIndex]['productAttributes'].length;\n            attIndex++\n          ) {\n            if (!this.properties[propIndex][attIndex]) {\n              this.properties[propIndex][attIndex] = [];\n            }\n\n            this.properties[propIndex][attIndex] = {\n              _id: res['data']['properties'][propIndex]['productAttributes'][\n                attIndex\n              ].value._id,\n              nameEn:\n                res['data']['properties'][propIndex]['productAttributes'][\n                  attIndex\n                ].value.en,\n              nameAr:\n                res['data']['properties'][propIndex]['productAttributes'][\n                  attIndex\n                ].value.ar,\n            };\n            // this.properties[propIndex][attIndex] =\n            //   res['data']['properties'][propIndex]['productAttributes'][\n            //     attIndex\n            //   ];\n          }\n        }\n        if (\n          res['data']['properties'] &&\n          res['data']['properties'].length === 0\n        ) {\n          let propertyControl = this.form.get('properties') as FormArray;\n          propertyControl.push(\n            this.fb.group({\n              _id: [''],\n              price: [0, Validators.required],\n              qty: [0, Validators.required],\n              productAttributes: this.fb.array([]),\n            })\n          );\n        }\n        this.form.get('properties').patchValue(res['data']['properties']);\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  attributesDropDown: [{ values: InputSelectItem[] }] = [{ values: [] }];\n  selectedCategoryAttributes = [];\n  addProperty() {\n    this.initialSelectedProductAttribute.push([]);\n    const properties = this.form.get('properties') as FormArray;\n    if (properties['controls'][properties.length - 1].valid) {\n      properties.push(\n        this.fb.group({\n          _id: [''],\n          price: [0, Validators.required],\n          qty: [0, Validators.required],\n          productAttributes: this.fb.array([]),\n        })\n      );\n      this.setArrayInGroup(\n        properties['controls'][properties.length - 1],\n        this.selectedCategoryAttributes\n      );\n    }\n  }\n\n  removeProperty(ind) {\n    const properties = this.form.get('properties') as FormArray;\n    if (properties.controls.length > 1) {\n      properties.removeAt(ind);\n    }\n  }\n\n  getCategory(categoryId) {\n    this.spinner.show();\n\n    return this.categoriesService.getOne(categoryId).subscribe(\n      (res) => {\n        this.toastr.info(res['message'], 'Info');\n\n        if (res['data'].productAttributes) {\n          this.selectedCategoryAttributes = res['data'].productAttributes;\n          this.getproductAttributesList(res['data'].productAttributes);\n        }\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  subCategories = [];\n  baseCategoryDropDown: InputSelectItem[];\n  selectedCategory = {};\n  initialSelectedCategory: InputSelectItem;\n  getbaseCategoriesList() {\n    this.spinner.show();\n    this.categoriesService.getBaseCategories();\n\n    this.categoriesService.baseCategories.subscribe((data) => {\n      if (data) {\n        this.baseCategoryDropDown = data.map((x) => {\n          return {\n            _id: x['_id'],\n            nameEn: `${x['name']['en']}`,\n            nameAr: `${x['name']['ar']}`,\n          };\n        });\n      }\n    });\n    this.spinner.hide();\n  }\n  selectBaseCategory(event) {\n    this.selectedCategory = {};\n    this.subCategories = [];\n    this.resetProductAttributes();\n\n    if (event) {\n      this.selectedCategory = {};\n      this.selectedCategory[0] = event;\n\n      return this.categoriesService.getOne(event._id).subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n\n          if (res['data'].categories) {\n            if (res['data'].categories.length > 0) {\n              this.subCategories[0] = res['data'].categories.map((x) => {\n                return {\n                  _id: x['_id'],\n                  nameEn: `${x['name']['en']}`,\n                  nameAr: `${x['name']['ar']}`,\n                };\n              });\n            }\n          }\n\n          if (res['data'].productAttributes) {\n            this.selectedCategoryAttributes = res['data'].productAttributes;\n            this.getproductAttributesList(res['data'].productAttributes);\n          }\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n    } else {\n      this.selectedCategory = {};\n      this.subCategories = [];\n      this.resetProductAttributes();\n    }\n  }\n  // End select dropdown\n\n  selectSubCategory(fieldIndex, event) {\n    this.spinner.show();\n\n    this.resetProductAttributes();\n    // delete all next selected categories to index\n    for (const key in this.selectedCategory) {\n      if (key > fieldIndex + 1) {\n        delete this.selectedCategory[key];\n      }\n    }\n\n    // delete all next subcategories\n    this.subCategories.splice(fieldIndex + 1);\n\n    if (event) {\n      // selected category of index = event\n      this.selectedCategory[fieldIndex + 1] = event;\n\n      this.categoriesService.getOne(event._id).subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n          if (res['data'].categories) {\n            if (res['data'].categories.length > 0) {\n              this.subCategories[fieldIndex + 1] = res['data'].categories.map(\n                (x) => {\n                  return {\n                    _id: x['_id'],\n                    nameEn: `${x['name']['en']}`,\n                    nameAr: `${x['name']['ar']}`,\n                  };\n                }\n              );\n            }\n          }\n          if (res['data'].productAttributes) {\n            this.selectedCategoryAttributes = res['data'].productAttributes;\n            this.getproductAttributesList(res['data'].productAttributes);\n          }\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n    } else {\n      // selected category of index = event\n      delete this.selectedCategory[fieldIndex + 1];\n    }\n\n    this.spinner.hide();\n  }\n  resetProductAttributes() {\n    this.attributesDropDown = [{ values: [] }];\n    for (let i = 0; i < this.form.get('properties')['controls'].length; i++) {\n      let productAttributes = this.form\n        .get('properties')\n        ['controls'][i].get('productAttributes') as FormArray;\n      while (productAttributes.length !== 0) {\n        productAttributes.removeAt(0);\n      }\n    }\n  }\n\n  // End select dropdown\n\n  getproductAttributesList(attributes) {\n    const propertyControl = this.form.get('properties') as FormArray;\n    for (let i = 0; i < propertyControl['controls'].length; i++) {\n      const property = propertyControl['controls'][i];\n      this.setArrayInGroup(property, attributes);\n    }\n    this.getInitialAttributes();\n  }\n\n  initialSelectedProductAttribute: InputSelectItem[][] = [[]];\n\n  setArrayInGroup(group, attributes) {\n    let productAttributes = group.get('productAttributes') as FormArray;\n    for (let i = 0; i < attributes.length; i++) {\n      this.attributesDropDown[i] = { values: [] };\n\n      // add product attributes to form\n      productAttributes.controls[i] = this.fb.group({\n        name: this.fb.group({\n          en: ['', Validators.required],\n          ar: [''],\n        }),\n        value: this.fb.group({\n          _id: [''],\n          en: [''],\n          ar: [''],\n        }),\n      });\n\n      productAttributes.controls[i]\n        .get('name')\n        .get('en')\n        .patchValue(attributes[i]['name']['en']);\n      productAttributes.controls[i]\n        .get('name')\n        .get('ar')\n        .patchValue(attributes[i]['name']['ar']);\n\n      // list of product attributes values to dropdown fields\n      for (\n        let valueIndex = 0;\n        valueIndex < attributes[i].values.length;\n        valueIndex++\n      ) {\n        this.attributesDropDown[i].values.push({\n          _id: attributes[i].values[valueIndex]['_id'],\n          nameEn: attributes[i].values[valueIndex]['en'],\n          nameAr: attributes[i].values[valueIndex]['ar'],\n        });\n      }\n    }\n  }\n\n  getInitialAttributes() {\n    let propertyControl = this.form.get('properties') as FormArray;\n    for (\n      let propIndex = 0;\n      propIndex < propertyControl['controls'].length;\n      propIndex++\n    ) {\n      let attributes = propertyControl['controls'][propIndex].get(\n        'productAttributes'\n      ) as FormArray;\n\n      for (\n        let attIndex = 0;\n        attIndex < attributes['controls'].length;\n        attIndex++\n      ) {\n        const att = attributes['controls'][attIndex];\n        if (this.properties[propIndex][attIndex]) {\n          att\n            .get('value')\n            .get('_id')\n            .patchValue(this.properties[propIndex][attIndex]._id);\n          att\n            .get('value')\n            .get('en')\n            .patchValue(this.properties[propIndex][attIndex].nameEn);\n          att\n            .get('value')\n            .get('ar')\n            .patchValue(this.properties[propIndex][attIndex].nameAr);\n          if (!this.initialSelectedProductAttribute[propIndex]) {\n            this.initialSelectedProductAttribute[propIndex] = [];\n          }\n\n          this.initialSelectedProductAttribute[propIndex][attIndex] = {\n            _id: this.properties[propIndex][attIndex]._id,\n            nameEn: this.properties[propIndex][attIndex].nameEn,\n            nameAr: this.properties[propIndex][attIndex].nameAr,\n          };\n        }\n      }\n      attributes.patchValue(attributes.controls);\n    }\n  }\n\n  properties = [];\n  selectProductAttribute(event, propInd, attIndex) {\n    if (!this.properties[propInd]) {\n      this.properties[propInd] = [];\n    }\n    if (!this.properties[propInd][attIndex]) {\n      this.properties[propInd][attIndex] = [];\n    }\n    this.properties[propInd][attIndex] = event;\n  }\n\n  selectProductAttributeText(event, propInd, attIndex) {\n    if (!this.properties[propInd]) {\n      this.properties[propInd] = [];\n    }\n    if (!this.properties[propInd][attIndex]) {\n      this.properties[propInd][attIndex] = [];\n    }\n    this.properties[propInd][attIndex] = {\n      _id: `${propInd} ff ${attIndex}`,\n      nameEn: event.target.value,\n      nameAr: '',\n    };\n  }\n\n  onSubmit() {\n    this.spinner.show();\n\n    //** Start product attributes\n    //** adding values to product attributes form array controls\n    for (\n      let index = 0;\n      index < this.form.get('properties')['controls'].length;\n      index++\n    ) {\n      const property = this.form.get('properties')['controls'][index];\n      let attributes = property.get('productAttributes') as FormArray;\n      for (let i = 0; i < attributes['controls'].length; i++) {\n        const att = attributes['controls'][i];\n\n        if (this.properties[index]) {\n          if (this.properties[index][i]) {\n            att\n              .get('value')\n              .get('_id')\n              .patchValue(this.properties[index][i]._id);\n            att\n              .get('value')\n              .get('en')\n              .patchValue(this.properties[index][i].nameEn);\n            att\n              .get('value')\n              .get('ar')\n              .patchValue(this.properties[index][i].nameAr);\n          }\n        }\n      }\n      attributes.patchValue(attributes.controls);\n    }\n    //** adding values to product attributes form array controls\n    //** End product attributes\n\n    /////////////////////////\n    //** Start category\n    if (Object.keys(this.selectedCategory).length === 0) {\n      this.form.get('category').reset();\n    } else {\n      var count = 0;\n      for (var prop in this.selectedCategory) {\n        if (this.selectedCategory.hasOwnProperty(prop)) ++count;\n      }\n      if (this.selectedCategory[count - 1]) {\n        this.form\n          .get('category')\n          .get('_id')\n          .patchValue(this.selectedCategory[count - 1]._id);\n\n        this.form\n          .get('category')\n          .get('name')\n          .get('en')\n          .patchValue(this.selectedCategory[count - 1].nameEn);\n\n        this.form\n          .get('category')\n          .get('name')\n          .get('ar')\n          .patchValue(this.selectedCategory[count - 1].nameAr);\n      }\n    }\n    //** End category\n    /////////////////////////\n\n    const formData = new FormData();\n\n    for (const key in this.form.value) {\n      if (key === 'photos') {\n        for (let i = 0; i < this.form.value[key].length; i++) {\n          formData.append(key, this.form.value[key][i]);\n        }\n      } else {\n        // contains object\n        formData.append(key, JSON.stringify(this.form.value[key]));\n      }\n    }\n\n    this.productsService.updateOne(formData, this.productId).subscribe(\n      (res) => {\n        this.originalPhotos = [];\n        // this.form.reset();\n        this.toastr.info(res['message'], 'Info');\n        this.router.navigate(['/products']);\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n}\n","<div class=\"grid-center-noGutter\">\n  <div class=\"col-20_sm-22_xs-23 grid-center-noGutter content\">\n    <div class=\"title col-24 grid-center\">Edit Product</div>\n    <div class=\"form col-23\">\n      <div class=\"grid-middle-spaceBetween-noGutter\">\n        <div class=\"form-group grid-center-middle-noGutter col-24\">\n          <div class=\"col-24 grid-center\">\n            <app-upload-multi-photos\n              [initialPhotos]=\"originalPhotos\"\n              [control]=\"form.get('photos')\"\n            >\n            </app-upload-multi-photos>\n          </div>\n        </div>\n\n        <app-input-text\n          class=\"col-11_sm-24\"\n          [label]=\"'Name'\"\n          [labelAr]=\"'الاسم'\"\n          [fieldId]=\"'name'\"\n          [required]=\"true\"\n          type=\"text\"\n          [placeholder]=\"'Product Name'\"\n          [placeholderAr]=\"'اسم المنتج'\"\n          [tooltipMsg]=\"'Name'\"\n          [control]=\"form.get('name')\"\n          [fieldClass]=\"'col-18_md-24'\"\n        >\n        </app-input-text>\n\n        <app-textarea\n          class=\"col-11_sm-24 grid-noGutter\"\n          [label]=\"'Description'\"\n          [labelAr]=\"'الوصف'\"\n          [fieldId]=\"'description'\"\n          type=\"text\"\n          [placeholder]=\"'Product description'\"\n          [placeholderAr]=\"'وصف المنتج'\"\n          [tooltipMsg]=\"'Product description'\"\n          [control]=\"form.get('description')\"\n          [fieldClass]=\"'col-18_md-24'\"\n        >\n        </app-textarea>\n\n        <div class=\"col-24 grid-noGutter\">\n          <app-select\n            class=\"col-11_sm-24\"\n            [label]=\"'Category'\"\n            [labelAr]=\"'القسم'\"\n            [fieldId]=\"'category'\"\n            [initialSelectedItem]=\"initialSelectedCategory\"\n            [ItemsList]=\"baseCategoryDropDown\"\n            [placeholder]=\"'Choose parent category'\"\n            [placeholderAr]=\"'اختر القسم الرئيسي'\"\n            [fieldClass]=\"'col-18_md-24'\"\n            [required]=\"true\"\n            (itemselected)=\"selectBaseCategory($event)\"\n          >\n          </app-select>\n        </div>\n        <ng-container *ngFor=\"let category of subCategories; index as i\">\n          <div class=\"col-24 grid-noGutter\">\n            <app-select\n              class=\"col-11_sm-24\"\n              [label]=\"'sub category'\"\n              [labelAr]=\"'القسم الفرعي'\"\n              [fieldId]=\"'subCategory' + (i + 1).toString()\"\n              [ItemsList]=\"subCategories[i]\"\n              [placeholder]=\"'Choose category'\"\n              [placeholderAr]=\"'اختر القسم'\"\n              [fieldClass]=\"'col-18_md-24'\"\n              [required]=\"true\"\n              (itemselected)=\"selectSubCategory(i, $event)\"\n            >\n            </app-select>\n          </div>\n        </ng-container>\n\n        <div class=\"col-24\" style=\"margin-bottom: 15px\"><b> Properties</b></div>\n        <ng-container\n          *ngFor=\"\n            let property of form.get('properties')['controls'];\n            index as propInd\n          \"\n        >\n          <ng-container *ngIf=\"propInd > 0\">\n            <div\n              class=\"col-24\"\n              style=\"height: 2px; background-color: #e9e9e9; margin: 10px\"\n            ></div>\n            <div class=\"col-24 actions\">\n              <div class=\"grid-right\">\n                <i\n                  class=\"material-icons\"\n                  tooltip=\"Remove property\"\n                  (click)=\"removeProperty(propInd)\"\n                  style=\"cursor: pointer\"\n                  >clear</i\n                >\n              </div>\n            </div>\n          </ng-container>\n          <app-input-text\n            class=\"col-11_sm-24\"\n            [label]=\"'Price'\"\n            [labelAr]=\"'السعر'\"\n            [fieldId]=\"'price'\"\n            [required]=\"true\"\n            type=\"number\"\n            [placeholder]=\"'Product Cost'\"\n            [placeholderAr]=\"'السعر'\"\n            [control]=\"property.get('price')\"\n            [fieldClass]=\"'col-18_md-24'\"\n          >\n          </app-input-text>\n          <app-input-text\n            class=\"col-11_sm-24 grid-noGutter\"\n            [label]=\"'Quantity'\"\n            [labelAr]=\"'الكمية'\"\n            [fieldId]=\"'qty'\"\n            [required]=\"true\"\n            type=\"number\"\n            [placeholder]=\"'Product quantity'\"\n            [placeholderAr]=\"'كمية المنتج'\"\n            [control]=\"property.get('qty')\"\n            [fieldClass]=\"'col-18_md-24'\"\n          >\n          </app-input-text>\n          <ng-container\n            *ngIf=\"property.get('productAttributes')['controls'].length > 0\"\n          >\n            <ng-container\n              *ngFor=\"\n                let att of property.get('productAttributes')['controls'];\n                index as attIndex\n              \"\n            >\n              <ng-container\n                *ngIf=\"attributesDropDown[attIndex].values.length > 0\"\n              >\n                <app-select\n                  class=\"col-11_sm-24\"\n                  [ngClass]=\"{\n                    'grid-noGutter': attIndex % 2 != 0\n                  }\"\n                  [label]=\"att.get('name').get('en').value\"\n                  [labelAr]=\"att.get('name').get('ar').value\"\n                  [placeholder]=\"att.get('name').get('en').value\"\n                  [placeholderAr]=\"att.get('name').get('ar').value\"\n                  [fieldId]=\"att.get('name').get('en').value\"\n                  [initialSelectedItem]=\"\n                    initialSelectedProductAttribute[propInd][attIndex]\n                  \"\n                  [ItemsList]=\"attributesDropDown[attIndex].values\"\n                  [fieldClass]=\"'col-18_md-24'\"\n                  [required]=\"true\"\n                  (itemselected)=\"\n                    selectProductAttribute($event, propInd, attIndex)\n                  \"\n                >\n                </app-select>\n              </ng-container>\n\n              <ng-container\n                *ngIf=\"attributesDropDown[attIndex].values.length === 0\"\n              >\n                <div\n                  class=\"form-group col-11_sm-24 grid-center-middle-noGutter\"\n                >\n                  <div\n                    [ngClass]=\"{\n                      grid: attIndex % 2 != 0\n                    }\"\n                    class=\"col_sm-24 grid_sm-noGutter\"\n                  >\n                    <label [for]=\"att.get('name').get('en').value\">{{\n                      arabic\n                        ? att.get(\"name\").get(\"ar\").value\n                        : att.get(\"name\").get(\"en\").value\n                    }}</label>\n                  </div>\n                  <div class=\"col-18_md-24 grid\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      [id]=\"att.get('name').get('en').value\"\n                      autocomplete=\"off\"\n                      [placeholder]=\"\n                        arabic\n                          ? att.get('name').get('ar').value\n                          : att.get('name').get('en').value\n                      \"\n                      [tooltip]=\"\n                        arabic\n                          ? att.get('name').get('ar').value\n                          : att.get('name').get('en').value\n                      \"\n                      [value]=\"\n                        att.get('value').get('en').value &&\n                        att.get('value').get('en').value != ''\n                          ? att.get('value').get('en').value\n                          : att.get('value').get('ar').value\n                      \"\n                      placement=\"top\"\n                      (input)=\"\n                        selectProductAttributeText($event, propInd, attIndex)\n                      \"\n                    />\n                  </div>\n                </div>\n\n                <!-- <app-input-text\n              class=\"col-11_sm-24\"\n              [ngClass]=\"{\n                'grid-right': attIndex % 2 != 0\n              }\"\n              [label]=\"att.get('name').get('en').value\"\n              [fieldId]=\"att.get('name').get('en').value\"\n              [fieldClass]=\"'col-18_md-24'\"\n              [required]=\"true\"\n              type=\"text\"\n              [placeholder]=\"att.get('name').get('en').value\"\n            >\n            </app-input-text> -->\n              </ng-container>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n\n        <!-- <app-input-text\n          class=\"col-11_sm-24\"\n          [label]=\"'Price'\"\n          [fieldId]=\"'price'\"\n          [required]=\"true\"\n          type=\"number\"\n          [placeholder]=\"'Product Cost'\"\n          [control]=\"form.get('price')\"\n          [fieldClass]=\"'col-18_md-24'\"\n        >\n        </app-input-text>\n        <app-input-text\n          class=\"col-11_sm-24 grid-right\"\n          [label]=\"'Qty'\"\n          [fieldId]=\"'qty'\"\n          [required]=\"true\"\n          type=\"number\"\n          [placeholder]=\"'Product Cost'\"\n          [control]=\"form.get('qty')\"\n          [fieldClass]=\"'col-18_md-24'\"\n        >\n        </app-input-text> -->\n        <!-- <ng-container\n          *ngIf=\"form.get('productAttributes')['controls'].length > 0\"\n        >\n          <ng-container\n            *ngFor=\"\n              let att of form.get('productAttributes')['controls'];\n              index as attIndex\n            \"\n          >\n            <app-multi-select\n              class=\"col-11_sm-24\"\n              [ngClass]=\"{\n                'grid-right': attIndex % 2 != 0\n              }\"\n              [label]=\"\n                att.get('name').get('en').value +\n                '(' +\n                att.get('name').get('ar').value +\n                ')'\n              \"\n              [fieldId]=\"att.get('name').get('en').value\"\n              [ItemsList]=\"selectProductAttributesListValues[attIndex].values\"\n              [fieldClass]=\"'col-18_md-24'\"\n              [required]=\"true\"\n              (itemselected)=\"selectProductAttribute($event, attIndex)\"\n            >\n            </app-multi-select>\n          </ng-container>\n        </ng-container> -->\n      </div>\n      <ng-container *ngIf=\"form.get('properties')['controls'].length > 0\">\n        <button\n          style=\"margin-bottom: 20px\"\n          (click)=\"addProperty()\"\n          class=\"btn color1\"\n          [disabled]=\"\n            !form.get('properties')['controls'][\n              form.get('properties')['controls'].length - 1\n            ].valid\n          \"\n        >\n          {{ \"Add\" | lowercase | translate }}\n          {{ \"property\" | lowercase | translate }}\n        </button>\n      </ng-container>\n      <div class=\"grid-right\">\n        <button\n          type=\"submit\"\n          (click)=\"onSubmit()\"\n          class=\"btn col-3_sm-5_xs-6 color1 round\"\n          [disabled]=\"!form.valid\"\n        >\n          {{ \"Submit\" | lowercase | translate }}\n        </button>\n        <button\n          type=\"button\"\n          [routerLink]=\"['/products']\"\n          class=\"btn col-3_sm-5_xs-6 color2 round\"\n        >\n          {{ \"Cancel\" | lowercase | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ProductsComponent } from './products.component';\nimport { AddProductComponent } from './add-product/add-product.component';\nimport { EditProductComponent } from './edit-product/edit-product.component';\n\nconst routes: Routes = [\n  { path: '', component: ProductsComponent },\n  { path: 'add', component: AddProductComponent },\n  { path: 'edit/:id', component: EditProductComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProductsRoutingModule {}\n","<div class=\"grid-center-noGutter\">\n  <div class=\"col-20_sm-22_xs-23\" style=\"margin-top: 20px\">\n    <div class=\"card\">\n      <div class=\"card-header grid-noGutter\">\n        <span>{{ \"Products\" | lowercase | translate }}</span>\n      </div>\n      <div class=\"card-body grid-center-noGutter\">\n        <div class=\"col-24 grid-spaceBetween-noGutter\">\n          <div class=\"card xs-hidden\">\n            <div class=\"card-body\">\n              <span\n                style=\"\n                  display: inline-block;\n                  background-color: #4899c2;\n                  padding: 15px;\n                  color: white;\n                \"\n              >\n                <i class=\"material-icons\">home</i>\n              </span>\n              <div style=\"display: inline-block; margin: 0 10px\">\n                <div style=\"color: #20a8d8; font-size: 18px; font-weight: 600\">\n                  {{ items.length }}\n                </div>\n                <div style=\"color: #73818f; font-size: 80%; font-weight: 700\">\n                  {{ \"Products\" | lowercase | translate }}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-top xs-24 grid-noGutter\" style=\"margin-top: 15px\">\n            <div class=\"col-3_xlg-4_lg-6_sm-10 grid-column-noGutter\">\n              <a [routerLink]=\"['./add']\" class=\"btn color1 round addbtn\"\n                >{{ \"add\" | lowercase | translate }}\n                {{ \"Product\" | lowercase | translate }}</a\n              >\n            </div>\n          </div>\n        </div>\n        <div class=\"col-24 grid-center-noGutter\" style=\"margin-top: 20px\">\n          <div class=\"col-24 grid-noGutter\">\n            <div\n              class=\"col-12_xs-24 grid-left-noGutter\"\n              style=\"margin-left: 10px\"\n            >\n              <label\n                class=\"col-24 grid-noGutter\"\n                style=\"font-weight: bold\"\n                for=\"\"\n                >{{ \"Search for\" | lowercase | translate }}</label\n              >\n              <div class=\"col-24 grid\">\n                <input\n                  type=\"text\"\n                  #FilterRecord\n                  class=\"form-control col\"\n                  placeholder=\"e.g. Name, Creator, Store\"\n                />\n                <a\n                  (click)=\"FilterRecords(FilterRecord.value)\"\n                  class=\"btn col-4 color1 round search\"\n                >\n                  <span class=\"md-hidden\">{{\n                    \"search\" | lowercase | translate\n                  }}</span>\n                  <span><i class=\"material-icons\">search</i></span>\n                </a>\n                <a\n                  (click)=\"FilterRecords(''); FilterRecord.value = ''\"\n                  class=\"btn col-4 color2 round search\"\n                >\n                  <span class=\"md-hidden\">{{\n                    \"Clear\" | lowercase | translate\n                  }}</span>\n                  <span><i class=\"material-icons\">clear</i></span>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"grid-right-noGutter\" style=\"margin-top: 20px\">\n      <button class=\"btn color5 round\" (click)=\"exportAs('xlsx')\">\n        {{ \"Export\" | lowercase | translate }}\n      </button>\n      <!-- <div class=\"dropdown\">\n            <button class=\"dropbtn\">Export</button> -->\n      <!-- <div class=\"dropdown-content\">\n              <a (click)=\"exportAs('xlsx')\">xlsx</a>\n              <a (click)=\"exportAs('pdf', 'landscape')\">pdf</a> -->\n      <!-- <a (click)=\"exportAs('png')\">png</a>\n                      <a (click)=\"exportAs('txt')\">txt</a>\n                      <a (click)=\"exportAs('csv')\">csv</a>\n                      <a (click)=\"exportAs('xml')\">xml</a> -->\n      <!-- </div> -->\n      <!-- </div> -->\n    </div>\n\n    <div class=\"grid-center-noGutter\" style=\"margin-top: 20px\">\n      <ng-container>\n        <ng-container *ngTemplateOutlet=\"table\"></ng-container>\n      </ng-container>\n    </div>\n  </div>\n</div>\n\n<ng-template #table>\n  <div>\n    <data-table\n      id=\"my-table\"\n      title=\"List of Products\"\n      [items]=\"tableElements\"\n      [itemCount]=\"itemCount\"\n      [pageLimits]=\"limits\"\n      [limit]=\"limit\"\n      [pagination]=\"true\"\n      (reload)=\"reloadItems($event)\"\n      [noDataMessage]=\"'No data to show'\"\n    >\n      <data-table-column\n        [width]=\"50\"\n        [property]=\"'image'\"\n        [resizable]=\"true\"\n        [header]=\"arabic ? 'صورة' : 'Img'\"\n      >\n        <ng-template #dataTableCell let-item=\"item\">\n          <img\n            [src]=\"\n              item.photos\n                ? item.photos[0]\n                : '../../../../../assets/placeholder.png'\n            \"\n            width=\"30px\"\n            height=\"30px\"\n            alt=\"\"\n          />\n        </ng-template>\n      </data-table-column>\n\n      <data-table-column\n        [property]=\"'name'\"\n        [header]=\"arabic ? 'الاسم' : 'Name'\"\n        [sortable]=\"true\"\n      >\n      </data-table-column>\n\n      <data-table-column\n        [property]=\"'profit'\"\n        [header]=\"arabic ? 'الربح' : 'Profit'\"\n        [sortable]=\"true\"\n      >\n        <ng-template #dataTableCell let-item=\"item\">\n          <span>{{\n            item.profitPercentage && item.profitPercentage !== 0\n              ? item.profitPercentage + \"%\"\n              : item.profitValue && item.profitValue !== 0\n              ? item.profitValue + \" EGP\"\n              : 0\n          }}</span>\n        </ng-template>\n      </data-table-column>\n\n      <data-table-column\n        [property]=\"'discount'\"\n        [header]=\"arabic ? 'الخصم' : 'Discount'\"\n        [sortable]=\"true\"\n      >\n        <ng-template #dataTableCell let-item=\"item\">\n          <span>{{\n            item.discountPercentage && item.discountPercentage !== 0\n              ? item.discountPercentage + \"%\"\n              : item.discountValue && item.discountValue !== 0\n              ? item.discountValue + \" EGP\"\n              : 0\n          }}</span>\n        </ng-template>\n      </data-table-column>\n      <data-table-column [header]=\"arabic ? 'السعر' : 'Price'\">\n        <ng-template #dataTableCell let-item=\"item\">\n          <span>{{ item.properties[0]?.price }}</span>\n        </ng-template>\n      </data-table-column>\n\n      <data-table-column\n        [property]=\"'creator'\"\n        [header]=\"arabic ? 'بواسطة' : 'Creator'\"\n        [sortable]=\"true\"\n      >\n        <ng-template #dataTableCell let-item=\"item\">\n          <span>{{ item.creator ? item.creator.name : \"-\" }}</span>\n        </ng-template>\n      </data-table-column>\n\n      <data-table-column\n        [property]=\"'store'\"\n        [sortable]=\"true\"\n        [header]=\"arabic ? 'المتجر' : 'Store'\"\n      >\n        <ng-template #dataTableCell let-item=\"item\">\n          <span>{{ item.store ? item.store.name : \"-\" }}</span>\n        </ng-template>\n      </data-table-column>\n\n      <!-- [property]=\"'category.en'\" -->\n      <data-table-column\n        property=\"category.en\"\n        [header]=\"arabic ? 'القسم' : 'Category'\"\n      >\n        <ng-template #dataTableCell let-item=\"item\">\n          <span>{{ item.category.en }}</span>\n        </ng-template>\n      </data-table-column>\n\n      <data-table-column\n        [property]=\"'active'\"\n        [width]=\"68\"\n        [header]=\"arabic ? 'الحالة' : 'Status'\"\n        [sortable]=\"true\"\n      >\n        <ng-template #dataTableCell let-item=\"item\">\n          <div>\n            <ng-container *ngIf=\"item.sold\"\n              ><span class=\"badge blocked\">{{\n                \"sold\" | lowercase | translate\n              }}</span></ng-container\n            >\n            <ng-container *ngIf=\"item.active\"\n              ><span class=\"badge active\">{{\n                \"active\" | lowercase | translate\n              }}</span>\n            </ng-container>\n            <ng-container *ngIf=\"!item.active\"\n              ><span class=\"badge deleted\">{{\n                \"inactive\" | lowercase | translate\n              }}</span></ng-container\n            >\n          </div>\n        </ng-template>\n      </data-table-column>\n\n      <data-table-column [width]=\"180\" [header]=\"arabic ? '' : 'Actions'\">\n        <ng-template #dataTableCell let-item=\"item\" class=\"grid-center\">\n          <a\n            [routerLink]=\"['./edit/', item._id]\"\n            class=\"pencil\"\n            [tooltip]=\"'Edit'\"\n            placement=\"bottom\"\n            (click)=\"savePagination()\"\n          >\n            <i class=\"material-icons\">colorize</i>\n          </a>\n          <a\n            (click)=\"\n              item.store ? null : openModal(templateAddToStore, item._id);\n              getStoresList()\n            \"\n            [ngClass]=\"item.store ? '' : 'lock'\"\n            [tooltip]=\"item.store ? '' : 'add to store'\"\n            placement=\"bottom\"\n            triggers=\"mouseenter:mouseleave\"\n          >\n            <i class=\"material-icons\">{{ item.store ? \"\" : \"store\" }}</i>\n          </a>\n          <a\n            (click)=\"openModal(templateCopy, item._id)\"\n            [ngClass]=\"'lock'\"\n            [tooltip]=\"'Copy'\"\n            placement=\"bottom\"\n            triggers=\"mouseenter:mouseleave\"\n          >\n            <i class=\"material-icons\">content_copy</i>\n          </a>\n          <a\n            (click)=\"\n              item.active\n                ? openModal(templateDeactivate, item._id)\n                : openModal(templateActivate, item._id)\n            \"\n            [ngClass]=\"item.active ? 'trash' : 'lock'\"\n            [tooltip]=\"item.active ? 'deactivate' : 'Activate'\"\n            placement=\"bottom\"\n            triggers=\"mouseenter:mouseleave\"\n          >\n            <i class=\"material-icons\">{{\n              item.active ? \"block\" : \"check_circle_outline\"\n            }}</i>\n          </a>\n          <a\n            (click)=\"\n              item.sold\n                ? openModal(templateAvailable, item._id)\n                : openModal(templateSold, item._id)\n            \"\n            [ngClass]=\"item.sold ? 'lock' : 'trash'\"\n            [tooltip]=\"item.sold ? 'Available' : 'Sold'\"\n            placement=\"bottom\"\n            triggers=\"mouseenter:mouseleave\"\n          >\n            <i class=\"material-icons\">{{\n              item.sold ? \"done_outline\" : \"done_all\"\n            }}</i>\n          </a>\n\n          <a\n            (click)=\"\n              item.discount\n                ? openModal(templateDeleteDiscount, item._id)\n                : openModal(templateAddDiscount, item._id)\n            \"\n            [class]=\"item.discount ? 'trash' : 'lock'\"\n            [tooltip]=\"item.discount ? 'Delete discount' : 'Add discount'\"\n            placement=\"bottom\"\n            triggers=\"mouseenter:mouseleave\"\n          >\n            <i class=\"material-icons\">qr_code_2</i>\n          </a>\n\n          <a\n            (click)=\"openModal(templateDelete, item._id)\"\n            class=\"trash\"\n            tooltip=\"Delete\"\n            placement=\"bottom\"\n            triggers=\"mouseenter:mouseleave\"\n          >\n            <i class=\"material-icons\">delete</i>\n          </a>\n        </ng-template>\n      </data-table-column>\n    </data-table>\n  </div>\n</ng-template>\n\n<ng-template #templateAddDiscount id=\"template2\">\n  <div class=\"modal-header\">\n    <h4 style=\"font-weight: bold; justify-content: center\">\n      <i class=\"fa fa-user fa-lg mt-4\"></i> Do you want to add this product to a\n      store?\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close pull-right\"\n      aria-label=\"Close\"\n      (click)=\"modalRef.hide()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"col-24 grid-noGutter\">\n      <div class=\"col-24\">\n        <div class=\"col-24 grid\">\n          <app-input-radio\n            class=\"col-24\"\n            [label]=\"'Discount type'\"\n            [fieldId]=\"'discountType'\"\n            [items]=\"['percent', 'value']\"\n            [control]=\"discountForm.get('discountType')\"\n            [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n          ></app-input-radio>\n\n          <ng-container\n            *ngIf=\"discountForm.get('discountType').value === 'value'\"\n          >\n            <app-input-text\n              class=\"col-24\"\n              (change)=\"discountForm.get('discountPercentage').patchValue(0)\"\n              [label]=\"'Discount value'\"\n              [fieldId]=\"'discountValue'\"\n              type=\"number\"\n              [placeholder]=\"'Discount on this category'\"\n              [control]=\"discountForm.get('discountValue')\"\n              [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n            >\n            </app-input-text>\n          </ng-container>\n\n          <ng-container\n            *ngIf=\"discountForm.get('discountType').value === 'percent'\"\n          >\n            <app-input-text\n              class=\"col-24\"\n              (change)=\"discountForm.get('discountValue').patchValue(0)\"\n              [label]=\"'Discount percent'\"\n              [fieldId]=\"'discountPercentage'\"\n              type=\"number\"\n              [placeholder]=\"'Discount on this category'\"\n              [control]=\"discountForm.get('discountPercentage')\"\n              [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\"\n            >\n            </app-input-text>\n          </ng-container>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-24 grid-noGutter\">\n      <div class=\"col-24 grid-noGutter\">\n        <div class=\"col-11_sm-24 form-group grid-center-middle-noGutter\">\n          <div class=\"col_sm-24 grid_sm-noGutter field-label\">\n            <label for=\"period\">{{\n              \"forPeriod\" | lowercase | translate\n            }}</label>\n          </div>\n\n          <div class=\"col-11_sm-24 grid\">\n            <label class=\"toggleButton\" tooltip=\"for specific time\">\n              <input\n                type=\"checkbox\"\n                id=\"period\"\n                [(ngModel)]=\"forPeriod\"\n                (change)=\"changePeriod($event)\"\n              />\n              <div>\n                <svg viewBox=\"0 0 44 44\">\n                  <path\n                    d=\"M14,24 L21,31 L39.7428882,11.5937758 C35.2809627,6.53125861 30.0333333,4 24,4 C12.95,4 4,12.95 4,24 C4,35.05 12.95,44 24,44 C35.05,44 44,35.05 44,24 C44,19.3 42.5809627,15.1645919 39.7428882,11.5937758\"\n                    transform=\"translate(-2.000000, -2.000000)\"\n                  ></path>\n                </svg>\n              </div>\n            </label>\n          </div>\n        </div>\n      </div>\n      <ng-container *ngIf=\"forPeriod\">\n        <div class=\"col-24 grid-middle-spaceBetween-noGutter\">\n          <label>{{ \"validTill\" | lowercase | translate }}: </label>\n          <div class=\"col-19_xlg-18_lg-17_md-24 grid-noGutter\">\n            <input\n              type=\"text\"\n              class=\"form-control col\"\n              bsDatepicker\n              autocomplete=\"off\"\n              placeholder=\"YYYY-MM-DD\"\n              [(bsValue)]=\"datePickerValue\"\n              [minDate]=\"minDate\"\n              [bsConfig]=\"{ isAnimated: true, adaptivePosition: true }\"\n            />\n            <input class=\"form-control col\" type=\"time\" [(ngModel)]=\"time\" />\n          </div>\n        </div>\n        <div style=\"height: 20px; width: 100%\"></div>\n      </ng-container>\n    </div>\n\n    <div class=\"grid-right\">\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color1 round\"\n        style=\"margin-right: 10px\"\n        (click)=\"addDiscount()\"\n      >\n        {{ \"Submit\" | lowercase | translate }}\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color2 round\"\n        (click)=\"modalRef.hide()\"\n      >\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #templateDeleteDiscount id=\"template2\">\n  <div class=\"modal-header\">\n    <h4 style=\"color: red; font-weight: bold; justify-content: center\">\n      <i class=\"fa fa-trash fa-lg mt-4\"></i> Do you want to Delete discount from\n      This product ?\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close pull-right\"\n      aria-label=\"Close\"\n      (click)=\"modalRef.hide()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"grid-right\">\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color1 round\"\n        style=\"margin-right: 10px\"\n        (click)=\"deleteDiscount()\"\n      >\n        {{ \"Submit\" | lowercase | translate }}\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color2 round\"\n        (click)=\"modalRef.hide()\"\n      >\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #templateAddToStore id=\"template2\">\n  <div class=\"modal-header\">\n    <h4 style=\"font-weight: bold; justify-content: center\">\n      <i class=\"fa fa-user fa-lg mt-4\"></i> Do you want to add this product to a\n      store?\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close pull-right\"\n      aria-label=\"Close\"\n      (click)=\"modalRef.hide()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"col-24 grid-noGutter\">\n      <app-select\n        class=\"col-24\"\n        [label]=\"'Store'\"\n        [fieldId]=\"'store'\"\n        [ItemsList]=\"selectStoresList\"\n        [placeholder]=\"'Choose store'\"\n        [fieldClass]=\"'col-18_md-24'\"\n        [required]=\"true\"\n        (itemselected)=\"selectStore($event)\"\n      >\n      </app-select>\n    </div>\n    <div class=\"grid-right\">\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color1 round\"\n        style=\"margin-right: 10px\"\n        (click)=\"addProductToStore()\"\n      >\n        {{ \"Submit\" | lowercase | translate }}\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color2 round\"\n        (click)=\"modalRef.hide()\"\n      >\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #templateCopy id=\"template2\">\n  <div class=\"modal-header\">\n    <h4 style=\"font-weight: bold; justify-content: center\">\n      <i class=\"fa fa-trash fa-lg mt-4\"></i> Do you want to copy This Element ?\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close pull-right\"\n      aria-label=\"Close\"\n      (click)=\"modalRef.hide()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"grid-right\">\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color1 round\"\n        style=\"margin-right: 10px\"\n        (click)=\"copyElement()\"\n      >\n        {{ \"Submit\" | lowercase | translate }}\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color2 round\"\n        (click)=\"modalRef.hide()\"\n      >\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #templateActivate id=\"template2\">\n  <div class=\"modal-header\">\n    <h4 style=\"font-weight: bold; justify-content: center\">\n      <i class=\"fa fa-trash fa-lg mt-4\"></i> Do you want to activate This\n      Element ?\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close pull-right\"\n      aria-label=\"Close\"\n      (click)=\"modalRef.hide()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"grid-right\">\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color1 round\"\n        style=\"margin-right: 10px\"\n        (click)=\"activateElement()\"\n      >\n        {{ \"Submit\" | lowercase | translate }}\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color2 round\"\n        (click)=\"modalRef.hide()\"\n      >\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #templateDeactivate id=\"template2\">\n  <div class=\"modal-header\">\n    <h4 style=\"font-weight: bold; justify-content: center\">\n      <i class=\"fa fa-trash fa-lg mt-4\"></i> Do you want to deactivate This\n      Element ?\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close pull-right\"\n      aria-label=\"Close\"\n      (click)=\"modalRef.hide()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"grid-right\">\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color1 round\"\n        style=\"margin-right: 10px\"\n        (click)=\"deactivateElement()\"\n      >\n        {{ \"Submit\" | lowercase | translate }}\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color2 round\"\n        (click)=\"modalRef.hide()\"\n      >\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #templateDelete id=\"template2\">\n  <div class=\"modal-header\">\n    <h4 style=\"color: red; font-weight: bold; justify-content: center\">\n      <i class=\"fa fa-trash fa-lg mt-4\"></i> Do you want to Delete This Element\n      ?\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close pull-right\"\n      aria-label=\"Close\"\n      (click)=\"modalRef.hide()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"grid-right\">\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color1 round\"\n        style=\"margin-right: 10px\"\n        (click)=\"deleteElement()\"\n      >\n        {{ \"Submit\" | lowercase | translate }}\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color2 round\"\n        (click)=\"modalRef.hide()\"\n      >\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #templateAvailable id=\"template2\">\n  <div class=\"modal-header\">\n    <h4 style=\"color: #0c425d; font-weight: bold; justify-content: center\">\n      <i class=\"fa fa-lock fa-lg mt-4\"></i> Do you want to change this element\n      status to be available?\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close pull-right\"\n      aria-label=\"Close\"\n      (click)=\"modalRef.hide()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"grid-right\">\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color1 round\"\n        style=\"margin-right: 10px\"\n        (click)=\"availableElement()\"\n      >\n        {{ \"Submit\" | lowercase | translate }}\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color2 round\"\n        (click)=\"modalRef.hide()\"\n      >\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #templateSold id=\"template2\">\n  <div class=\"modal-header\">\n    <h4 style=\"color: #0c425d; font-weight: bold; justify-content: center\">\n      <i class=\"fa fa-lock fa-lg mt-4\"></i> Do you want to change this element\n      status to be sold out?\n    </h4>\n    <button\n      type=\"button\"\n      class=\"close pull-right\"\n      aria-label=\"Close\"\n      (click)=\"modalRef.hide()\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"grid-right\">\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color1 round\"\n        style=\"margin-right: 10px\"\n        (click)=\"soldElement()\"\n      >\n        {{ \"Submit\" | lowercase | translate }}\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn col-5_sm-5_xs-6 color2 round\"\n        (click)=\"modalRef.hide()\"\n      >\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n","import { Component, OnInit, TemplateRef, ElementRef } from '@angular/core';\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\nimport { ToastrService } from 'ngx-toastr';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { DataTableResource } from 'angular7-data-table';\n\nimport { LanguageService } from '../../services/language.service';\nimport { Subscription } from 'rxjs';\n\nimport { ProductsService } from './products.service';\nimport { StoresService } from '../stores/stores.service';\nimport { InputSelectItem } from 'src/app/models/InputSelectItem';\n\nimport { FormBuilder } from '@angular/forms';\nimport { Router } from '@angular/router';\n\nimport {\n  ExportAsService,\n  ExportAsConfig,\n  SupportedExtensions,\n} from 'ngx-export-as';\n\n@Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.scss'],\n})\nexport class ProductsComponent implements OnInit {\n  itemResource;\n  items = [];\n  itemCount = 0;\n  limit = 20;\n  limits = [20, 25, 50];\n  offset = 1;\n  tableElements = [];\n\n  modalRef: any;\n\n  private lastPageSub: Subscription;\n  private newPagination;\n  private lastPagination;\n\n  private langSub: Subscription;\n  currentLang;\n  arabic: boolean;\n\n  constructor(\n    private productsService: ProductsService,\n    private storesService: StoresService,\n    private languageService: LanguageService,\n    private modalService: BsModalService,\n    private toastr: ToastrService,\n    private spinner: NgxSpinnerService,\n    private fb: FormBuilder,\n    private router: Router,\n    private elRef: ElementRef,\n    private exportAsService: ExportAsService\n  ) {\n    this.setNow();\n\n    this.langSub = this.languageService.currentLanguage.subscribe((lang) => {\n      this.currentLang = lang;\n      if (this.currentLang && this.currentLang === 'ar') {\n        this.arabic = true;\n      } else {\n        this.arabic = false;\n      }\n    });\n\n    this.lastPageSub = this.productsService.lastParsedPage.subscribe((data) => {\n      if (data) {\n        if (!this.newPagination && data) {\n          this.newPagination = data;\n        }\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.langSub.unsubscribe();\n    this.lastPageSub.unsubscribe();\n  }\n\n  ngOnInit(): void {\n    this.spinner.show();\n\n    this.productsService.getAll();\n\n    this.productsService.products.subscribe(async (data) => {\n      if (data) {\n        this.items = data;\n\n        data.sort((a, b) => (a.active === b.active ? 0 : !a.active ? -1 : 1));\n\n        this.itemResource = new DataTableResource(data);\n        this.itemCount = await this.itemResource.count();\n\n        this.reloadItems({\n          offset: 0,\n          limit: this.limit,\n        });\n\n        if (this.newPagination) {\n          let nextBtn = this.elRef.nativeElement.querySelector(\n            'button.btn.btn-default.pagination-nextpage'\n          );\n          let previousBtn = this.elRef.nativeElement.querySelector(\n            'button.btn.btn-default.pagination-prevpage'\n          );\n\n          let clicks = this.newPagination.offset / 20;\n          for (let index = 0; index < clicks; index++) {\n            nextBtn.click();\n          }\n          return previousBtn.click();\n        }\n      }\n    });\n\n    this.spinner.hide();\n  }\n\n  savePagination() {\n    this.productsService.pagination(this.lastPagination);\n  }\n\n  async reloadItems(event) {\n    this.lastPagination = event;\n\n    if (this.itemResource) {\n      this.tableElements = await this.itemResource.query(event);\n    }\n  }\n\n  async FilterRecords(FilterRecord) {\n    this.tableElements = this.items;\n    if (FilterRecord !== '') {\n      this.tableElements = this.items.filter(\n        (item) =>\n          item.name.toLowerCase().includes(FilterRecord) ||\n          item.category?.en.toLowerCase().includes(FilterRecord) ||\n          item.creator?.name.toLowerCase().includes(FilterRecord) ||\n          item.store?.name.toLowerCase().includes(FilterRecord)\n      );\n    }\n\n    this.itemResource = new DataTableResource(this.tableElements);\n    this.itemCount = await this.itemResource.count();\n    this.reloadItems({\n      offset: 0,\n      limit: this.limit,\n    });\n  }\n\n  // Start select dropdown\n  selectStoresList: InputSelectItem[];\n  selectedStoreId: string;\n  getStoresList() {\n    this.spinner.show();\n\n    this.storesService.getAll();\n\n    this.storesService.stores.subscribe((data) => {\n      if (data) {\n        this.selectStoresList = data.map((x) => {\n          return {\n            _id: x['_id'],\n            nameEn: `${x['name']}`,\n            nameAr: ``,\n          };\n        });\n      }\n    });\n\n    this.spinner.hide();\n  }\n  selectStore(event) {\n    if (event) {\n      this.selectedStoreId = event._id;\n    }\n  }\n  // End select dropdown\n\n  addProductToStore() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService\n      .addProductToStore(this.itemId, this.selectedStoreId)\n      .subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n          this.items = [];\n\n          this.productsService.getAll();\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n\n    this.spinner.hide();\n  }\n\n  itemId;\n  openModal(template: TemplateRef<any>, id) {\n    this.itemId = id;\n    this.modalRef = this.modalService.show(template);\n  }\n\n  discountForm = this.fb.group({\n    discountType: [''],\n    discountValue: [0],\n    discountPercentage: [0],\n    validTill: [],\n  });\n\n  minDate = new Date();\n  datePickerValue: Date = new Date();\n  time: string;\n  forPeriod = false;\n  setNow() {\n    let now = new Date();\n    let hours = ('0' + now.getHours()).slice(-2);\n    let minutes = ('0' + now.getMinutes()).slice(-2);\n    let str = hours + ':' + minutes;\n    this.time = str;\n  }\n  changePeriod(event) {\n    if (!event.target.checked) {\n      this.discountForm.get('validTill').patchValue(undefined);\n    }\n  }\n\n  copyElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.copyOne(this.itemId).subscribe(\n      (res) => {\n        this.toastr.info(res['message'], 'Info');\n        this.items = [];\n\n        this.productsService.getAll();\n        this.router.navigate([`./products/edit/${res['data']._id}`]);\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  addDiscount() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n\n    if (this.forPeriod) {\n      var validTill = new Date(\n        this.datePickerValue.getFullYear(),\n        this.datePickerValue.getMonth(),\n        this.datePickerValue.getDate(),\n        parseInt(this.time.split(':')[0]),\n        parseInt(this.time.split(':')[1]),\n        0\n      );\n\n      this.discountForm.get('validTill').patchValue(validTill);\n    }\n\n    this.productsService\n      .addDiscount(this.discountForm.value, this.itemId)\n      .subscribe(\n        (res) => {\n          this.toastr.info(res['message'], 'Info');\n          this.items = [];\n\n          this.discountForm.reset();\n          this.productsService.getAll();\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n\n    this.spinner.hide();\n  }\n\n  deleteDiscount() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.deleteDiscount(this.itemId).subscribe(\n      (res) => {\n        this.toastr.info(res['message'], 'Info');\n        this.items = [];\n\n        this.productsService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  deleteElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.deleteOne(this.itemId).subscribe(\n      (res) => {\n        this.toastr.info(res['message'], 'Info');\n        this.productsService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  activateElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.activateOne(this.itemId).subscribe(\n      (res) => {\n        this.toastr.info(res['message'], 'Info');\n        this.items = [];\n\n        this.productsService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  deactivateElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.deactivateOne(this.itemId).subscribe(\n      (res) => {\n        this.toastr.info(res['message'], 'Info');\n        this.items = [];\n\n        this.productsService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  soldElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.soldOne(this.itemId).subscribe(\n      (res) => {\n        this.toastr.info(res['message'], 'Info');\n        this.items = [];\n\n        this.productsService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  availableElement() {\n    this.spinner.show();\n\n    this.modalRef.hide();\n    this.productsService.availableOne(this.itemId).subscribe(\n      (res) => {\n        this.toastr.info(res['message'], 'Info');\n        this.items = [];\n\n        this.productsService.getAll();\n      },\n      (error) => {\n        console.log(error);\n        this.toastr.error(error.error.message, 'Error');\n        // this.error.next(error.error.message);\n      }\n    );\n\n    this.spinner.hide();\n  }\n\n  exportAsConfig: ExportAsConfig = {\n    type: 'pdf',\n    elementIdOrContent: 'my-table',\n    options: {\n      jsPDF: {\n        orientation: 'landscape',\n      },\n    },\n  };\n  exportAs(type: SupportedExtensions, opt?: string) {\n    this.exportAsConfig.type = type;\n    if (opt) {\n      this.exportAsConfig.options.jsPDF.orientation = opt;\n    }\n    this.exportAsService.save(this.exportAsConfig, 'Products').subscribe(() => {\n      // save started\n    });\n    this.exportAsService.get(this.exportAsConfig).subscribe((content) => {\n    });\n  }\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { ModalModule } from 'ngx-bootstrap/modal';\nimport { DataTableModule } from 'angular7-data-table';\nimport { BsDatepickerModule } from 'ngx-bootstrap/datepicker';\nimport { ExportAsModule } from 'ngx-export-as';\n\nimport { ProductsRoutingModule } from './products-routing.module';\n\nimport { FormFieldsModule } from 'src/app/reusable-components/form-fields/form-fields.module';\n\nimport { ProductsComponent } from './products.component';\nimport { AddProductComponent } from './add-product/add-product.component';\nimport { EditProductComponent } from './edit-product/edit-product.component';\n\nimport { NgxSpinnerModule } from 'ngx-spinner';\n\nimport { SharedModule } from '../../shared/shared.module';\n\n@NgModule({\n  declarations: [ProductsComponent, AddProductComponent, EditProductComponent],\n  imports: [\n    CommonModule,\n    ProductsRoutingModule,\n    FormsModule,\n    FormFieldsModule,\n    DataTableModule.forRoot(),\n    BsDatepickerModule.forRoot(),\n    TooltipModule.forRoot(),\n    ModalModule.forRoot(),\n    NgxSpinnerModule,\n    ExportAsModule,\n    SharedModule,\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\n})\nexport class ProductsModule {}\n"]}