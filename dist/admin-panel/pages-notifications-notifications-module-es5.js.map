{"version":3,"sources":["webpack:///src/app/pages/notifications/notifications-routing.module.ts","webpack:///src/app/pages/notifications/notifications.component.html","webpack:///src/app/pages/notifications/notifications.component.ts","webpack:///src/app/pages/notifications/notifications.module.ts","webpack:///src/app/pages/notifications/notifications.service.ts"],"names":["routes","path","component","NotificationsRoutingModule","forChild","imports","exports","modalRef","NotificationsComponent","elementRef","fb","notificationService","usersService","modalService","languageService","toastr","spinner","items","itemCount","limit","limits","offset","tableElements","selectedRows","fcmTokens","form","group","title","required","message","langSub","currentLanguage","subscribe","lang","currentLang","arabic","unsubscribe","getData","nativeElement","querySelector","addEventListener","selectAllClick","bind","event","checked","show","getAll","users","data","length","itemResource","count","reloadItems","hide","query","template","FilterRecord","filter","item","toLowerCase","owner","shipper","leader","name","includes","phone","toString","address","bikeMake","bikeYear","bikeModel","row","_selected","push","splice","indexOf","index","fcmToken","newForm","value","error","send","res","console","log","info","sendAll","sendMultiCast","reset","openModal","FilterRecords","selector","templateUrl","styleUrls","NotificationsModule","forRoot","declarations","providers","schemas","NotificationsService","http","post","providedIn"],"mappings":"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","file":"pages-notifications-notifications-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NotificationsComponent } from './notifications.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationsComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NotificationsRoutingModule {}\n","<div class=\"grid-center-noGutter\">\n    <div class=\"col-20_sm-22_xs-23\" style=\"margin-top: 20px\">\n        <div class=\"card\">\n            <div class=\"card-header grid-noGutter\">\n                <span>{{ \"Notifications\" | lowercase | translate }}</span>\n            </div>\n            <div class=\"card-body grid-center-noGutter\">\n                <div class=\"col-24 grid-spaceBetween-noGutter\">\n                    <div class=\"card xs-hidden\">\n                        <div class=\"card-body\">\n                            <span style=\"\n                  display: inline-block;\n                  background-color: #4899c2;\n                  padding: 15px;\n                  color: white;\n                \">\n                <i class=\"material-icons\">home</i>\n              </span>\n                            <div style=\"display: inline-block; margin: 0 10px\">\n                                <div style=\"color: #20a8d8; font-size: 18px; font-weight: 600\">\n                                    {{ items.length }}\n                                </div>\n                                <div style=\"color: #73818f; font-size: 80%; font-weight: 700\">\n                                    {{ \"Notifications\" | lowercase | translate }}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-top xs-24 grid-noGutter\" style=\"margin-top: 15px\">\n                        <div class=\"col-4_lg-6_sm-10 grid-column-noGutter\">\n                            <a (click)=\"openModal(templateNotification)\" class=\"btn color1 round addbtn\">{{ \"add\" | lowercase | translate }}\n                {{ \"notification\" | lowercase | translate }}</a\n              >\n            </div>\n          </div>\n        </div>\n        <div class=\"col-24 grid-center-noGutter\" style=\"margin-top: 20px\">\n          <div class=\"col-24 grid-noGutter\">\n            <div\n              class=\"col-12_xs-24 grid-left-noGutter\"\n              style=\"margin-left: 10px\"\n            >\n              <label class=\"col-24 grid\" style=\"font-weight: bold\" for=\"\">{{\n                \"search for\" | lowercase | translate\n              }}</label>\n              <div class=\"col-24 grid\">\n                <input\n                  type=\"text\"\n                  #FilterRecord\n                  class=\"form-control col\"\n                  placeholder=\"e.g. English Name\"\n                />\n                <a\n                  (click)=\"FilterRecords(FilterRecord.value)\"\n                  class=\"btn col-4 color1 round search\"\n                >\n                  <span class=\"md-hidden\">{{\n                    \"search\" | lowercase | translate\n                  }}</span>\n                  <span><i class=\"material-icons\">search</i></span>\n                </a>\n                            <a (click)=\"FilterRecords(''); FilterRecord.value = ''\" class=\"btn col-4 color2 round search\">\n                                <span class=\"md-hidden\">{{\n                    \"Clear\" | lowercase | translate\n                  }}</span>\n                                <span><i class=\"material-icons\">clear</i></span>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"grid-center-noGutter\" style=\"margin-top: 20px\">\n        <ng-container>\n            <ng-container *ngTemplateOutlet=\"table\"></ng-container>\n        </ng-container>\n    </div>\n</div>\n</div>\n\n<ng-template #table>\n    <div>\n        <data-table id=\"my-table\" title=\"List of Users\" [items]=\"tableElements\" [itemCount]=\"itemCount\" [pageLimits]=\"limits\" [limit]=\"limit\" [pagination]=\"true\" (reload)=\"reloadItems($event)\" [noDataMessage]=\"'No data to show'\" [selectColumn]=\"true\" [multiSelect]=\"true\"\n            [selectOnRowClick]=\"true\" (rowClick)=\"selectRow($event)\">\n            <data-table-column [property]=\"'name'\" [header]=\"arabic ? 'الاسم' : 'Name'\" [sortable]=\"true\">\n            </data-table-column>\n            <!-- <data-table-column\n        [property]=\"'phone'\"\n        [header]=\"arabic ? 'الهاتف' : 'Phone'\"\n      >\n      </data-table-column> -->\n\n            <data-table-column [property]=\"'fcmToken'\" [header]=\"arabic ? 'الاشعارات' : 'Notifications'\">\n                <ng-template #dataTableCell let-item=\"item\">\n                    {{ item.fcmToken && item.fcmToken !== \"\" ? \"Available\" : \"N/A\" }}\n                </ng-template>\n            </data-table-column>\n\n            <data-table-column [header]=\"arabic ? 'الدرجة' : 'type'\">\n                <ng-template #dataTableCell let-item=\"item\">\n                    <div>\n                        <ng-container *ngIf=\"item.admin\">\n                            <div>Admin</div>\n                        </ng-container>\n                        <ng-container *ngIf=\"item.owner\">\n                            <div>Owner</div>\n                        </ng-container>\n                        <ng-container *ngIf=\"item.leader\">\n                            <div>President</div>\n                        </ng-container>\n                        <ng-container *ngIf=\"!item.admin && !item.owner && !item.leader\">\n                            <div>User</div>\n                        </ng-container>\n                    </div>\n                </ng-template>\n            </data-table-column>\n\n            <!-- <data-table-column\n        [property]=\"'address'\"\n        [header]=\"arabic ? 'العنوان' : 'Address'\"\n      >\n      </data-table-column> -->\n\n            <data-table-column [property]=\"'bikeMake'\" [header]=\"arabic ? 'صنع الدراجة' : 'Bike Make'\" [sortable]=\"true\">\n            </data-table-column>\n\n            <data-table-column [property]=\"'bikeYear' || 'bikeModel'\" [header]=\"arabic ? 'سنة الدراجة' : 'Bike Year'\">\n            </data-table-column>\n        </data-table>\n    </div>\n</ng-template>\n\n<ng-template #templateNotification id=\"template2\">\n    <div class=\"modal-header\">\n        <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"modalRef.hide()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    </div>\n    <div class=\"modal-body\">\n        <div class=\"col-24 grid-noGutter\">\n            <div class=\"col-24\">\n                <div class=\"col-24 grid\">\n                    <app-input-text class=\"col-24\" [label]=\"'Title'\" [fieldId]=\"'title'\" type=\"text\" [placeholder]=\"'Add Title'\" [control]=\"form.get('title')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                    </app-input-text>\n                    <app-input-text class=\"col-24\" [label]=\"'Message'\" [fieldId]=\"'message'\" type=\"text\" [placeholder]=\"'Add Message'\" [control]=\"form.get('message')\" [fieldClass]=\"'col-19_xlg-18_lg-17_md-24'\">\n                    </app-input-text>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"grid-right\">\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color1 round\" style=\"margin-right: 10px\" (click)=\"sendNotification()\">\n        {{ \"Submit\" | lowercase | translate }}\n      </button>\n            <button type=\"button\" class=\"btn col-5_sm-5_xs-6 color2 round\" (click)=\"modalRef.hide()\">\n        {{ \"Cancel\" | lowercase | translate }}\n      </button>\n        </div>\n    </div>\n</ng-template>","import {\n  Component,\n  OnInit,\n  TemplateRef,\n  OnDestroy,\n  ElementRef,\n} from '@angular/core';\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\nimport { ToastrService } from 'ngx-toastr';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { DataTableResource } from 'angular7-data-table';\n\nimport { LanguageService } from '../../services/language.service';\nimport { Subscription } from 'rxjs';\n\nimport { NotificationsService } from './notifications.service';\nimport { UsersService } from '../users/users.service';\n\nimport { FormBuilder, Validators, FormArray } from '@angular/forms';\n\n@Component({\n  selector: 'app-notifications',\n  templateUrl: './notifications.component.html',\n  styleUrls: ['./notifications.component.scss'],\n})\nexport class NotificationsComponent implements OnInit, OnDestroy {\n  itemResource;\n  items = [];\n  itemCount = 0;\n  limit = 20;\n  limits = [20, 25, 50];\n  offset = 1;\n  tableElements = [];\n\n  modalRef: any;\n\n  private langSub: Subscription;\n  currentLang;\n  arabic: boolean;\n\n  constructor(\n    private elementRef: ElementRef,\n    private fb: FormBuilder,\n    private notificationService: NotificationsService,\n    private usersService: UsersService,\n    private modalService: BsModalService,\n    private languageService: LanguageService,\n    private toastr: ToastrService,\n    private spinner: NgxSpinnerService\n  ) {\n    this.langSub = this.languageService.currentLanguage.subscribe((lang) => {\n      this.currentLang = lang;\n      if (this.currentLang && this.currentLang === 'ar') {\n        this.arabic = true;\n      } else {\n        this.arabic = false;\n      }\n    });\n  }\n  ngOnDestroy(): void {\n    this.langSub.unsubscribe();\n  }\n\n  ngOnInit(): void {\n    this.getData();\n  }\n\n  ngAfterViewInit() {\n    if (\n      this.elementRef.nativeElement.querySelector(\n        \"input[type='checkbox'][title='select all rows']\"\n      )\n    ) {\n      this.elementRef.nativeElement\n        .querySelector(\"input[type='checkbox'][title='select all rows']\")\n        .addEventListener('click', this.selectAllClick.bind(this));\n    }\n  }\n  selectAllClick(event) {\n    if (event.path[0].checked) {\n      this.selectedRows = this.items;\n    } else {\n      this.selectedRows = [];\n    }\n  }\n  getData() {\n    this.spinner.show();\n\n    this.items = [];\n    this.tableElements = [];\n    this.usersService.getAll();\n    this.usersService.users.subscribe(async (data) => {\n      if (data) {\n        this.items = data;\n\n        if (data.length > this.limits[0]) {\n          this.limit = data.length;\n          this.limits[0] = data.length;\n        }\n\n        this.itemResource = new DataTableResource(data);\n        this.itemCount = await this.itemResource.count();\n        this.reloadItems({\n          offset: 0,\n          limit: this.limit,\n        });\n      }\n    });\n\n    this.spinner.hide();\n  }\n\n  async reloadItems(event) {\n    if (this.itemResource) {\n      this.tableElements = await this.itemResource.query(event);\n    }\n  }\n\n  openModal(template: TemplateRef<any>) {\n    this.modalRef = this.modalService.show(template);\n  }\n\n  async FilterRecords(FilterRecord) {\n    this.tableElements = this.items;\n    if (FilterRecord !== '') {\n      this.tableElements = this.items.filter((item) => {\n        if (FilterRecord.toLowerCase() === 'owner') {\n          return item.owner;\n        } else if (FilterRecord.toLowerCase() === 'shipper') {\n          return item.shipper;\n        } else if (FilterRecord.toLowerCase() === 'president') {\n          return item.leader;\n        } else if (FilterRecord.toLowerCase() === 'user') {\n          return !item.owner && !item.shipper && !item.leader;\n        } else {\n          return (\n            item.name.toLowerCase().includes(FilterRecord) ||\n            item.phone?.toString().includes(FilterRecord) ||\n            item.address?.toLowerCase().includes(FilterRecord) ||\n            item.bikeMake?.toLowerCase().includes(FilterRecord) ||\n            item.bikeYear?.toString().includes(FilterRecord) ||\n            item.bikeModel?.toString().includes(FilterRecord)\n          );\n        }\n      });\n    }\n\n    this.itemResource = new DataTableResource(this.tableElements);\n    this.itemCount = await this.itemResource.count();\n    this.reloadItems({\n      offset: 0,\n      limit: this.limit,\n    });\n  }\n\n  selectedRows = [];\n\n  fcmTokens = [];\n  selectRow(event) {\n    if (!event.row._selected) {\n      this.selectedRows.push(event.row.item);\n    } else {\n      this.selectedRows.splice(this.selectedRows.indexOf(event.row.item), 1);\n    }\n  }\n\n  form = this.fb.group({\n    title: ['', Validators.required],\n    message: ['', Validators.required],\n  });\n  sendNotification() {\n    this.spinner.show();\n\n    for (let index = 0; index < this.selectedRows.length; index++) {\n      const row = this.selectedRows[index];\n\n      if (row.fcmToken) {\n        this.fcmTokens.push(row.fcmToken);\n      }\n    }\n\n    let newForm = { ...this.form.value, fcmTokens: this.fcmTokens };\n\n    if (this.fcmTokens.length === 0) {\n      return this.toastr.error(\n        'Select at least one user with available notification',\n        'Error'\n      );\n    } else if (this.fcmTokens.length === 1) {\n      this.notificationService.send(newForm).subscribe(\n        (res) => {\n          console.log(res);\n          this.toastr.info(res['message'], 'Info');\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n    } else if (this.selectedRows === this.items) {\n      this.notificationService.sendAll(this.form.value).subscribe(\n        (res) => {\n          console.log(res);\n          this.toastr.info(res['message'], 'Info');\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n    } else {\n      this.notificationService.sendMultiCast(newForm).subscribe(\n        (res) => {\n          console.log(res);\n          this.toastr.info(res['message'], 'Info');\n        },\n        (error) => {\n          console.log(error);\n          this.toastr.error(error.error.message, 'Error');\n          // this.error.next(error.error.message);\n        }\n      );\n    }\n\n    this.selectedRows = [];\n    this.fcmTokens = [];\n    this.form.reset();\n    this.getData();\n\n    this.spinner.hide();\n    this.modalRef.hide();\n  }\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NotificationsRoutingModule } from './notifications-routing.module';\nimport { NotificationsComponent } from './notifications.component';\n\nimport { FormFieldsModule } from 'src/app/reusable-components/form-fields/form-fields.module';\n\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { ModalModule } from 'ngx-bootstrap/modal';\nimport { DataTableModule } from 'angular7-data-table';\nimport { ExportAsModule } from 'ngx-export-as';\n\nimport { SharedModule } from '../../shared/shared.module';\n\n@NgModule({\n  declarations: [NotificationsComponent],\n  imports: [\n    CommonModule,\n    NotificationsRoutingModule,\n    FormFieldsModule,\n    TooltipModule.forRoot(),\n    ModalModule.forRoot(),\n    DataTableModule.forRoot(),\n    ExportAsModule,\n\n    SharedModule,\n  ],\n  providers: [],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\n})\nexport class NotificationsModule {}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { baseUrl } from '../../config/variables';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NotificationsService {\n  constructor(private http: HttpClient) {}\n  send(form) {\n    return this.http.post(baseUrl + '/notification/single', form);\n  }\n\n  sendMultiCast(form) {\n    return this.http.post(baseUrl + '/notification/multiple', form);\n  }\n\n  sendAll(form) {\n    return this.http.post(baseUrl + '/notification/all', form);\n  }\n}\n"]}