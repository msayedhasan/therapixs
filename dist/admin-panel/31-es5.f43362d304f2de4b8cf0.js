function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{a1ig:function(t,e,o){"use strict";o.r(e),o.d(e,"ProductsModule",(function(){return Mt}));var r=o("ofXK"),n=o("3Pt+"),i=o("Mfq2"),a=o("K3ix"),c=o("EMDr"),s=o("hzby"),l=o("i4u0"),d=o("tyNb"),b=o("mrSG"),u=o("fXoL"),p=o("wVH1"),g=o("ejEA"),f=o("5eHb"),h=o("JqCM"),m=o("bbck"),v=o("8R4r"),C=o("eNH8"),y=o("sYmb");function _(t,e){1&t&&u.Sb(0)}function V(t,e){if(1&t&&u.Rb(0,"img",49),2&t){var o=e.item;u.nc("src",o.photos?o.photos[0]:"../../../../../assets/placeholder.png",u.Bc)}}function x(t,e){if(1&t&&(u.Wb(0,"span"),u.Ic(1),u.Vb()),2&t){var o=e.item;u.Cb(1),u.Jc(o.profitPercentage&&0!==o.profitPercentage?o.profitPercentage+"%":o.profitValue&&0!==o.profitValue?o.profitValue+" EGP":0)}}function P(t,e){if(1&t&&(u.Wb(0,"span"),u.Ic(1),u.Vb()),2&t){var o=e.item;u.Cb(1),u.Jc(o.discountPercentage&&0!==o.discountPercentage?o.discountPercentage+"%":o.discountValue&&0!==o.discountValue?o.discountValue+" EGP":0)}}function k(t,e){if(1&t&&(u.Wb(0,"span"),u.Ic(1),u.Vb()),2&t){var o=e.item;u.Cb(1),u.Jc(null==o.properties[0]?null:o.properties[0].price)}}function I(t,e){if(1&t&&(u.Wb(0,"span"),u.Ic(1),u.Vb()),2&t){var o=e.item;u.Cb(1),u.Jc(o.creator?o.creator.name:"-")}}function W(t,e){if(1&t&&(u.Wb(0,"span"),u.Ic(1),u.Vb()),2&t){var o=e.item;u.Cb(1),u.Jc(o.store?o.store.name:"-")}}function O(t,e){if(1&t&&(u.Wb(0,"span"),u.Ic(1),u.Vb()),2&t){var o=e.item;u.Cb(1),u.Jc(o.category.en)}}function M(t,e){1&t&&(u.Ub(0),u.Wb(1,"span",51),u.Ic(2,"Sold"),u.Vb(),u.Tb())}function w(t,e){1&t&&(u.Ub(0),u.Wb(1,"span",52),u.Ic(2,"active"),u.Vb(),u.Tb())}function A(t,e){1&t&&(u.Ub(0),u.Wb(1,"span",53),u.Ic(2,"inactive"),u.Vb(),u.Tb())}function S(t,e){if(1&t&&(u.Wb(0,"div"),u.Gc(1,M,3,0,"ng-container",50),u.Gc(2,w,3,0,"ng-container",50),u.Gc(3,A,3,0,"ng-container",50),u.Vb()),2&t){var o=e.item;u.Cb(1),u.nc("ngIf",o.sold),u.Cb(1),u.nc("ngIf",o.active),u.Cb(1),u.nc("ngIf",!o.active)}}var D=function(t){return["./edit/",t]};function G(t,e){if(1&t){var o=u.Xb();u.Wb(0,"a",54),u.Wb(1,"i",9),u.Ic(2,"colorize"),u.Vb(),u.Vb(),u.Wb(3,"a",55),u.ec("click",(function(){u.zc(o);var t=e.item,r=u.ic(2),n=u.wc(69);return!t.store&&r.openModal(n,t._id),r.getStoresList()})),u.Wb(4,"i",9),u.Ic(5),u.Vb(),u.Vb(),u.Wb(6,"a",55),u.ec("click",(function(){u.zc(o);var t=e.item,r=u.ic(2),n=u.wc(73),i=u.wc(71);return r.openModal(t.active?n:i,t._id)})),u.Wb(7,"i",9),u.Ic(8),u.Vb(),u.Vb(),u.Wb(9,"a",55),u.ec("click",(function(){u.zc(o);var t=e.item,r=u.ic(2),n=u.wc(77),i=u.wc(79);return r.openModal(t.sold?n:i,t._id)})),u.Wb(10,"i",9),u.Ic(11),u.Vb(),u.Vb(),u.Wb(12,"a",56),u.ec("click",(function(){u.zc(o);var t=e.item,r=u.ic(2),n=u.wc(67),i=u.wc(65);return r.openModal(t.discount?n:i,t._id)})),u.Wb(13,"i",9),u.Ic(14,"qr_code_2"),u.Vb(),u.Vb(),u.Wb(15,"a",57),u.ec("click",(function(){u.zc(o);var t=e.item,r=u.ic(2),n=u.wc(75);return r.openModal(n,t._id)})),u.Wb(16,"i",9),u.Ic(17,"delete"),u.Vb(),u.Vb()}if(2&t){var r=e.item;u.nc("routerLink",u.qc(14,D,r._id))("tooltip","Edit"),u.Cb(3),u.nc("ngClass",r.store?"":"lock")("tooltip",r.store?"":"add to store"),u.Cb(2),u.Jc(r.store?"":"store"),u.Cb(1),u.nc("ngClass",r.active?"trash":"lock")("tooltip",r.active?"deactivate":"Activate"),u.Cb(2),u.Jc(r.active?"block":"check_circle_outline"),u.Cb(1),u.nc("ngClass",r.sold?"lock":"trash")("tooltip",r.sold?"Available":"Sold"),u.Cb(2),u.Jc(r.sold?"done_outline":"done_all"),u.Cb(1),u.Eb(r.discount?"trash":"lock"),u.nc("tooltip",r.discount?"Delete discount":"Add discount")}}function R(t,e){if(1&t){var o=u.Xb();u.Wb(0,"div"),u.Wb(1,"data-table",40),u.ec("reload",(function(t){return u.zc(o),u.ic().reloadItems(t)})),u.Wb(2,"data-table-column",41),u.Gc(3,V,1,1,"ng-template",null,42,u.Hc),u.Vb(),u.Rb(5,"data-table-column",43),u.Wb(6,"data-table-column",43),u.Gc(7,x,2,1,"ng-template",null,42,u.Hc),u.Vb(),u.Wb(9,"data-table-column",43),u.Gc(10,P,2,1,"ng-template",null,42,u.Hc),u.Vb(),u.Wb(12,"data-table-column",44),u.Gc(13,k,2,1,"ng-template",null,42,u.Hc),u.Vb(),u.Wb(15,"data-table-column",45),u.Gc(16,I,2,1,"ng-template",null,42,u.Hc),u.Vb(),u.Wb(18,"data-table-column",45),u.Gc(19,W,2,1,"ng-template",null,42,u.Hc),u.Vb(),u.Wb(21,"data-table-column",43),u.Gc(22,O,2,1,"ng-template",null,42,u.Hc),u.Vb(),u.Wb(24,"data-table-column",46),u.Gc(25,S,4,3,"ng-template",null,42,u.Hc),u.Vb(),u.Wb(27,"data-table-column",47),u.Gc(28,G,18,16,"ng-template",48,42,u.Hc),u.Vb(),u.Vb(),u.Vb()}if(2&t){var r=u.ic();u.Cb(1),u.nc("items",r.tableElements)("itemCount",r.itemCount)("pageLimits",r.limits)("limit",r.limit)("pagination",!0)("noDataMessage","No data to show"),u.Cb(1),u.nc("width",50)("property","image")("resizable",!0)("header","Img"),u.Cb(3),u.nc("property","name")("header","Name")("sortable",!0),u.Cb(1),u.nc("property","profit")("header","Profit")("sortable",!0),u.Cb(3),u.nc("property","discount")("header","Discount")("sortable",!0),u.Cb(3),u.nc("header","Price"),u.Cb(3),u.nc("property","creator")("header","Creator"),u.Cb(3),u.nc("property","store")("header","Store"),u.Cb(3),u.nc("property","category")("header","Category")("sortable",!0),u.Cb(3),u.nc("property","active")("width",68)("header","Status")("sortable",!0),u.Cb(3),u.nc("width",160)}}function z(t,e){if(1&t){var o=u.Xb();u.Ub(0),u.Wb(1,"app-input-text",77),u.ec("change",(function(){return u.zc(o),u.ic(2).discountForm.get("discountPercentage").patchValue(0)})),u.Vb(),u.Tb()}if(2&t){var r=u.ic(2);u.Cb(1),u.nc("label","Discount value")("fieldId","discountValue")("placeholder","Discount on this category")("control",r.discountForm.get("discountValue"))("fieldClass","col-19_xlg-18_lg-17_md-24")}}function q(t,e){if(1&t){var o=u.Xb();u.Ub(0),u.Wb(1,"app-input-text",77),u.ec("change",(function(){return u.zc(o),u.ic(2).discountForm.get("discountValue").patchValue(0)})),u.Vb(),u.Tb()}if(2&t){var r=u.ic(2);u.Cb(1),u.nc("label","Discount percent")("fieldId","discountPercentage")("placeholder","Discount on this category")("control",r.discountForm.get("discountPercentage"))("fieldClass","col-19_xlg-18_lg-17_md-24")}}var E=function(){return{isAnimated:!0,adaptivePosition:!0}};function T(t,e){if(1&t){var o=u.Xb();u.hc(),u.gc(),u.Ub(0),u.Wb(1,"div",78),u.Wb(2,"label"),u.Ic(3,"Valid till: "),u.Vb(),u.Wb(4,"div",79),u.Wb(5,"input",80),u.ec("bsValueChange",(function(t){return u.zc(o),u.ic(2).datePickerValue=t})),u.Vb(),u.Wb(6,"input",81),u.ec("ngModelChange",(function(t){return u.zc(o),u.ic(2).time=t})),u.Vb(),u.Vb(),u.Vb(),u.Rb(7,"div",82),u.Tb()}if(2&t){var r=u.ic(2);u.Cb(5),u.nc("bsValue",r.datePickerValue)("minDate",r.minDate)("bsConfig",u.pc(4,E)),u.Cb(1),u.nc("ngModel",r.time)}}var L=function(){return["percent","value"]};function j(t,e){if(1&t){var o=u.Xb();u.Wb(0,"div",58),u.Wb(1,"h4",59),u.Rb(2,"i",60),u.Ic(3," Do you want to add this product to a store? "),u.Vb(),u.Wb(4,"button",61),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Wb(5,"span",62),u.Ic(6,"\xd7"),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"div",63),u.Wb(8,"div",17),u.Wb(9,"div",64),u.Wb(10,"div",20),u.Rb(11,"app-input-radio",65),u.Gc(12,z,2,5,"ng-container",50),u.Gc(13,q,2,5,"ng-container",50),u.Vb(),u.Vb(),u.Vb(),u.Wb(14,"div",17),u.Wb(15,"div",17),u.Wb(16,"div",66),u.Wb(17,"div",67),u.Wb(18,"label",68),u.Ic(19,"for a period"),u.Vb(),u.Vb(),u.Wb(20,"div",69),u.Wb(21,"label",70),u.Wb(22,"input",71),u.ec("ngModelChange",(function(t){return u.zc(o),u.ic().forPeriod=t}))("change",(function(t){return u.zc(o),u.ic().changePeriod(t)})),u.Vb(),u.Wb(23,"div"),u.hc(),u.Wb(24,"svg",72),u.Rb(25,"path",73),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Gc(26,T,8,5,"ng-container",50),u.Vb(),u.gc(),u.Wb(27,"div",74),u.Wb(28,"button",75),u.ec("click",(function(){return u.zc(o),u.ic().addDiscount()})),u.Ic(29," Confirm "),u.Vb(),u.Wb(30,"button",76),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Ic(31," Cancel "),u.Vb(),u.Vb(),u.Vb()}if(2&t){var r=u.ic();u.Cb(11),u.nc("label","Discount type")("fieldId","discountType")("items",u.pc(9,L))("control",r.discountForm.get("discountType"))("fieldClass","col-19_xlg-18_lg-17_md-24"),u.Cb(1),u.nc("ngIf","value"===r.discountForm.get("discountType").value),u.Cb(1),u.nc("ngIf","percent"===r.discountForm.get("discountType").value),u.Cb(9),u.nc("ngModel",r.forPeriod),u.Cb(4),u.nc("ngIf",r.forPeriod)}}function F(t,e){if(1&t){var o=u.Xb();u.Wb(0,"div",58),u.Wb(1,"h4",83),u.Rb(2,"i",84),u.Ic(3," Do you want to Delete discount from This product ? "),u.Vb(),u.Wb(4,"button",61),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Wb(5,"span",62),u.Ic(6,"\xd7"),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"div",63),u.Wb(8,"div",74),u.Wb(9,"button",75),u.ec("click",(function(){return u.zc(o),u.ic().deleteDiscount()})),u.Ic(10," Confirm "),u.Vb(),u.Wb(11,"button",76),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Ic(12," Cancel "),u.Vb(),u.Vb(),u.Vb()}}function B(t,e){if(1&t){var o=u.Xb();u.Wb(0,"div",58),u.Wb(1,"h4",59),u.Rb(2,"i",60),u.Ic(3," Do you want to add this product to a store? "),u.Vb(),u.Wb(4,"button",61),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Wb(5,"span",62),u.Ic(6,"\xd7"),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"div",63),u.Wb(8,"div",17),u.Wb(9,"app-select",85),u.ec("itemselected",(function(t){return u.zc(o),u.ic().selectStore(t)})),u.Vb(),u.Vb(),u.Wb(10,"div",74),u.Wb(11,"button",75),u.ec("click",(function(){return u.zc(o),u.ic().addProductToStore()})),u.Ic(12," Confirm "),u.Vb(),u.Wb(13,"button",76),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Ic(14," Cancel "),u.Vb(),u.Vb(),u.Vb()}if(2&t){var r=u.ic();u.Cb(9),u.nc("label","Store")("fieldId","store")("ItemsList",r.selectStoresList)("placeholder","Choose store")("fieldClass","col-18_md-24")("required",!0)}}function X(t,e){if(1&t){var o=u.Xb();u.Wb(0,"div",58),u.Wb(1,"h4",59),u.Rb(2,"i",84),u.Ic(3," Do you want to activate This Element ? "),u.Vb(),u.Wb(4,"button",61),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Wb(5,"span",62),u.Ic(6,"\xd7"),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"div",63),u.Wb(8,"div",74),u.Wb(9,"button",75),u.ec("click",(function(){return u.zc(o),u.ic().activateElement()})),u.Ic(10," Confirm "),u.Vb(),u.Wb(11,"button",76),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Ic(12," Cancel "),u.Vb(),u.Vb(),u.Vb()}}function Q(t,e){if(1&t){var o=u.Xb();u.Wb(0,"div",58),u.Wb(1,"h4",59),u.Rb(2,"i",84),u.Ic(3," Do you want to deactivate This Element ? "),u.Vb(),u.Wb(4,"button",61),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Wb(5,"span",62),u.Ic(6,"\xd7"),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"div",63),u.Wb(8,"div",74),u.Wb(9,"button",75),u.ec("click",(function(){return u.zc(o),u.ic().deactivateElement()})),u.Ic(10," Confirm "),u.Vb(),u.Wb(11,"button",76),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Ic(12," Cancel "),u.Vb(),u.Vb(),u.Vb()}}function U(t,e){if(1&t){var o=u.Xb();u.Wb(0,"div",58),u.Wb(1,"h4",83),u.Rb(2,"i",84),u.Ic(3," Do you want to Delete This Element ? "),u.Vb(),u.Wb(4,"button",61),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Wb(5,"span",62),u.Ic(6,"\xd7"),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"div",63),u.Wb(8,"div",74),u.Wb(9,"button",75),u.ec("click",(function(){return u.zc(o),u.ic().deleteElement()})),u.Ic(10," Confirm "),u.Vb(),u.Wb(11,"button",76),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Ic(12," Cancel "),u.Vb(),u.Vb(),u.Vb()}}function H(t,e){if(1&t){var o=u.Xb();u.Wb(0,"div",58),u.Wb(1,"h4",86),u.Rb(2,"i",87),u.Ic(3," Do you want to change this element status to be available? "),u.Vb(),u.Wb(4,"button",61),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Wb(5,"span",62),u.Ic(6,"\xd7"),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"div",63),u.Wb(8,"div",74),u.Wb(9,"button",75),u.ec("click",(function(){return u.zc(o),u.ic().availableElement()})),u.Ic(10," Confirm "),u.Vb(),u.Wb(11,"button",76),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Ic(12," Cancel "),u.Vb(),u.Vb(),u.Vb()}}function J(t,e){if(1&t){var o=u.Xb();u.Wb(0,"div",58),u.Wb(1,"h4",86),u.Rb(2,"i",87),u.Ic(3," Do you want to change this element status to be sold out? "),u.Vb(),u.Wb(4,"button",61),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Wb(5,"span",62),u.Ic(6,"\xd7"),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"div",63),u.Wb(8,"div",74),u.Wb(9,"button",75),u.ec("click",(function(){return u.zc(o),u.ic().soldElement()})),u.Ic(10," Confirm "),u.Vb(),u.Wb(11,"button",76),u.ec("click",(function(){return u.zc(o),u.ic().modalRef.hide()})),u.Ic(12," Cancel "),u.Vb(),u.Vb(),u.Vb()}}var N,$=function(){return["./add"]},K=((N=function(){function t(e,o,r,n,i,a,c){_classCallCheck(this,t),this.productsService=e,this.storesService=o,this.modalService=r,this.toastr=n,this.spinner=i,this.fb=a,this.exportAsService=c,this.items=[],this.itemCount=0,this.limit=20,this.limits=[20,25,50],this.offset=1,this.tableElements=[],this.discountForm=this.fb.group({discountType:[""],discountValue:[0],discountPercentage:[0],validTill:[]}),this.minDate=new Date,this.datePickerValue=new Date,this.forPeriod=!1,this.exportAsConfig={type:"pdf",elementIdOrContent:"my-table",options:{jsPDF:{orientation:"landscape"}}},this.setNow()}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.spinner.show(),this.productsService.getAll(),this.productsService.products.subscribe((function(e){return Object(b.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,!t.t0){t.next=9;break}return this.items=e,e.sort((function(t,e){return t.active===e.active?0:t.active?1:-1})),this.itemResource=new c.d(e),t.next=7,this.itemResource.count();case 7:this.itemCount=t.sent,this.reloadItems({offset:0,limit:this.limit});case 9:case"end":return t.stop()}}),t,this)})))})),this.spinner.hide()}},{key:"reloadItems",value:function(t){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.itemResource,!e.t0){e.next=5;break}return e.next=4,this.itemResource.query(t);case 4:this.tableElements=e.sent;case 5:case"end":return e.stop()}}),e,this)})))}},{key:"FilterRecords",value:function(t){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tableElements=this.items,""!==t&&(this.tableElements=this.items.filter((function(e){var o;return e.name.toLowerCase().includes(t)||e.category.en.toLowerCase().includes(t)||e.creator.name.toLowerCase().includes(t)||(null===(o=e.store)||void 0===o?void 0:o.name.toLowerCase().includes(t))}))),this.itemResource=new c.d(this.tableElements),e.next=5,this.itemResource.count();case 5:this.itemCount=e.sent,this.reloadItems({offset:0,limit:this.limit});case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getStoresList",value:function(){var t=this;this.spinner.show(),this.storesService.getAll(),this.storesService.stores.subscribe((function(e){e&&(t.selectStoresList=e.map((function(t){return{_id:t._id,nameEn:"".concat(t.name),nameAr:""}})))})),this.spinner.hide()}},{key:"selectStore",value:function(t){t&&(this.selectedStoreId=t._id)}},{key:"addProductToStore",value:function(){var t=this;this.spinner.show(),this.modalRef.hide(),this.productsService.addProductToStore(this.itemId,this.selectedStoreId).subscribe((function(e){t.toastr.info(e.message,"Info"),t.items=[],t.productsService.getAll()}),(function(e){console.log(e),t.toastr.error(e.error.message,"Error")})),this.spinner.hide()}},{key:"openModal",value:function(t,e){this.itemId=e,this.modalRef=this.modalService.show(t)}},{key:"setNow",value:function(){var t=new Date,e=("0"+t.getHours()).slice(-2),o=("0"+t.getMinutes()).slice(-2);this.time=e+":"+o}},{key:"changePeriod",value:function(t){t.target.checked||this.discountForm.get("validTill").patchValue(void 0)}},{key:"addDiscount",value:function(){var t=this;if(this.spinner.show(),this.modalRef.hide(),this.forPeriod){var e=new Date(this.datePickerValue.getFullYear(),this.datePickerValue.getMonth(),this.datePickerValue.getDate(),parseInt(this.time.split(":")[0]),parseInt(this.time.split(":")[1]),0);this.discountForm.get("validTill").patchValue(e)}this.productsService.addDiscount(this.discountForm.value,this.itemId).subscribe((function(e){console.log(e),t.toastr.info(e.message,"Info"),t.items=[],t.discountForm.reset(),t.productsService.getAll()}),(function(e){console.log(e),t.toastr.error(e.error.message,"Error")})),this.spinner.hide()}},{key:"deleteDiscount",value:function(){var t=this;this.spinner.show(),this.modalRef.hide(),this.productsService.deleteDiscount(this.itemId).subscribe((function(e){console.log(e),t.toastr.info(e.message,"Info"),t.items=[],t.productsService.getAll()}),(function(e){console.log(e),t.toastr.error(e.error.message,"Error")})),this.spinner.hide()}},{key:"deleteElement",value:function(){var t=this;this.spinner.show(),this.modalRef.hide(),this.productsService.deleteOne(this.itemId).subscribe((function(e){console.log(e),t.toastr.info(e.message,"Info"),t.productsService.getAll()}),(function(e){console.log(e),t.toastr.error(e.error.message,"Error")})),this.spinner.hide()}},{key:"activateElement",value:function(){var t=this;this.spinner.show(),this.modalRef.hide(),this.productsService.activateOne(this.itemId).subscribe((function(e){console.log(e),t.toastr.info(e.message,"Info"),t.items=[],t.productsService.getAll()}),(function(e){console.log(e),t.toastr.error(e.error.message,"Error")})),this.spinner.hide()}},{key:"deactivateElement",value:function(){var t=this;this.spinner.show(),this.modalRef.hide(),this.productsService.deactivateOne(this.itemId).subscribe((function(e){console.log(e),t.toastr.info(e.message,"Info"),t.items=[],t.productsService.getAll()}),(function(e){console.log(e),t.toastr.error(e.error.message,"Error")})),this.spinner.hide()}},{key:"soldElement",value:function(){var t=this;this.spinner.show(),this.modalRef.hide(),this.productsService.soldOne(this.itemId).subscribe((function(e){console.log(e),t.toastr.info(e.message,"Info"),t.items=[],t.productsService.getAll()}),(function(e){console.log(e),t.toastr.error(e.error.message,"Error")})),this.spinner.hide()}},{key:"availableElement",value:function(){var t=this;this.spinner.show(),this.modalRef.hide(),this.productsService.availableOne(this.itemId).subscribe((function(e){console.log(e),t.toastr.info(e.message,"Info"),t.items=[],t.productsService.getAll()}),(function(e){console.log(e),t.toastr.error(e.error.message,"Error")})),this.spinner.hide()}},{key:"exportAs",value:function(t,e){this.exportAsConfig.type=t,e&&(this.exportAsConfig.options.jsPDF.orientation=e),this.exportAsService.save(this.exportAsConfig,"Products").subscribe((function(){})),this.exportAsService.get(this.exportAsConfig).subscribe((function(t){console.log(t)}))}}]),t}()).\u0275fac=function(t){return new(t||N)(u.Qb(p.a),u.Qb(g.a),u.Qb(a.a),u.Qb(f.b),u.Qb(h.c),u.Qb(n.d),u.Qb(l.b))},N.\u0275cmp=u.Kb({type:N,selectors:[["app-products"]],decls:80,vars:39,consts:[[1,"grid-center-noGutter"],[1,"col-20_sm-22_xs-23",2,"margin-top","20px"],[1,"card"],[1,"card-header","grid-noGutter"],[1,"card-body","grid-center-noGutter"],[1,"col-24","grid-spaceBetween-noGutter"],[1,"card","xs-hidden"],[1,"card-body"],[2,"display","inline-block","background-color","#4899c2","padding","15px","color","white"],[1,"material-icons"],[2,"display","inline-block","margin","0 10px"],[2,"color","#20a8d8","font-size","18px","font-weight","600"],[2,"color","#73818f","font-size","80%","font-weight","700"],[1,"col-top","xs-24","grid-noGutter",2,"margin-top","15px"],[1,"col-3_xlg-4_lg-6_sm-10","grid-column-noGutter"],[1,"btn","color1","round","addbtn",3,"routerLink"],[1,"col-24","grid-center-noGutter",2,"margin-top","20px"],[1,"col-24","grid-noGutter"],[1,"col-12_xs-24","grid-left-noGutter",2,"margin-left","10px"],["for","",1,"col-24","grid-noGutter",2,"font-weight","bold"],[1,"col-24","grid"],["type","text","placeholder","e.g. Name, Creator, Store",1,"form-control","col"],["FilterRecord",""],[1,"btn","col-4","color1","round","search",3,"click"],[1,"md-hidden"],[1,"btn","col-4","color2","round","search",3,"click"],[1,"grid-right-noGutter",2,"margin-top","20px"],[1,"btn","color5","round",3,"click"],[1,"grid-center-noGutter",2,"margin-top","20px"],[4,"ngTemplateOutlet"],["table",""],["id","template2"],["templateAddDiscount",""],["templateDeleteDiscount",""],["templateAddToStore",""],["templateActivate",""],["templateDeactivate",""],["templateDelete",""],["templateAvailable",""],["templateSold",""],["id","my-table","title","List of Products",3,"items","itemCount","pageLimits","limit","pagination","noDataMessage","reload"],[3,"width","property","resizable","header"],["dataTableCell",""],[3,"property","header","sortable"],[3,"header"],[3,"property","header"],[3,"property","width","header","sortable"],["header","Actions",3,"width"],["class","grid-center"],["width","30px","height","30px","alt","",3,"src"],[4,"ngIf"],[1,"badge","blocked"],[1,"badge","active"],[1,"badge","deleted"],["placement","bottom",1,"pencil",3,"routerLink","tooltip"],["placement","bottom","triggers","mouseenter:mouseleave",3,"ngClass","tooltip","click"],["placement","bottom","triggers","mouseenter:mouseleave",3,"tooltip","click"],["tooltip","Delete","placement","bottom","triggers","mouseenter:mouseleave",1,"trash",3,"click"],[1,"modal-header"],[2,"font-weight","bold","justify-content","center"],[1,"fa","fa-user","fa-lg","mt-4"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-24"],[1,"col-24",3,"label","fieldId","items","control","fieldClass"],[1,"col-11_sm-24","form-group","grid-center-middle-noGutter"],[1,"col_sm-24","grid_sm-noGutter","field-label"],["for","period"],[1,"col-11_sm-24","grid"],["tooltip","for specific time",1,"toggleButton"],["type","checkbox","id","period",3,"ngModel","ngModelChange","change"],["viewBox","0 0 44 44"],["d","M14,24 L21,31 L39.7428882,11.5937758 C35.2809627,6.53125861 30.0333333,4 24,4 C12.95,4 4,12.95 4,24 C4,35.05 12.95,44 24,44 C35.05,44 44,35.05 44,24 C44,19.3 42.5809627,15.1645919 39.7428882,11.5937758","transform","translate(-2.000000, -2.000000)"],[1,"grid-right"],["type","button",1,"btn","col-5_sm-5_xs-6","color1","round",2,"margin-right","10px",3,"click"],["type","button",1,"btn","col-5_sm-5_xs-6","color2","round",3,"click"],["type","number",1,"col-24",3,"label","fieldId","placeholder","control","fieldClass","change"],[1,"col-24","grid-middle-spaceBetween-noGutter"],[1,"col-19_xlg-18_lg-17_md-24","grid-noGutter"],["type","text","bsDatepicker","","autocomplete","off","placeholder","YYYY-MM-DD",1,"form-control","col",3,"bsValue","minDate","bsConfig","bsValueChange"],["type","time",1,"form-control","col",3,"ngModel","ngModelChange"],[2,"height","20px","width","100%"],[2,"color","red","font-weight","bold","justify-content","center"],[1,"fa","fa-trash","fa-lg","mt-4"],[1,"col-24",3,"label","fieldId","ItemsList","placeholder","fieldClass","required","itemselected"],[2,"color","#0c425d","font-weight","bold","justify-content","center"],[1,"fa","fa-lock","fa-lg","mt-4"]],template:function(t,e){if(1&t){var o=u.Xb();u.Wb(0,"div",0),u.Wb(1,"div",1),u.Wb(2,"div",2),u.Wb(3,"div",3),u.Wb(4,"span"),u.Ic(5),u.jc(6,"translate"),u.jc(7,"lowercase"),u.Vb(),u.Vb(),u.Wb(8,"div",4),u.Wb(9,"div",5),u.Wb(10,"div",6),u.Wb(11,"div",7),u.Wb(12,"span",8),u.Wb(13,"i",9),u.Ic(14,"home"),u.Vb(),u.Vb(),u.Wb(15,"div",10),u.Wb(16,"div",11),u.Ic(17),u.Vb(),u.Wb(18,"div",12),u.Ic(19),u.jc(20,"translate"),u.jc(21,"lowercase"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(22,"div",13),u.Wb(23,"div",14),u.Wb(24,"a",15),u.Ic(25),u.jc(26,"translate"),u.jc(27,"lowercase"),u.jc(28,"translate"),u.jc(29,"lowercase"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(30,"div",16),u.Wb(31,"div",17),u.Wb(32,"div",18),u.Wb(33,"label",19),u.Ic(34),u.jc(35,"translate"),u.jc(36,"lowercase"),u.Vb(),u.Wb(37,"div",20),u.Rb(38,"input",21,22),u.Wb(40,"a",23),u.ec("click",(function(){u.zc(o);var t=u.wc(39);return e.FilterRecords(t.value)})),u.Wb(41,"span",24),u.Ic(42),u.jc(43,"translate"),u.jc(44,"lowercase"),u.Vb(),u.Wb(45,"span"),u.Wb(46,"i",9),u.Ic(47,"search"),u.Vb(),u.Vb(),u.Vb(),u.Wb(48,"a",25),u.ec("click",(function(){u.zc(o);var t=u.wc(39);return e.FilterRecords(""),t.value=""})),u.Wb(49,"span",24),u.Ic(50),u.jc(51,"translate"),u.jc(52,"lowercase"),u.Vb(),u.Wb(53,"span"),u.Wb(54,"i",9),u.Ic(55,"clear"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(56,"div",26),u.Wb(57,"button",27),u.ec("click",(function(){return e.exportAs("xlsx")})),u.Ic(58," Export "),u.Vb(),u.Vb(),u.Wb(59,"div",28),u.Ub(60),u.Gc(61,_,1,0,"ng-container",29),u.Tb(),u.Vb(),u.Vb(),u.Vb(),u.Gc(62,R,30,32,"ng-template",null,30,u.Hc),u.Gc(64,j,32,10,"ng-template",31,32,u.Hc),u.Gc(66,F,13,0,"ng-template",31,33,u.Hc),u.Gc(68,B,15,6,"ng-template",31,34,u.Hc),u.Gc(70,X,13,0,"ng-template",31,35,u.Hc),u.Gc(72,Q,13,0,"ng-template",31,36,u.Hc),u.Gc(74,U,13,0,"ng-template",31,37,u.Hc),u.Gc(76,H,13,0,"ng-template",31,38,u.Hc),u.Gc(78,J,13,0,"ng-template",31,39,u.Hc)}if(2&t){var r=u.wc(63);u.Cb(5),u.Jc(u.kc(6,10,u.kc(7,12,"Products"))),u.Cb(12),u.Kc(" ",e.items.length," "),u.Cb(2),u.Kc(" ",u.kc(20,14,u.kc(21,16,"Products"))," "),u.Cb(5),u.nc("routerLink",u.pc(38,$)),u.Cb(1),u.Lc("",u.kc(26,18,u.kc(27,20,"add"))," ",u.kc(28,22,u.kc(29,24,"Product")),""),u.Cb(9),u.Jc(u.kc(35,26,u.kc(36,28,"Search for"))),u.Cb(8),u.Jc(u.kc(43,30,u.kc(44,32,"search"))),u.Cb(8),u.Jc(u.kc(51,34,u.kc(52,36,"Clear"))),u.Cb(11),u.nc("ngTemplateOutlet",r)}},directives:[d.d,r.q,c.a,c.b,r.m,i.a,r.k,m.a,n.a,n.k,n.n,v.a,s.b,s.a,n.c,C.a],pipes:[y.c,r.j],styles:['[_nghost-%COMP%]{display:block;background-color:#efedf2}[_nghost-%COMP%]    {border-radius:10px}[_nghost-%COMP%]     .data-table-header{padding:8px;margin-bottom:0!important;background-color:#f9f9f9;border:1px solid #f1f1f1;border-bottom:none;color:#555;border-radius:10px;border-bottom-left-radius:0;border-bottom-right-radius:0}[_nghost-%COMP%]     .data-table-header button{padding-top:0}[_nghost-%COMP%]     .data-table-box{border-radius:10px;border-top-left-radius:0;border-top-right-radius:0;padding:30px;border:1px solid #e9e9e9;border-top:0;border-bottom:0}[_nghost-%COMP%]     .data-table{box-shadow:none;border:1px solid #e9e9e9;color:#555}[_nghost-%COMP%]     .data-table thead{border-bottom:1px solid #999;font-size:16px}@media (max-width:1366px){[_nghost-%COMP%]     .data-table thead{font-size:14px}}[_nghost-%COMP%]     .data-table tbody{font-size:16px}@media (max-width:1366px){[_nghost-%COMP%]     .data-table tbody{font-size:12px}}[_nghost-%COMP%]     .data-table tbody td, [_nghost-%COMP%]     .data-table tbody th{font-size:13px;color:#555353;font-weight:400}[_nghost-%COMP%]     .data-table tbody td.index-column, [_nghost-%COMP%]     .data-table tbody th.index-column{font-weight:700}[_nghost-%COMP%]     .data-table tbody td[data-label=Status] span, [_nghost-%COMP%]     .data-table tbody th[data-label=Status] span{display:block;color:#fff;margin:2px 0;border-radius:10px}[_nghost-%COMP%]     .data-table tbody td[data-label=Status] span.blocked, [_nghost-%COMP%]     .data-table tbody th[data-label=Status] span.blocked{background-color:grey}[_nghost-%COMP%]     .data-table tbody td[data-label=Status] span.deleted, [_nghost-%COMP%]     .data-table tbody th[data-label=Status] span.deleted{background-color:#ff6b6b}[_nghost-%COMP%]     .data-table tbody td[data-label=Status] span.confirmed, [_nghost-%COMP%]     .data-table tbody th[data-label=Status] span.confirmed{background-color:#0c425d}[_nghost-%COMP%]     .data-table tbody td[data-label=Status] span.active, [_nghost-%COMP%]     .data-table tbody th[data-label=Status] span.active{background-color:#28a745}[_nghost-%COMP%]     .data-table tbody td[data-label=Status] span.pending, [_nghost-%COMP%]     .data-table tbody th[data-label=Status] span.pending{background-color:#a0a02e}[_nghost-%COMP%]     .data-table tbody td[data-label=Status] span.done, [_nghost-%COMP%]     .data-table tbody th[data-label=Status] span.done{background-color:#044970}[_nghost-%COMP%]     .data-table tbody img{border:1px solid #f1f1f1}[_nghost-%COMP%]     .data-table-wrapper{border-radius:10px;background-color:#fff;box-shadow:0 0 8px 1px rgba(0,0,0,.05);margin-bottom:20px}[_nghost-%COMP%]     .h4.title{font-weight:700;margin:0;font-size:16px}[_nghost-%COMP%]     data-table-pagination>div{justify-content:center!important}label[_ngcontent-%COMP%]{font-size:14px;font-weight:700;margin-bottom:5px}.btn.search[_ngcontent-%COMP%]{margin:0 5px;padding:4px 0;display:flex;align-items:center;justify-content:center}@media (max-width:1024px){.btn.search[_ngcontent-%COMP%]{padding:2px 0}}.btn.search[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{display:none}@media (max-width:1024px){.btn.search[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{display:flex;align-items:center;justify-content:center}}[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]     caption{display:none}[_nghost-%COMP%]     thead tr{height:40px;background-color:#f6f6f6;color:#555658}[_nghost-%COMP%]     thead tr th{padding:1rem 0}[_nghost-%COMP%]     tbody td, [_nghost-%COMP%]     tbody th{padding:.35rem}[_nghost-%COMP%]     .data-table-row:hover, [_nghost-%COMP%]     .row-odd{background-color:#f9f9f9!important}[_nghost-%COMP%]     .data-table-box{background-color:#fffdfe;border:1px solid #f1f1f1;margin-bottom:10px}[_nghost-%COMP%]     .table td, [_nghost-%COMP%]     .table th{border-top:1px solid #e9e9e9}[_nghost-%COMP%]     .data-table>thead>tr>td, [_nghost-%COMP%]     .table thead th{border-bottom:none}[_nghost-%COMP%]     th{font-weight:600}[_nghost-%COMP%]     td, [_nghost-%COMP%]     th{vertical-align:middle;text-align:center}[_nghost-%COMP%]     td.index-column{font-weight:700;font-size:13px}[_nghost-%COMP%]     .pagination-range{display:none}[_nghost-%COMP%]     .pagination-box{padding-bottom:12px;zoom:75%;align-items:center;width:95%}[_nghost-%COMP%]     .pagination-box .input-group .form-control{display:flex!important;width:auto!important;height:auto}[_nghost-%COMP%]     .pagination-box .input-group select{border-radius:0;border-top-right-radius:5px;border-bottom-right-radius:5px}[_nghost-%COMP%]     .index-column-header span:after{content:"ID"}a[_ngcontent-%COMP%]{padding:0 2px;border:0;transition:all .5s;background-color:transparent;cursor:pointer}a[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}a.pencil[_ngcontent-%COMP%]{color:#0c425d}a.trash[_ngcontent-%COMP%]{color:#c9302c}a.lock[_ngcontent-%COMP%]{color:#a8d2be}a.note[_ngcontent-%COMP%]{color:#f9ae4e}[_nghost-%COMP%]     bs-tooltip-container .tooltip-inner{background-color:#0c425d;color:#fff}[_nghost-%COMP%]     bs-tooltip-container .tooltip-arrow, [_nghost-%COMP%]     bs-tooltip-container .tooltip-arrow:before{border-top-color:#0c425d}.product-card[_ngcontent-%COMP%]{width:90%;height:50px;border-radius:25px;border:2px solid #e2e2e2}.description-card[_ngcontent-%COMP%], .product-card[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:15px}.description-card[_ngcontent-%COMP%]{position:relative;width:85%;height:100px;background-color:#0c425d;border-radius:10px;color:#fff}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}.description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-of-type{font-weight:700}.description-card[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{position:absolute;width:20px;height:30px;top:0;right:25px;border-bottom-left-radius:10px;border-bottom-right-radius:10px;background-color:#a8d2be}.card[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{border-radius:10px}.form-group[_ngcontent-%COMP%]{width:100%;padding:0 15px;margin-bottom:35px}.field-label[_ngcontent-%COMP%]{font-size:14px;color:#666}.toggleButton[_ngcontent-%COMP%]{cursor:pointer;display:block;transform-origin:50% 50%;transform-style:preserve-3d;transition:transform .14s ease}.toggleButton[_ngcontent-%COMP%]:active{transform:rotateX(30deg)}.toggleButton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.toggleButton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{border:3px solid rgba(12,66,93,.2);border-radius:50%;position:relative;width:30px;height:30px}.toggleButton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:none;stroke-width:3.6;stroke:rgba(12,66,93,.87);stroke-linecap:round;stroke-linejoin:round;width:30px;height:30px;display:block;position:absolute;left:-3px;top:-3px;right:-3px;bottom:-3px;z-index:1;stroke-dashoffset:124.6;stroke-dasharray:0 162.6 133 29.6;transition:all .4s ease 0s}.toggleButton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after, .toggleButton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before{content:"";width:3px;height:16px;background:rgba(12,66,93,.87);position:absolute;left:50%;top:50%;border-radius:5px}.toggleButton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(45deg);-webkit-animation:bounceInBefore .3s linear .3s forwards;animation:bounceInBefore .3s linear .3s forwards}.toggleButton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(-45deg);-webkit-animation:bounceInAfter .3s linear .3s forwards;animation:bounceInAfter .3s linear .3s forwards}.toggleButton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-dashoffset:162.6;stroke-dasharray:0 162.6 28 134.6;transition:all .4s ease .2s}.toggleButton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:before{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(45deg);-webkit-animation:bounceInBeforeDont .3s linear 0s forwards;animation:bounceInBeforeDont .3s linear 0s forwards}.toggleButton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(-45deg);-webkit-animation:bounceInAfterDont .3s linear 0s forwards;animation:bounceInAfterDont .3s linear 0s forwards}@-webkit-keyframes bounceInBefore{0%{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(45deg)}50%{opacity:.9;transform:scale(1.1) translate(-50%,-50%) rotate(45deg)}80%{opacity:1;transform:scale(.89) translate(-50%,-50%) rotate(45deg)}to{opacity:1;transform:scale(1) translate(-50%,-50%) rotate(45deg)}}@keyframes bounceInBefore{0%{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(45deg)}50%{opacity:.9;transform:scale(1.1) translate(-50%,-50%) rotate(45deg)}80%{opacity:1;transform:scale(.89) translate(-50%,-50%) rotate(45deg)}to{opacity:1;transform:scale(1) translate(-50%,-50%) rotate(45deg)}}@-webkit-keyframes bounceInAfter{0%{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(-45deg)}50%{opacity:.9;transform:scale(1.1) translate(-50%,-50%) rotate(-45deg)}80%{opacity:1;transform:scale(.89) translate(-50%,-50%) rotate(-45deg)}to{opacity:1;transform:scale(1) translate(-50%,-50%) rotate(-45deg)}}@keyframes bounceInAfter{0%{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(-45deg)}50%{opacity:.9;transform:scale(1.1) translate(-50%,-50%) rotate(-45deg)}80%{opacity:1;transform:scale(.89) translate(-50%,-50%) rotate(-45deg)}to{opacity:1;transform:scale(1) translate(-50%,-50%) rotate(-45deg)}}@-webkit-keyframes bounceInBeforeDont{0%{opacity:1;transform:scale(1) translate(-50%,-50%) rotate(45deg)}to{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(45deg)}}@keyframes bounceInBeforeDont{0%{opacity:1;transform:scale(1) translate(-50%,-50%) rotate(45deg)}to{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(45deg)}}@-webkit-keyframes bounceInAfterDont{0%{opacity:1;transform:scale(1) translate(-50%,-50%) rotate(-45deg)}to{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(-45deg)}}@keyframes bounceInAfterDont{0%{opacity:1;transform:scale(1) translate(-50%,-50%) rotate(-45deg)}to{opacity:0;transform:scale(.3) translate(-50%,-50%) rotate(-45deg)}}']}),N),Y=o("RSPI"),Z=o("LcOu"),tt=o("B8bQ"),et=o("OQdj");function ot(t,e){if(1&t){var o=u.Xb();u.Ub(0),u.Wb(1,"div",10),u.Wb(2,"app-select",11),u.ec("itemselected",(function(t){u.zc(o);var r=e.index;return u.ic().selectSubCategory(r,t)})),u.Vb(),u.Vb(),u.Tb()}if(2&t){var r=e.index,n=u.ic();u.Cb(2),u.nc("label","sub category")("fieldId","subCategory"+(r+1).toString())("ItemsList",n.subCategories[r])("placeholder","Choose parent category")("fieldClass","col-18_md-24")("required",!0)}}function rt(t,e){if(1&t){var o=u.Xb();u.Ub(0),u.Rb(1,"div",20),u.Wb(2,"div",21),u.Wb(3,"div",15),u.Wb(4,"i",22),u.ec("click",(function(){u.zc(o);var t=u.ic().index;return u.ic().removeProperty(t)})),u.Ic(5,"clear"),u.Vb(),u.Vb(),u.Vb(),u.Tb()}}var nt=function(t){return{"grid-right":t}};function it(t,e){if(1&t){var o=u.Xb();u.Ub(0),u.Wb(1,"app-select",23),u.ec("itemselected",(function(t){u.zc(o);var e=u.ic().index,r=u.ic(2).index;return u.ic().selectProductAttribute(t,r,e)})),u.Vb(),u.Tb()}if(2&t){var r=u.ic(),n=r.index,i=r.$implicit,a=u.ic(3);u.Cb(1),u.nc("ngClass",u.qc(6,nt,n%2!=0))("label",i.get("name").get("en").value)("fieldId",i.get("name").get("en").value)("ItemsList",a.attributesDropDown[n].values)("fieldClass","col-18_md-24")("required",!0)}}function at(t,e){if(1&t){var o=u.Xb();u.Ub(0),u.Wb(1,"div",24),u.Wb(2,"div",25),u.Wb(3,"label",26),u.Ic(4),u.Vb(),u.Vb(),u.Wb(5,"div",27),u.Wb(6,"input",28),u.ec("input",(function(t){u.zc(o);var e=u.ic().index,r=u.ic(2).index;return u.ic().selectProductAttributeText(t,r,e)})),u.Vb(),u.Vb(),u.Vb(),u.Tb()}if(2&t){var r=u.ic(),n=r.index,i=r.$implicit;u.Cb(2),u.nc("ngClass",u.qc(6,nt,n%2!=0)),u.Cb(1),u.nc("for",i.get("name").get("en").value),u.Cb(1),u.Jc(i.get("name").get("en").value),u.Cb(2),u.nc("id",i.get("name").get("en").value)("placeholder",i.get("name").get("en").value)("tooltip",i.get("name").get("en").value)}}function ct(t,e){if(1&t&&(u.Ub(0),u.Gc(1,it,2,8,"ng-container",14),u.Gc(2,at,7,8,"ng-container",14),u.Tb()),2&t){var o=e.index,r=u.ic(3);u.Cb(1),u.nc("ngIf",r.attributesDropDown[o].values.length>0),u.Cb(1),u.nc("ngIf",0===r.attributesDropDown[o].values.length)}}function st(t,e){if(1&t&&(u.Ub(0),u.Gc(1,ct,3,2,"ng-container",12),u.Tb()),2&t){var o=u.ic().$implicit;u.Cb(1),u.nc("ngForOf",o.get("productAttributes").controls)}}function lt(t,e){if(1&t&&(u.Ub(0),u.Gc(1,rt,6,0,"ng-container",14),u.Rb(2,"app-input-text",18),u.Rb(3,"app-input-text",19),u.Gc(4,st,2,1,"ng-container",14),u.Tb()),2&t){var o=e.$implicit,r=e.index;u.Cb(1),u.nc("ngIf",r>0),u.Cb(1),u.nc("label","Price")("fieldId","price")("required",!0)("placeholder","Product Cost")("control",o.get("price"))("fieldClass","col-19_xlg-18_lg-17_md-24"),u.Cb(1),u.nc("label","Qty")("fieldId","qty")("required",!0)("placeholder","Product quantity")("control",o.get("qty"))("fieldClass","col-19_xlg-18_lg-17_md-24"),u.Cb(1),u.nc("ngIf",o.get("productAttributes").controls.length>0)}}function dt(t,e){if(1&t){var o=u.Xb();u.Ub(0),u.Wb(1,"button",29),u.ec("click",(function(){return u.zc(o),u.ic().addProperty()})),u.Ic(2," Add property "),u.Vb(),u.Tb()}if(2&t){var r=u.ic();u.Cb(1),u.nc("disabled",!r.form.get("properties").controls[r.form.get("properties").controls.length-1].valid||0==r.selectedCategoryAttributes.length)}}var bt=function(){return["/products"]};function ut(t,e){if(1&t){var o=u.Xb();u.Ub(0),u.Rb(1,"div",18),u.Wb(2,"div",19),u.Wb(3,"div",13),u.Wb(4,"i",20),u.ec("click",(function(){u.zc(o);var t=u.ic().index;return u.ic().removeProperty(t)})),u.Ic(5,"clear"),u.Vb(),u.Vb(),u.Vb(),u.Tb()}}var pt=function(t){return{"grid-right":t}};function gt(t,e){if(1&t){var o=u.Xb();u.Ub(0),u.Wb(1,"app-select",21),u.ec("itemselected",(function(t){u.zc(o);var e=u.ic().index,r=u.ic(2).index;return u.ic().selectProductAttribute(t,r,e)})),u.Vb(),u.Tb()}if(2&t){var r=u.ic(),n=r.index,i=r.$implicit,a=u.ic(2).index,c=u.ic();u.Cb(1),u.nc("ngClass",u.qc(7,pt,n%2!=0))("label",i.get("name").get("en").value)("fieldId",i.get("name").get("en").value)("initialSelectedItem",c.initialSelectedProductAttribute[a][n])("ItemsList",c.attributesDropDown[n].values)("fieldClass","col-18_md-24")("required",!0)}}function ft(t,e){if(1&t){var o=u.Xb();u.Ub(0),u.Wb(1,"div",22),u.Wb(2,"div",23),u.Wb(3,"label",24),u.Ic(4),u.Vb(),u.Vb(),u.Wb(5,"div",25),u.Wb(6,"input",26),u.ec("input",(function(t){u.zc(o);var e=u.ic().index,r=u.ic(2).index;return u.ic().selectProductAttributeText(t,r,e)})),u.Vb(),u.Vb(),u.Vb(),u.Tb()}if(2&t){var r=u.ic(),n=r.index,i=r.$implicit;u.Cb(2),u.nc("ngClass",u.qc(6,pt,n%2!=0)),u.Cb(1),u.nc("for",i.get("name").get("en").value),u.Cb(1),u.Jc(i.get("name").get("en").value),u.Cb(2),u.nc("id",i.get("name").get("en").value)("placeholder",i.get("name").get("en").value)("tooltip",i.get("name").get("en").value)}}function ht(t,e){if(1&t&&(u.Ub(0),u.Gc(1,gt,2,9,"ng-container",12),u.Gc(2,ft,7,8,"ng-container",12),u.Tb()),2&t){var o=e.index,r=u.ic(3);u.Cb(1),u.nc("ngIf",r.attributesDropDown[o].values.length>0),u.Cb(1),u.nc("ngIf",0===r.attributesDropDown[o].values.length)}}function mt(t,e){if(1&t&&(u.Ub(0),u.Gc(1,ht,3,2,"ng-container",11),u.Tb()),2&t){var o=u.ic().$implicit;u.Cb(1),u.nc("ngForOf",o.get("productAttributes").controls)}}function vt(t,e){if(1&t&&(u.Ub(0),u.Gc(1,ut,6,0,"ng-container",12),u.Rb(2,"app-input-text",16),u.Rb(3,"app-input-text",17),u.Gc(4,mt,2,1,"ng-container",12),u.Tb()),2&t){var o=e.$implicit,r=e.index;u.Cb(1),u.nc("ngIf",r>0),u.Cb(1),u.nc("label","Price")("fieldId","price")("required",!0)("placeholder","Product Cost")("control",o.get("price"))("fieldClass","col-19_xlg-18_lg-17_md-24"),u.Cb(1),u.nc("label","Qty")("fieldId","qty")("required",!0)("placeholder","Product quantity")("control",o.get("qty"))("fieldClass","col-19_xlg-18_lg-17_md-24"),u.Cb(1),u.nc("ngIf",o.get("productAttributes").controls.length>0)}}function Ct(t,e){if(1&t){var o=u.Xb();u.Ub(0),u.Wb(1,"button",27),u.ec("click",(function(){return u.zc(o),u.ic().addProperty()})),u.Ic(2," Add property "),u.Vb(),u.Tb()}if(2&t){var r=u.ic();u.Cb(1),u.nc("disabled",!r.form.get("properties").controls[r.form.get("properties").controls.length-1].valid)}}var yt,_t,Vt,xt,Pt=function(){return["/products"]},kt=[{path:"",component:K},{path:"add",component:(_t=function(){function t(e,o,r,i,a,c,s){_classCallCheck(this,t),this.fb=e,this.productsService=o,this.productAttributeService=r,this.categoriesService=i,this.toastr=a,this.spinner=c,this.router=s,this.form=this.fb.group({photos:this.fb.array([]),name:["",n.v.required],description:["",n.v.required],category:this.fb.group({_id:[],name:this.fb.group({en:[],ar:[]})}),properties:this.fb.array([this.fb.group({price:["",n.v.required],qty:["",n.v.required],productAttributes:this.fb.array([])})])}),this.subCategories=[],this.selectedCategory={},this.selectedCategoryAttributes=[],this.attributesDropDown=[{values:[]}],this.properties=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.getbaseCategoriesList()}},{key:"getbaseCategoriesList",value:function(){var t=this;this.spinner.show(),this.categoriesService.getBaseCategories(),this.categoriesService.baseCategories.subscribe((function(e){e&&(t.baseCategoryDropDown=e.map((function(t){return{_id:t._id,nameEn:"".concat(t.name.en),nameAr:"".concat(t.name.ar)}})))})),this.spinner.hide()}},{key:"selectBaseCategory",value:function(t){var e=this;if(this.selectedCategory={},this.subCategories=[],this.resetProductAttributes(),t)return this.selectedCategory={},this.selectedCategory[0]=t,this.categoriesService.getOne(t._id).subscribe((function(t){e.toastr.info(t.message,"Info"),t.data.categories&&t.data.categories.length>0&&(e.subCategories[0]=t.data.categories.map((function(t){return{_id:t._id,nameEn:"".concat(t.name.en),nameAr:"".concat(t.name.ar)}}))),t.data.productAttributes&&(e.selectedCategoryAttributes=t.data.productAttributes,e.getproductAttributesList(t.data.productAttributes))}),(function(t){console.log(t),e.toastr.error(t.error.message,"Error")}));this.selectedCategory={},this.subCategories=[],this.resetProductAttributes()}},{key:"selectSubCategory",value:function(t,e){var o=this;for(var r in this.spinner.show(),this.resetProductAttributes(),this.selectedCategory)r>t+1&&delete this.selectedCategory[r];this.subCategories.splice(t+1),e?(this.selectedCategory[t+1]=e,this.categoriesService.getOne(e._id).subscribe((function(e){o.toastr.info(e.message,"Info"),e.data.categories&&e.data.categories.length>0&&(o.subCategories[t+1]=e.data.categories.map((function(t){return{_id:t._id,nameEn:"".concat(t.name.en),nameAr:"".concat(t.name.ar)}}))),e.data.productAttributes&&(o.selectedCategoryAttributes=e.data.productAttributes,o.getproductAttributesList(e.data.productAttributes))}),(function(t){console.log(t),o.toastr.error(t.error.message,"Error")}))):delete this.selectedCategory[t+1],this.spinner.hide()}},{key:"getproductAttributesList",value:function(t){for(var e=this.form.get("properties"),o=0;o<e.controls.length;o++)this.setArrayInGroup(e.controls[o],t)}},{key:"resetProductAttributes",value:function(){this.attributesDropDown=[{values:[]}];for(var t=0;t<this.form.get("properties").controls.length;t++)for(var e=this.form.get("properties").controls[t].get("productAttributes");0!==e.length;)e.removeAt(0)}},{key:"addProperty",value:function(){var t=this.form.get("properties");t.controls[t.length-1].valid&&this.selectedCategoryAttributes.length>0&&(t.push(this.fb.group({price:["",n.v.required],qty:["",n.v.required],productAttributes:this.fb.array([])})),this.setArrayInGroup(t.controls[t.length-1],this.selectedCategoryAttributes))}},{key:"removeProperty",value:function(t){var e=this.form.get("properties");e.controls.length>1&&e.removeAt(t)}},{key:"setArrayInGroup",value:function(t,e){for(var o=t.get("productAttributes"),r=0;r<e.length;r++){this.attributesDropDown[r]={values:[]},o.controls[r]=this.fb.group({name:this.fb.group({en:["",n.v.required],ar:[""]}),value:this.fb.group({_id:["",n.v.required],en:["",n.v.required],ar:[""]})}),o.controls[r].get("name").get("en").patchValue(e[r].name.en),o.controls[r].get("name").get("ar").patchValue(e[r].name.ar);for(var i=0;i<e[r].values.length;i++)this.attributesDropDown[r].values.push({_id:e[r].values[i]._id,nameEn:e[r].values[i].en,nameAr:e[r].values[i].ar})}}},{key:"selectProductAttribute",value:function(t,e,o){this.properties[e]||(this.properties[e]=[]),this.properties[e][o]||(this.properties[e][o]=[]),this.properties[e][o]=t,console.log(this.properties)}},{key:"selectProductAttributeText",value:function(t,e,o){this.properties[e]||(this.properties[e]=[]),this.properties[e][o]||(this.properties[e][o]=[]),this.properties[e][o]={_id:"".concat(e," ff ").concat(o),nameEn:t.target.value,nameAr:""},console.log(this.properties)}},{key:"onSubmit",value:function(){var t=this;this.spinner.show();for(var e=0;e<this.form.get("properties").controls.length;e++){for(var o=this.form.get("properties").controls[e].get("productAttributes"),r=0;r<o.controls.length;r++){var n=o.controls[r];this.properties[e]&&this.properties[e][r]&&(n.get("value").get("_id").patchValue(this.properties[e][r]._id),n.get("value").get("en").patchValue(this.properties[e][r].nameEn),n.get("value").get("ar").patchValue(this.properties[e][r].nameAr))}o.patchValue(o.controls)}if(0===Object.keys(this.selectedCategory).length)this.form.get("category").reset();else{var i=0;for(var a in this.selectedCategory)this.selectedCategory.hasOwnProperty(a)&&++i;this.selectedCategory[i-1]&&(this.form.get("category").get("_id").patchValue(this.selectedCategory[i-1]._id),this.form.get("category").get("name").get("en").patchValue(this.selectedCategory[i-1].nameEn),this.form.get("category").get("name").get("ar").patchValue(this.selectedCategory[i-1].nameAr))}console.log(this.form.value);var c=new FormData;for(var s in this.form.value)if("photos"===s)for(var l=0;l<this.form.value[s].length;l++)c.append(s,this.form.value[s][l]);else c.append(s,JSON.stringify(this.form.value[s]));this.productsService.addOne(c).subscribe((function(e){console.log(e),t.photos=[],t.form.reset(),t.toastr.info(e.message,"Info"),t.router.navigate(["/products"]),t.spinner.hide()}),(function(e){console.log(e),t.toastr.error(e.error.message,"Error"),t.spinner.hide()})),this.spinner.hide()}}]),t}(),_t.\u0275fac=function(t){return new(t||_t)(u.Qb(n.d),u.Qb(p.a),u.Qb(Y.a),u.Qb(Z.a),u.Qb(f.b),u.Qb(h.c),u.Qb(d.b))},_t.\u0275cmp=u.Kb({type:_t,selectors:[["app-add-product"]],decls:29,vars:37,consts:[[1,"grid-center-noGutter"],[1,"col-20_sm-22_xs-23","grid-center-noGutter","content"],[1,"title","col-24","grid-center"],[1,"form","col-23"],[1,"grid-middle-noGutter"],[1,"form-group","grid-center-middle-noGutter","col-24"],[1,"col-24","grid-center"],[3,"photos","control"],["type","text",1,"col-11_sm-24",3,"label","fieldId","required","placeholder","tooltipMsg","control","fieldClass"],["type","text",1,"col-11_sm-24","grid-right",3,"label","fieldId","placeholder","tooltipMsg","control","fieldClass"],[1,"col-24","grid-noGutter"],[1,"col-11_sm-24",3,"label","fieldId","ItemsList","placeholder","fieldClass","required","itemselected"],[4,"ngFor","ngForOf"],[1,"col-24",2,"margin-bottom","15px"],[4,"ngIf"],[1,"grid-right"],["type","submit",1,"btn","col-3_sm-5_xs-6","color1","round",3,"disabled","click"],["type","button",1,"btn","col-3_sm-5_xs-6","color2","round",3,"routerLink"],["type","number",1,"col-11_sm-24",3,"label","fieldId","required","placeholder","control","fieldClass"],["type","number",1,"col-11_sm-24","grid-right",3,"label","fieldId","required","placeholder","control","fieldClass"],[1,"col-24",2,"height","2px","background-color","#e9e9e9","margin","10px"],[1,"col-24","actions"],["tooltip","Remove property",1,"material-icons",2,"cursor","pointer",3,"click"],[1,"col-11_sm-24",3,"ngClass","label","fieldId","ItemsList","fieldClass","required","itemselected"],[1,"form-group","col-11_sm-24","grid-center-middle-noGutter"],[1,"col_sm-24","grid_sm-noGutter",3,"ngClass"],[3,"for"],[1,"col-18_md-24","grid"],["type","text","autocomplete","off","placement","top",1,"form-control",3,"id","placeholder","tooltip","input"],["type","submit",1,"btn","color1",3,"disabled","click"]],template:function(t,e){1&t&&(u.Rb(0,"ngx-spinner"),u.Wb(1,"div",0),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Ic(4),u.jc(5,"translate"),u.jc(6,"lowercase"),u.jc(7,"translate"),u.jc(8,"lowercase"),u.Vb(),u.Wb(9,"div",3),u.Wb(10,"div",4),u.Wb(11,"div",5),u.Wb(12,"div",6),u.Rb(13,"app-upload-multi-photos",7),u.Vb(),u.Vb(),u.Rb(14,"app-input-text",8),u.Rb(15,"app-textarea",9),u.Wb(16,"div",10),u.Wb(17,"app-select",11),u.ec("itemselected",(function(t){return e.selectBaseCategory(t)})),u.Vb(),u.Vb(),u.Gc(18,ot,3,6,"ng-container",12),u.Wb(19,"div",13),u.Wb(20,"b"),u.Ic(21," Properties"),u.Vb(),u.Vb(),u.Gc(22,lt,5,14,"ng-container",12),u.Vb(),u.Gc(23,dt,3,1,"ng-container",14),u.Wb(24,"div",15),u.Wb(25,"button",16),u.ec("click",(function(){return e.onSubmit()})),u.Ic(26," Submit "),u.Vb(),u.Wb(27,"button",17),u.Ic(28," Cancel "),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Cb(4),u.Lc(" ",u.kc(5,28,u.kc(6,30,"add"))," ",u.kc(7,32,u.kc(8,34,"Product"))," "),u.Cb(9),u.nc("photos",e.photos)("control",e.form.get("photos")),u.Cb(1),u.nc("label","Name")("fieldId","name")("required",!0)("placeholder","Product Name")("tooltipMsg","Name")("control",e.form.get("name"))("fieldClass","col-19_xlg-18_lg-17_md-24"),u.Cb(1),u.nc("label","Description")("fieldId","description")("placeholder","Product description")("tooltipMsg","Product description")("control",e.form.get("description"))("fieldClass","col-19_xlg-18_lg-17_md-24"),u.Cb(2),u.nc("label","Category")("fieldId","category")("ItemsList",e.baseCategoryDropDown)("placeholder","Choose parent category")("fieldClass","col-18_md-24")("required",!0),u.Cb(1),u.nc("ngForOf",e.subCategories),u.Cb(4),u.nc("ngForOf",e.form.get("properties").controls),u.Cb(1),u.nc("ngIf",e.form.get("properties").controls[e.form.get("properties").controls.length-1].valid&&0!=e.selectedCategoryAttributes.length),u.Cb(2),u.nc("disabled",!e.form.valid),u.Cb(2),u.nc("routerLink",u.pc(36,bt)))},directives:[h.a,tt.a,v.a,et.a,C.a,r.l,r.m,d.c,i.a,r.k],pipes:[y.c,r.j],styles:["[_nghost-%COMP%]{display:block;background-color:#efedf2}.content[_ngcontent-%COMP%]{border-radius:10px;background-color:#fffdfe;border:1px solid #f1f1f1;padding-bottom:15px!important;margin-bottom:20px;box-shadow:0 0 8px 1px rgba(0,0,0,.05);margin-top:20px}.title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#0c425d;margin-bottom:15px;background-color:#f9f9f9;border-bottom:1px solid #f1f1f1;padding:10px!important;border-radius:10px}button[_ngcontent-%COMP%]{margin:0 10px;font-size:16px}.textarea-maxWidth[_ngcontent-%COMP%]{max-width:81.7%}[_nghost-%COMP%]     app-ng2tel .iti.iti--allow-dropdown{width:100%}.activeModalIcon[_ngcontent-%COMP%]{background:#1f1a5f!important;border-radius:10px}.actions[_ngcontent-%COMP%]{display:inline-block}.actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;padding:4px;vertical-align:middle;background-color:red;color:#fff;border-radius:50%;cursor:pointer}"]}),_t)},{path:"edit/:id",component:(yt=function(){function t(e,o,r,i,a,c,s){_classCallCheck(this,t),this.fb=e,this.route=o,this.productsService=r,this.categoriesService=i,this.toastr=a,this.spinner=c,this.router=s,this.originalPhotos=[],this.form=this.fb.group({originalPhotos:this.fb.array([]),photos:this.fb.array([]),name:["",n.v.required],description:["",n.v.required],category:this.fb.group({_id:[],name:this.fb.group({en:[],ar:[]})}),properties:this.fb.array([])}),this.attributesDropDown=[{values:[]}],this.selectedCategoryAttributes=[],this.initialSelectedProductAttribute=[[]],this.properties=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.productId=this.route.snapshot.paramMap.get("id")}},{key:"ngAfterViewInit",value:function(){this.getOne(this.productId)}},{key:"getOne",value:function(t){var e=this;this.spinner.show(),this.productsService.getOne(t).subscribe((function(t){e.getCategory(t.data.category._id),e.toastr.info(t.message,"Info");for(var o=0;o<t.data.photos.length;o++)e.originalPhotos[o]||(e.originalPhotos[o]=t.data.photos[o]),e.form.get("originalPhotos").controls.push(t.data.photos[o]);e.form.patchValue(t.data);for(var r=0;r<t.data.properties.length;r++){e.form.get("properties").push(e.fb.group({_id:[""],price:["",n.v.required],qty:["",n.v.required],productAttributes:e.fb.array([])})),e.properties[r]||(e.properties[r]=[]);for(var i=0;i<t.data.properties[r].productAttributes.length;i++)e.properties[r][i]||(e.properties[r][i]=[]),e.properties[r][i]={_id:t.data.properties[r].productAttributes[i].value._id,nameEn:t.data.properties[r].productAttributes[i].value.en,nameAr:t.data.properties[r].productAttributes[i].value.ar}}e.form.get("properties").patchValue(t.data.properties)}),(function(t){console.log(t),e.toastr.error(t.error.message,"Error")})),this.spinner.hide()}},{key:"addProperty",value:function(){this.initialSelectedProductAttribute.push([]);var t=this.form.get("properties");t.controls[t.length-1].valid&&(t.push(this.fb.group({_id:[""],price:["",n.v.required],qty:["",n.v.required],productAttributes:this.fb.array([])})),this.setArrayInGroup(t.controls[t.length-1],this.selectedCategoryAttributes))}},{key:"removeProperty",value:function(t){var e=this.form.get("properties");e.controls.length>1&&e.removeAt(t)}},{key:"getCategory",value:function(t){var e=this;return this.spinner.show(),this.categoriesService.getOne(t).subscribe((function(t){e.toastr.info(t.message,"Info"),t.data.productAttributes&&(e.selectedCategoryAttributes=t.data.productAttributes,e.getproductAttributesList(t.data.productAttributes))}),(function(t){console.log(t),e.toastr.error(t.error.message,"Error")}))}},{key:"getproductAttributesList",value:function(t){for(var e=this.form.get("properties"),o=0;o<e.controls.length;o++)this.setArrayInGroup(e.controls[o],t);this.getInitialAttributes()}},{key:"setArrayInGroup",value:function(t,e){for(var o=t.get("productAttributes"),r=0;r<e.length;r++){this.attributesDropDown[r]={values:[]},o.controls[r]=this.fb.group({name:this.fb.group({en:["",n.v.required],ar:[""]}),value:this.fb.group({_id:["",n.v.required],en:["",n.v.required],ar:[""]})}),o.controls[r].get("name").get("en").patchValue(e[r].name.en),o.controls[r].get("name").get("ar").patchValue(e[r].name.ar);for(var i=0;i<e[r].values.length;i++)this.attributesDropDown[r].values.push({_id:e[r].values[i]._id,nameEn:e[r].values[i].en,nameAr:e[r].values[i].ar})}}},{key:"getInitialAttributes",value:function(){for(var t=this.form.get("properties"),e=0;e<t.controls.length;e++){for(var o=t.controls[e].get("productAttributes"),r=0;r<o.controls.length;r++){var n=o.controls[r];this.properties[e][r]&&(n.get("value").get("_id").patchValue(this.properties[e][r]._id),n.get("value").get("en").patchValue(this.properties[e][r].nameEn),n.get("value").get("ar").patchValue(this.properties[e][r].nameAr),this.initialSelectedProductAttribute[e]||(this.initialSelectedProductAttribute[e]=[]),this.initialSelectedProductAttribute[e][r]={_id:this.properties[e][r]._id,nameEn:this.properties[e][r].nameEn,nameAr:this.properties[e][r].nameAr})}o.patchValue(o.controls)}}},{key:"selectProductAttribute",value:function(t,e,o){this.properties[e]||(this.properties[e]=[]),this.properties[e][o]||(this.properties[e][o]=[]),this.properties[e][o]=t}},{key:"selectProductAttributeText",value:function(t,e,o){this.properties[e]||(this.properties[e]=[]),this.properties[e][o]||(this.properties[e][o]=[]),this.properties[e][o]={_id:"".concat(e," ff ").concat(o),nameEn:t.target.value,nameAr:""}}},{key:"onSubmit",value:function(){var t=this;this.spinner.show();for(var e=0;e<this.form.get("properties").controls.length;e++){for(var o=this.form.get("properties").controls[e].get("productAttributes"),r=0;r<o.controls.length;r++){var n=o.controls[r];this.properties[e]&&this.properties[e][r]&&(n.get("value").get("_id").patchValue(this.properties[e][r]._id),n.get("value").get("en").patchValue(this.properties[e][r].nameEn),n.get("value").get("ar").patchValue(this.properties[e][r].nameAr))}o.patchValue(o.controls)}var i=new FormData;for(var a in this.form.value)if("photos"===a)for(var c=0;c<this.form.value[a].length;c++)i.append(a,this.form.value[a][c]);else i.append(a,JSON.stringify(this.form.value[a]));this.productsService.updateOne(i,this.productId).subscribe((function(e){t.originalPhotos=[],t.toastr.info(e.message,"Info"),t.router.navigate(["/products"])}),(function(e){console.log(e),t.toastr.error(e.error.message,"Error")})),this.spinner.hide()}}]),t}(),yt.\u0275fac=function(t){return new(t||yt)(u.Qb(n.d),u.Qb(d.a),u.Qb(p.a),u.Qb(Z.a),u.Qb(f.b),u.Qb(h.c),u.Qb(d.b))},yt.\u0275cmp=u.Kb({type:yt,selectors:[["app-edit-product"]],decls:21,vars:20,consts:[[1,"grid-center-noGutter"],[1,"col-20_sm-22_xs-23","grid-center-noGutter","content"],[1,"title","col-24","grid-center"],[1,"form","col-23"],[1,"grid-middle-noGutter"],[1,"form-group","grid-center-middle-noGutter","col-24"],[1,"col-24","grid-center"],[3,"initialPhotos","control"],["type","text",1,"col-11_sm-24",3,"label","fieldId","required","placeholder","tooltipMsg","control","fieldClass"],["type","text",1,"col-11_sm-24","grid-right",3,"label","fieldId","placeholder","tooltipMsg","control","fieldClass"],[1,"col-24",2,"margin-bottom","15px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"grid-right"],["type","submit",1,"btn","col-3_sm-5_xs-6","color1","round",3,"disabled","click"],["type","button",1,"btn","col-3_sm-5_xs-6","color2","round",3,"routerLink"],["type","number",1,"col-11_sm-24",3,"label","fieldId","required","placeholder","control","fieldClass"],["type","number",1,"col-11_sm-24","grid-right",3,"label","fieldId","required","placeholder","control","fieldClass"],[1,"col-24",2,"height","2px","background-color","#e9e9e9","margin","10px"],[1,"col-24","actions"],["tooltip","Remove property",1,"material-icons",2,"cursor","pointer",3,"click"],[1,"col-11_sm-24",3,"ngClass","label","fieldId","initialSelectedItem","ItemsList","fieldClass","required","itemselected"],[1,"form-group","col-11_sm-24","grid-center-middle-noGutter"],[1,"col_sm-24","grid_sm-noGutter",3,"ngClass"],[3,"for"],[1,"col-18_md-24","grid"],["type","text","autocomplete","off","placement","top",1,"form-control",3,"id","placeholder","tooltip","input"],["type","submit",1,"btn","color1",3,"disabled","click"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"div",1),u.Wb(2,"div",2),u.Ic(3,"Edit Product"),u.Vb(),u.Wb(4,"div",3),u.Wb(5,"div",4),u.Wb(6,"div",5),u.Wb(7,"div",6),u.Rb(8,"app-upload-multi-photos",7),u.Vb(),u.Vb(),u.Rb(9,"app-input-text",8),u.Rb(10,"app-textarea",9),u.Wb(11,"div",10),u.Wb(12,"b"),u.Ic(13," Properties"),u.Vb(),u.Vb(),u.Gc(14,vt,5,14,"ng-container",11),u.Vb(),u.Gc(15,Ct,3,1,"ng-container",12),u.Wb(16,"div",13),u.Wb(17,"button",14),u.ec("click",(function(){return e.onSubmit()})),u.Ic(18," Submit "),u.Vb(),u.Wb(19,"button",15),u.Ic(20," Cancel "),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Cb(8),u.nc("initialPhotos",e.originalPhotos)("control",e.form.get("photos")),u.Cb(1),u.nc("label","Name")("fieldId","name")("required",!0)("placeholder","Product Name")("tooltipMsg","Name")("control",e.form.get("name"))("fieldClass","col-19_xlg-18_lg-17_md-24"),u.Cb(1),u.nc("label","Description")("fieldId","description")("placeholder","Product description")("tooltipMsg","Product description")("control",e.form.get("description"))("fieldClass","col-19_xlg-18_lg-17_md-24"),u.Cb(4),u.nc("ngForOf",e.form.get("properties").controls),u.Cb(1),u.nc("ngIf",e.form.get("properties").controls.length>0),u.Cb(2),u.nc("disabled",!e.form.valid),u.Cb(2),u.nc("routerLink",u.pc(19,Pt)))},directives:[tt.a,v.a,et.a,r.l,r.m,d.c,i.a,C.a,r.k],styles:["[_nghost-%COMP%]{display:block;background-color:#efedf2}.content[_ngcontent-%COMP%]{border-radius:10px;background-color:#fffdfe;border:1px solid #f1f1f1;padding-bottom:15px!important;margin-bottom:20px;box-shadow:0 0 8px 1px rgba(0,0,0,.05);margin-top:20px}.title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#0c425d;margin-bottom:15px;background-color:#f9f9f9;border-bottom:1px solid #f1f1f1;padding:10px!important;border-radius:10px}button[_ngcontent-%COMP%]{margin:0 10px;font-size:16px}.textarea-maxWidth[_ngcontent-%COMP%]{max-width:81.7%}[_nghost-%COMP%]     app-ng2tel .iti.iti--allow-dropdown{width:100%}.activeModalIcon[_ngcontent-%COMP%]{background:#1f1a5f!important;border-radius:10px}.actions[_ngcontent-%COMP%]{display:inline-block}.actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;padding:4px;vertical-align:middle;background-color:red;color:#fff;border-radius:50%;cursor:pointer}"]}),yt)}],It=((Vt=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ob({type:Vt}),Vt.\u0275inj=u.Nb({factory:function(t){return new(t||Vt)},imports:[[d.e.forChild(kt)],d.e]}),Vt),Wt=o("6h4U"),Ot=o("PCNd"),Mt=((xt=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ob({type:xt}),xt.\u0275inj=u.Nb({factory:function(t){return new(t||xt)},imports:[[r.c,It,n.g,Wt.a,c.c.forRoot(),s.c.forRoot(),i.b.forRoot(),a.b.forRoot(),h.b,l.a,Ot.a]]}),xt)}}]);